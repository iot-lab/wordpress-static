
<!DOCTYPE html>
<html lang="en-US">

<!-- Mirrored from www.iot-lab.info/tutorials/riot-rpl-m3/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Jun 2020 08:21:30 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<!-- [if IE]> <meta http-equiv="X-UA-Compatible" content="IE=Edge"/> <! [endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="pingback" href="../../xmlrpc.php" />
<title>Running RPL routing protocol on M3 nodes &#8226; FIT/IoT-LAB</title>
<!--[if lt IE 9]><script src="https://www.iot-lab.info/wp-content/themes/alienship-1.2.5/js/html5shiv.js" type="text/javascript"></script><![endif]-->

<link rel="alternate" type="application/rss+xml" title="FIT/IoT-LAB &raquo; Feed" href="../../feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="FIT/IoT-LAB &raquo; Comments Feed" href="../../comments/feed/index.html" />
<link rel='stylesheet' id='responsive-lightbox-swipebox-front-css'  href='../../wp-content/plugins/responsive-lightbox/assets/swipebox/source/swipebox2f54.css?ver=4.1' type='text/css' media='all' />
<link rel='stylesheet' id='toc-screen-css'  href='../../wp-content/plugins/table-of-contents-plus/screen6149.css?ver=1404' type='text/css' media='all' />
<link rel='stylesheet' id='parent-style-css'  href='../../wp-content/themes/alienship-1.2.5/style2f54.css?ver=4.1' type='text/css' media='all' />
<link rel='stylesheet' id='bootstrap-css'  href='../../wp-content/themes/alienship-1.2.5/css/bootstrap.minb3e8.css?ver=0.1' type='text/css' media='all' />
<link rel='stylesheet' id='alienship-style-css'  href='../../wp-content/themes/alienship-1.2.5-child/styleb3e8.css?ver=0.1' type='text/css' media='all' />
<script type='text/javascript' src='../../wp-includes/js/jquery/jquery90f9.js?ver=1.11.1'></script>
<script type='text/javascript' src='../../wp-includes/js/jquery/jquery-migrate.min1576.js?ver=1.2.1'></script>
<script type='text/javascript' src='../../wp-content/plugins/responsive-lightbox/assets/swipebox/source/jquery.swipebox.min2f54.js?ver=4.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var rlArgs = {"script":"swipebox","selector":"lightbox","custom_events":"","activeGalleries":"1","animation":"1","hideBars":"1","hideBarsDelay":"5000","videoMaxWidth":"1080"};
/* ]]> */
</script>
<script type='text/javascript' src='../../wp-content/plugins/responsive-lightbox/js/front2f54.js?ver=4.1'></script>
<script type='text/javascript' src='../../wp-content/themes/alienship-1.2.5-child/js/bootstrap-hover-dropdown.min2f54.js?ver=4.1'></script>
<link rel='canonical' href='index.html' />
        <style type="text/css" media="screen">
          div.printfriendly {
            margin: 12px 12px 12px 12px;;
          }
          div.printfriendly a, div.printfriendly a:link, div.printfriendly a:visited {
            text-decoration: none;
            font-size: 14px;
            color: #6D9F00;
            vertical-align: bottom;
            border: none;
          }

          .printfriendly a:hover {
            cursor: pointer;
          }

          .printfriendly a img  {
            border: none;
            padding:0;
            margin-right: 6px;
            display:inline-block;
            box-shadow: none;
            -webkit-box-shadow: none;
            -moz-box-shadow: none;
          }
          .printfriendly a span{
            vertical-align: bottom;
          }
          .pf-alignleft {
            float: left;
          }
          .pf-alignright {
            float: right;
          }
          div.pf-aligncenter {
            display: block;
            margin-left: auto;
            margin-right: auto;
            text-align: center;
          }
        </style>
        <style type="text/css" media="print">
          .printfriendly {
            display: none;
          }
        </style>
 	<style type="text/css">
 				#site-title,
		#site-description {
			position: absolute;
			clip: rect(1px 1px 1px 1px); /* IE6, IE7 */
			clip: rect(1px, 1px, 1px, 1px);
		}
 		 	</style>
 	
<!-- BEGIN GADWP v5.3.1.1 Universal Analytics - https://deconf.com/google-analytics-dashboard-wordpress/ -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-115966924-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- END GADWP Universal Analytics -->
</head>

<body class="page page-id-4083 page-child parent-pageid-7210 page-template page-template-templates page-template-page-full page-template-templatespage-full-php layout-default">
	<!--[if lt IE 9]><p class="browsehappy alert alert-danger">You are using an outdated browser. Please <a class="alert-link" href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p><![endif]-->

	<!-- Top Menu -->
	<nav class="navbar navbar-default navbar-onelab navbar-fixed-top top-navigation" role="navigation">
	    <div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
							<a href="../../index.html"><img src="../../wp-content/themes/alienship-1.2.5-child/templates/parts/fit-iotlab3.png" /></a>
					</div>

		<div class="collapse navbar-collapse navbar-ex1-collapse">
			<ul id="menu-topmainmenu" class="nav navbar-nav"><li id="menu-item-2066" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2066"><a title="News" href="../../news/index.html">News</a></li>
<li id="menu-item-140" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-140 dropdown"><a title="Platform" data-toggle="dropdown" data-hover="dropdown" href="../../what-is-iot-lab/index.html">Platform <span class="caret"></span></a>
<ul role="menu" class=" dropdown-menu">
	<li id="menu-item-466" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-466"><a title="What is IoT-LAB?" href="../../what-is-iot-lab/index.html">What is IoT-LAB?</a></li>
	<li id="menu-item-147" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-147"><a title="Deployment" href="../../deployment/index.html">Deployment</a></li>
	<li id="menu-item-146" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-146"><a title="Hardware" href="../../hardware/index.html">Hardware</a></li>
	<li id="menu-item-4608" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4608"><a title="Robots" href="../../robots/index.html">Robots</a></li>
	<li id="menu-item-2400" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2400"><a title="About us" href="../../about-us/index.html">About us</a></li>
</ul>
</li>
<li id="menu-item-1467" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-1467 dropdown"><a title="Dev Center" data-toggle="dropdown" data-hover="dropdown" href="../../dev-center/index.html">Dev Center <span class="caret"></span></a>
<ul role="menu" class=" dropdown-menu">
	<li id="menu-item-1957" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1957"><a title="Software Development" href="../../dev-center/index.html">Software Development</a></li>
	<li id="menu-item-7329" class="menu-item menu-item-type-post_type menu-item-object-page current-page-ancestor menu-item-7329"><a title="Tutorials" href="../index.html">Tutorials</a></li>
	<li id="menu-item-1552" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1552"><a title="Operating Systems" href="../../operating-systems/index.html">Operating Systems</a></li>
	<li id="menu-item-1396" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1396"><a title="Libraries" href="../../libraries/index.html">Libraries</a></li>
	<li id="menu-item-1394" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1394"><a title="Drivers" href="../../drivers/index.html">Drivers</a></li>
	<li id="menu-item-7372" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7372"><a title="REST API documentation" href="http://api.iot-lab.info/">REST API documentation</a></li>
</ul>
</li>
<li id="menu-item-3209" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-3209 dropdown"><a title="Community" data-toggle="dropdown" data-hover="dropdown" href="../../community/index.html">Community <span class="caret"></span></a>
<ul role="menu" class=" dropdown-menu">
	<li id="menu-item-3244" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3244"><a title="Share your experience" href="../../community/index.html">Share your experience</a></li>
	<li id="menu-item-3210" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3210"><a title="Education" href="../../education/index.html">Education</a></li>
	<li id="menu-item-2133" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2133"><a title="Publications" href="../../publications/index.html">Publications</a></li>
	<li id="menu-item-2405" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2405"><a title="Charter" href="../../charter/index.html">Charter</a></li>
</ul>
</li>
<li id="menu-item-1470" class="get_started menu-item menu-item-type-post_type menu-item-object-page menu-item-1470"><a title="Get Started" href="../../get_started/index.html">Get Started</a></li>
</ul>

			<ul class="nav navbar-nav navbar-right">

				<li class="dropdown">
					<a href="../../testbed/drawgantt.html" title="Testbed activity"><span class="glyphicon glyphicon-calendar"></span> Activity</a>
				</li>



			                        	<li><span><a href="../../testbed/index.html" class="btn btn-primary testbed" title="Login">Access the testbed</a></span></li>
			                        </ul>
		</div>
	    </div>
	</nav>
<!-- End Top Menu -->


	<div id="page" class="container hfeed site">

				<header id="masthead" class="site-header" role="banner">
			<p id="site-title" class="site-title"><a href="../../index.html" title="FIT/IoT-LAB" rel="home">FIT/IoT-LAB</a></p><p id="site-description" class="site-description">Very large scale open wireless sensor network testbed</p>		</header><!-- #masthead -->
			<div id="content" class="site-content row">

		<div id="primary" class="col-sm-12">

				<main id="main" class="site-main" role="main">

		<article role="article" id="post-4083" class="post-4083 page type-page status-publish hentry">
		<div class="entry-content">
		<div class="pf-content"><h2>Running RPL routing protocol with RIOT on M3 nodes</h2>
<p>&nbsp;</p>
<p><img class="alignnone size-full wp-image-1252" src="../../wp-content/uploads/2014/02/difficulty.jpg" alt="" width="30" height="30" /> <strong>Difficulty</strong>: Medium</p>
<p><img class="alignnone size-full wp-image-1253" src="../../wp-content/uploads/2014/02/duration.jpg" alt="" width="30" height="30" /> <strong>Duration</strong>: 30 minutes</p>
<p><em><strong>Prerequisites</strong>:  <em><a href="../riot-networking-m3/index.html">RIOT networking example for M3 nodes</a> / <em><em><a href="../serial-aggregator/index.html">Nodes Serial Link Aggregation</a></em></em></em></em></p>
<p><em><strong>Description</strong>: The aim of this tutorial is to run an experiment on M3 nodes with the RPL routing protocol on RIOT OS. RIOT provides an implementation of the RPL routing protocol. RPL routing is based on DAG (Directed Acyclic Graph) structures.</em></p>
<ol>
<li>Connect to the SSH frontend of Saclay :
<pre>my_computer:~$ <strong>ssh &lt;login&gt;@saclay.iot-lab.info</strong></pre>
</li>
<li>Compile the firmware
<pre>&lt;login&gt;@&lt;site&gt;:~$ <strong>source /opt/riot.source</strong>
&lt;login&gt;@&lt;site&gt;:~$ <strong>cd iot-lab/parts/RIOT/examples/gnrc_networking/</strong>
&lt;login&gt;@&lt;site&gt;:~$ <strong>BOARD=iotlab-m3 make all</strong></pre>
</li>
<li>Retrieve the generated binary firmware file on your computer <em>(execute this scp command on your computer!)</em>
<pre>my_computer:$ <strong>scp &lt;login&gt;@saclay.iot-lab.info:iot-lab/parts/RIOT/examples/gnrc_networking/bin/iotlab-m3/gnrc_networking.elf gnrc_networking.elf</strong></pre>
</li>
<li><a href="../../testbed/index.html" target="_blank">Log into the Web portal</a> with your account credentials</li>
<li>Submit a new experiment:
<ul>
<li>Set an experiment name (no spaces nor funny chars in the experiment name)</li>
<li>Duration: 3<strong>0 minutes</strong> and starting &#8220;<strong>As soon as possible</strong>&#8220;</li>
<li>Choose nodes with Architecture m3 (at86rf231) / Site = saclay / Number = 3 and click &#8220;Add to experiment&#8221;</li>
<li>Add your binary firmware gnrc_networking.elf with nodes selected</li>
</ul>
</li>
<li>Wait experiment state Running in dashboard list. After click on experiment details and visualize which nodes you are booked and verify that you have Success in the deployment result</li>
<li>First, we have to initialize RPL on all nodes for interface 7 (can be obtained by looking at the output of <em>ifconfig</em>).We use on the SSH frontend the <a title="Nodes serial link aggregation" href="../serial-aggregator/index.html"> <strong>serial aggregator</strong></a> to talk to all nodes:
<pre>&lt;login&gt;@&lt;site&gt;:~$ <strong>serial_aggregator</strong>
rpl init 7
1449177253.320969;m3-7;&gt; rpl init 7
1449177253.322160;m3-6;&gt; rpl init 7
1449177253.322816;m3-7;successfully initialized RPL on interface 7
1449177253.323151;m3-8;&gt; rpl init 7
1449177253.323429;m3-6;successfully initialized RPL on interface 7
1449177253.324136;m3-8;successfully initialized RPL on interface 7
</pre>
</li>
<li>With RPL two types of nodes are available: <strong>simple router nodes</strong> and <strong>root nodes</strong> (the root of the DAG).In our example we will choose <em>m3-6</em> as the root of the DAG. Before doing so however, we need to configure a global IPv6 address for<em>m3-6</em> that can be used as the RPL DODAG-ID.
<pre>m3-6;ifconfig 7 add 2001:db8::1
1449177776.399768;m3-6;&gt; ifconfig 7 add 2001:db8::1
1449177776.399935;m3-6;success: added 2001:db8::1/64 to interface 7
</pre>
</li>
<li>Now we can start a RPL DODAG on the root node with the configured global IPv6 address as the DODAG-ID and the instance id 1.
<pre>m3-6;rpl root 1 2001:db8::1
1449177966.453694;m3-6;&gt; rpl root 1 2001:db8::1
1449177966.454517;m3-6;successfully added a new RPL DODAG
</pre>
</li>
<li>To show the dodag at node 7 and 8:
<pre>m3-7;rpl
1449177995.460814;m3-7;&gt; rpl
1449177995.461945;m3-7;instance table:  [X]
1449177995.462053;m3-7;parent table:    [X]     [ ]     [ ]
1449177995.462144;m3-7;
1449177995.462787;m3-7;instance [1 | mop: 2 | ocp: 0 | mhri: 256 | mri 0]
1449177995.464708;m3-7; dodag [2001:db8::1 | R: 512 | OP: Router | CL: 0s | TR(I=[8,20], k=10, c=0, TC=lus, TI=lus)]
1449177995.466627;m3-7;         parent [addr: fe80::3432:4833:46de:9f16 | rank: 256 | lifetime: 109s]
</pre>
<pre>m3-8;rpl
1449177998.722267;m3-8;&gt; rpl
1449177998.722532;m3-8;instance table:  [X]
1449177998.724176;m3-8;parent table:    [X]     [ ]     [ ]
1449177998.724176;m3-8;
1449177998.724176;m3-8;instance [1 | mop: 2 | ocp: 0 | mhri: 256 | mri 0]
1449177998.726506;m3-8; dodag [2001:db8::1 | R: 512 | OP: Router | CL: 0s | TR(I=[8,20], k=10, c=0, TC=lus, TI=lus)]
1449177998.727195;m3-8;         parent [addr: fe80::3432:4833:46de:9f16 | rank: 256 | lifetime: 106s]
</pre>
<p>We see that these nodes are part of a dodag with a rank of 512 and having a parent with IPv6 address <em>fe80::3432:4833:46de:9f16</em>, which is the root node.</li>
<li>For the root node:
<pre>m3-6;rpl
1449178290.113545;m3-6;&gt; rpl
1449178290.114897;m3-6;instance table:  [X]
1449178290.115005;m3-6;parent table:    [ ]     [ ]     [ ]
1449178290.115095;m3-6;
1449178290.117920;m3-6;instance [1 | mop: 2 | ocp: 0 | mhri: 256 | mri 0]
1449178290.118965;m3-6; dodag [2001:db8::1 | R: 256 | OP: Router | CL: 0s | TR(I=[8,20], k=10, c=2, TC=lus, TI=lus)]
</pre>
<p>As expected, the root node has no parent, because it is the root of the dodag.</li>
<li>Show the forwarding table of the root node:
<pre>m3-6;nib route
1449178347.494238;m3-6;&gt; nib route
1449178347.497593;m3-6;Destination                             Flags        Next Hop                                Flags      Expires          Interface
1449178347.499694;m3-6;2001:db8::3432:4833:46d4:9f22           0x00000000 H fe80::3432:4833:46d4:9f22               0x00000001 117.3989637
1449178347.502168;m3-6;2001:db8::3432:4833:46d8:9f06           0x00000000 H fe80::3432:4833:46d4:9f22               0x00000001 117.3989957
</pre>
</li>
<li>More information regarding RIOT-OS and RPL can be found <a href="https://github.com/RIOT-OS/RIOT/wiki/Tutorial%3A-RIOT-and-Multi-Hop-Routing-with-RPL">in the RIOT-OS wiki</a></li>
</ol>
<p>&nbsp;</p>
</div>	</div><!-- .entry-content -->
	
</article><!-- #post-4083 -->


			
		</main><!-- #main -->
		
	</div><!-- #primary -->

	</div><!-- #content -->
	
</div><!-- #page -->

<footer class="site-footer" id="colophon" role="contentinfo">
	
	<div class="container">
		<div class="row">

			<div class="bottom-navigation col-sm-6 col-sm-push-6">
							</div><!-- .bottom-navigation -->
                </div><!-- .row -->

		<div class="row">
			<div class="footer-text col-sm-9">
				<a href="../../what-is-iot-lab/index.html">WHAT IS IOT-LAB?</a> <a href="../../about-us/index.html">ABOUT US</a> <a href="mailto:admin@iot-lab.info">CONTACT US</a> <a href="https://github.com/iot-lab/iot-lab/issues" target="_blank">SUPPORT</a> -<a href="https://github.com/iot-lab">GitHub</a>/<a href="https://twitter.com/FIT_IoTLAB">Twitter</a>/<a href="https://www.youtube.com/channel/UCrWBoYgLJCkMWgaJF8Hh3Og">Youtube</a>-   Copyright © FIT IoT-LAB			</div><!-- .footer-text -->
			<div class="col-sm-3">
				<a href="http://fit-equipex.fr/"><img class="fit-logo center-block" src="../../wp-content/themes/alienship-1.2.5-child/templates/parts/fit-white.svg"></a>
			</div>

		</div><!-- .row -->
	</div><!-- .container -->

	</footer><!-- #colophon -->
      <script type="text/javascript">
		
          var pfHeaderImgUrl = '';
          var pfHeaderTagline = '';
          var pfdisableClickToDel = '0';
          var pfHideImages = '0';
          var pfImageDisplayStyle = 'right';
          var pfDisableEmail = '0';
          var pfDisablePDF = '0';
          var pfDisablePrint = '0';
          var pfCustomCSS = '';
		  (function() {
            var e = document.createElement('script'); e.type="text/javascript";
		    if('https:' == document.location.protocol) {
			  js='https://pf-cdn.printfriendly.com/ssl/main.js';
		    }
		    else{
			  js='http://cdn.printfriendly.com/printfriendly.js';
		    }
            e.src = js;
            document.getElementsByTagName('head')[0].appendChild(e);
	  	  })();
      </script>
<script type='text/javascript'>
/* <![CDATA[ */
var tocplus = {"smooth_scroll":"1","visibility_show":"show","visibility_hide":"hide","width":"Auto"};
/* ]]> */
</script>
<script type='text/javascript' src='../../wp-content/plugins/table-of-contents-plus/front6149.js?ver=1404'></script>
<script type='text/javascript' src='../../wp-content/themes/alienship-1.2.5/js/bootstrap.minb12b.js?ver=3.1.1'></script>
<script type='text/javascript' src='../../wp-content/themes/alienship-1.2.5/js/alienship-helper8a54.js?ver=1.0.0'></script>

</body>

<!-- Mirrored from www.iot-lab.info/tutorials/riot-rpl-m3/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Jun 2020 08:21:31 GMT -->
</html>