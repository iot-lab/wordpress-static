(function(e){function t(t){for(var a,i,o=t[0],c=t[1],l=t[2],d=0,p=[];d<o.length;d++)i=o[d],n[i]&&p.push(n[i][0]),n[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,o=1;o<r.length;o++){var c=r[o];0!==n[c]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var a={},n={app:0},s=[];function i(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/testbed/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"00ed":function(e,t,r){},"034f":function(e,t,r){"use strict";var a=r("c21b"),n=r.n(a);n.a},"03a7":function(e,t,r){"use strict";var a=r("5740"),n=r.n(a);n.a},"04bb":function(e,t,r){},"1a8d":function(e,t,r){"use strict";var a=r("e9c5"),n=r.n(a);n.a},"1bc2":function(e,t,r){},"1e1b":function(e,t,r){"use strict";var a=r("d807"),n=r.n(a);n.a},"1fe3":function(e,t,r){"use strict";var a=r("ac0f"),n=r.n(a);n.a},"215e":function(e,t,r){"use strict";var a=r("8cbb"),n=r.n(a);n.a},"245b":function(e,t,r){},"29fe":function(e,t,r){"use strict";var a=r("c793"),n=r.n(a);n.a},"34c6":function(e,t,r){},"3ab4":function(e,t,r){e.exports=r.p+"img/disc-iotlab.5bdbd373.svg"},"3af0":function(e,t,r){"use strict";var a=r("1bc2"),n=r.n(a);n.a},"3fc5":function(e,t,r){},4678:function(e,t,r){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=s(e);return r(t)}function s(e){var t=a[e];if(!(t+1)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return t}n.keys=function(){return Object.keys(a)},n.resolve=s,e.exports=n,n.id="4678"},"4e88":function(e,t,r){"use strict";var a=r("7b0d"),n=r.n(a);n.a},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("097d"),r("4989"),r("ab8b"),r("1f54"),r("34c6");var a=r("2b0e"),n=r("7bb1"),s=r("ee98"),i=r.n(s),o=r("589d"),c=r.n(o),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("wordpress-navbar"),e.auth.loggedIn?r("nav",{staticClass:"navbar navbar-expand-md navbar-light bg-light"},[r("div",{staticClass:"container"},[e._m(0),r("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[r("ul",{staticClass:"navbar-nav mr-auto"},[r("router-link",{attrs:{tag:"li",to:{name:"dashboard"},"active-class":"active"}},[r("a",{staticClass:"nav-link"},[r("i",{staticClass:"fa fa-fw fa-flask",attrs:{"aria-hidden":"true"}}),e._v(" My Experiments")])]),r("router-link",{attrs:{tag:"li",to:{name:"experiment"},"active-class":"active"}},[r("a",{staticClass:"nav-link"},[r("i",{staticClass:"fa fa-fw fa-plus",attrs:{"aria-hidden":"true"}}),e._v(" New Experiment")])]),r("router-link",{attrs:{tag:"li",to:{name:"resources"},"active-class":"active"}},[r("a",{staticClass:"nav-link"},[r("i",{staticClass:"fa fa-fw fa-folder-open",attrs:{"aria-hidden":"true"}}),e._v(" My Resources")])]),r("router-link",{attrs:{tag:"li",to:{name:"status"},"active-class":"active"}},[r("a",{staticClass:"nav-link"},[r("i",{staticClass:"fa fa-fw fa-tasks",attrs:{"aria-hidden":"true"}}),e._v(" Testbed Status")])])],1),r("ul",{staticClass:"nav navbar-nav float-xs-right"},[e.auth.isAdmin?r("router-link",{attrs:{tag:"li",to:{name:"allExperiments"},"active-class":"active"}},[r("a",{directives:[{name:"tooltip",rawName:"v-tooltip:bottom",value:"All Experiments",expression:"'All Experiments'",arg:"bottom"}],staticClass:"nav-link"},[r("i",{staticClass:"fa fa-lg fa-fw fa-flask",attrs:{"aria-label":"All experiments"}})])]):e._e(),e.auth.isAdmin?r("router-link",{attrs:{tag:"li",to:{name:"users"},"active-class":"active"}},[r("a",{directives:[{name:"tooltip",rawName:"v-tooltip:bottom",value:"Manage Users",expression:"'Manage Users'",arg:"bottom"}],staticClass:"nav-link"},[r("i",{staticClass:"fa fa-lg fa-fw fa-users",attrs:{"aria-label":"Users"}})])]):e._e(),e.auth.loggedIn?r("router-link",{attrs:{tag:"li",to:{name:"account"},"active-class":"active"}},[r("a",{directives:[{name:"tooltip",rawName:"v-tooltip:bottom.html",value:"Account <b>"+e.auth.username+"</b>",expression:"`Account <b>${auth.username}</b>`",arg:"bottom",modifiers:{html:!0}}],staticClass:"nav-link"},[r("i",{staticClass:"fa fa-lg fa-fw fa-user",attrs:{"aria-label":"Account"}})])]):e._e(),r("li",[r("a",{directives:[{name:"tooltip",rawName:"v-tooltip:bottom",value:"Log out",expression:"'Log out'",arg:"bottom"}],staticClass:"nav-link",attrs:{href:""},on:{click:e.logout}},[r("i",{staticClass:"fa fa-lg fa-fw fa-sign-out",attrs:{"aria-label":"Logout"}})])])],1)])])]):e._e(),r("notifications",{staticStyle:{margin:"10px"},attrs:{position:"top right",duration:3e3,"animation-type":"velocity"},scopedSlots:e._u([{key:"body",fn:function(t){return[r("div",{staticClass:"alert text-light border-0",class:["bg-"+("error"===t.item.type?"danger":t.item.type)],on:{click:t.close}},[r("button",{staticClass:"close",staticStyle:{"font-weight":"normal","font-size":"1.3rem","text-shadow":"none"},attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"}},[r("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),t.item.title?r("h6",{staticClass:"alert-heading",domProps:{innerHTML:e._s(t.item.title)}}):e._e(),r("div",{staticStyle:{"line-height":"1.3"},domProps:{innerHTML:e._s(t.item.text)}})])]}}])}),r("notifications",{staticStyle:{"margin-top":"6px"},attrs:{group:"alt",position:"top center",duration:-1,"animation-type":"css"},scopedSlots:e._u([{key:"body",fn:function(t){return[r("div",{staticClass:"alert alert-secondary text-center"},[t.item.title?r("h6",{staticClass:"alert-heading",domProps:{innerHTML:e._s(t.item.title)}}):e._e(),r("div",{staticStyle:{"line-height":"1.3"},domProps:{innerHTML:e._s(t.item.text)}})])]}}])}),r("notifications",{staticStyle:{width:"100%"},attrs:{group:"popup",position:"top left",duration:-1,"animation-type":"css"},scopedSlots:e._u([{key:"body",fn:function(t){return[r("div",{staticClass:"alert-popup"},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-body"},[r("h3",{staticClass:"card-title"},[e._v("We care about knowing our users")]),r("p",{staticClass:"card-text"},[e._v("Please take a minute to fill your profile with your "),r("i",[r("b",[e._v("user category")])]),e._v(" (student, academic, startup, industrial...)")]),r("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"account",query:{validate:null}}},nativeOn:{click:function(e){return t.close(e)}}},[e._v("Go to my profile")]),r("a",{staticClass:"btn btn-link",attrs:{href:"#"},on:{click:t.close}},[e._v("Later")])],1)])])]}}])}),r("keep-alive",{attrs:{include:"NewExperiment,AdminUsers,Dashboard"}},[r("router-view")],1)],1)},u=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[r("span",{staticClass:"navbar-toggler-icon"})])}],d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("header",{staticClass:"navbar navbar-light bg-white navbar-onelab navbar-expand-md",attrs:{role:"banner"}},[r("div",{staticClass:"container"},[e._m(0),e._m(1),r("nav",{staticClass:"navbar-collapse collapse navbar-ex1-collapse",attrs:{role:"navigation"}},[r("div",{domProps:{innerHTML:e._s(e.topmenu)}}),r("ul",{staticClass:"nav navbar-nav ml-auto"},[r("li",{staticClass:"nav-item",class:{active:"drawgantt"===e.$route.name}},[r("router-link",{staticClass:"nav-link",attrs:{to:{name:"drawgantt"},title:"Testbed Activity"}},[r("i",{staticClass:"fa fa-fw fa-calendar"}),e._v(" Activity")])],1),r("li",{staticClass:"nav-item",class:{active:"drawgantt"!==e.$route.name}},[r("router-link",{staticClass:"nav-link",attrs:{to:{name:"dashboard"},title:"Testbed"}},[r("i",{staticClass:"fa fa-wrench"}),e._v(" Testbed")])],1)])])])])},p=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":".navbar-ex1-collapse"}},[r("span",{staticClass:"sr-only"},[e._v("Toggle navigation")]),e._v(" ☰\n    ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{attrs:{href:"/"}},[a("img",{attrs:{src:r("b76f")}})])}],m=(r("7514"),r("97d3")),f=r.n(m),h=(r("55dd"),r("28a5"),r("a481"),r("f59f")),v=r.n(h),g=function(e){return new Promise(function(t){return setTimeout(t,e)})},b=function(e){return e.replace(/\b\w/g,function(e){return e.toUpperCase()})},w=function(e,t){return"".concat(e," ").concat(e>1?t+"s":t)},y=function(e){var t,r;e=e.split("+"),t=[];for(var a=0;a<e.length;a++)if(r=e[a].split("-"),2===r.length)for(var n=parseInt(r[0]);n<parseInt(r[1])+1;n++)t.push(n);else t.push(parseInt(e[a]));for(t.sort(function(e,t){return e-t}),a=1;a<t.length;a++)t[a]===t[a-1]&&t.splice(a--,1);return t},_=function(e,t){return e.reduce(function(e,r){return(e[r[t]]=e[r[t]]||[]).push(r),e},{})},x=function(e,t,r){return e.split(t).join(r)},C=function(e,t){var r="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),a=document.createElement("a");a.setAttribute("href",r),a.setAttribute("download",t+".json"),document.body.appendChild(a),a.click(),a.remove()},k=function(e,t,r){var a="data:text/csv;charset=utf-8,"+encodeURIComponent(v.a.parse(e,r)),n=document.createElement("a");n.setAttribute("href",a),n.setAttribute("download",t+".csv"),document.body.appendChild(n),n.click(),n.remove()},S=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/octet-stream",a=new Blob([t],{type:r}),n=document.createElement("a");n.href=window.URL.createObjectURL(a),n.download=e,document.body.appendChild(n),n.click(),n.remove()},A=function(e){var t=N($(j(R(e),8*e.length)));return t.toLowerCase()};function N(e){for(var t,r="0123456789ABCDEF",a="",n=0;n<e.length;n++)t=e.charCodeAt(n),a+=r.charAt(t>>>4&15)+r.charAt(15&t);return a}function R(e){for(var t=Array(e.length>>2),r=0;r<t.length;r++)t[r]=0;for(r=0;r<8*e.length;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<r%32;return t}function $(e){for(var t="",r=0;r<32*e.length;r+=8)t+=String.fromCharCode(e[r>>5]>>>r%32&255);return t}function j(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var r=1732584193,a=-271733879,n=-1732584194,s=271733878,i=0;i<e.length;i+=16){var o=r,c=a,l=n,u=s;a=M(a=M(a=M(a=M(a=O(a=O(a=O(a=O(a=P(a=P(a=P(a=P(a=F(a=F(a=F(a=F(a,n=F(n,s=F(s,r=F(r,a,n,s,e[i+0],7,-680876936),a,n,e[i+1],12,-389564586),r,a,e[i+2],17,606105819),s,r,e[i+3],22,-1044525330),n=F(n,s=F(s,r=F(r,a,n,s,e[i+4],7,-176418897),a,n,e[i+5],12,1200080426),r,a,e[i+6],17,-1473231341),s,r,e[i+7],22,-45705983),n=F(n,s=F(s,r=F(r,a,n,s,e[i+8],7,1770035416),a,n,e[i+9],12,-1958414417),r,a,e[i+10],17,-42063),s,r,e[i+11],22,-1990404162),n=F(n,s=F(s,r=F(r,a,n,s,e[i+12],7,1804603682),a,n,e[i+13],12,-40341101),r,a,e[i+14],17,-1502002290),s,r,e[i+15],22,1236535329),n=P(n,s=P(s,r=P(r,a,n,s,e[i+1],5,-165796510),a,n,e[i+6],9,-1069501632),r,a,e[i+11],14,643717713),s,r,e[i+0],20,-373897302),n=P(n,s=P(s,r=P(r,a,n,s,e[i+5],5,-701558691),a,n,e[i+10],9,38016083),r,a,e[i+15],14,-660478335),s,r,e[i+4],20,-405537848),n=P(n,s=P(s,r=P(r,a,n,s,e[i+9],5,568446438),a,n,e[i+14],9,-1019803690),r,a,e[i+3],14,-187363961),s,r,e[i+8],20,1163531501),n=P(n,s=P(s,r=P(r,a,n,s,e[i+13],5,-1444681467),a,n,e[i+2],9,-51403784),r,a,e[i+7],14,1735328473),s,r,e[i+12],20,-1926607734),n=O(n,s=O(s,r=O(r,a,n,s,e[i+5],4,-378558),a,n,e[i+8],11,-2022574463),r,a,e[i+11],16,1839030562),s,r,e[i+14],23,-35309556),n=O(n,s=O(s,r=O(r,a,n,s,e[i+1],4,-1530992060),a,n,e[i+4],11,1272893353),r,a,e[i+7],16,-155497632),s,r,e[i+10],23,-1094730640),n=O(n,s=O(s,r=O(r,a,n,s,e[i+13],4,681279174),a,n,e[i+0],11,-358537222),r,a,e[i+3],16,-722521979),s,r,e[i+6],23,76029189),n=O(n,s=O(s,r=O(r,a,n,s,e[i+9],4,-640364487),a,n,e[i+12],11,-421815835),r,a,e[i+15],16,530742520),s,r,e[i+2],23,-995338651),n=M(n,s=M(s,r=M(r,a,n,s,e[i+0],6,-198630844),a,n,e[i+7],10,1126891415),r,a,e[i+14],15,-1416354905),s,r,e[i+5],21,-57434055),n=M(n,s=M(s,r=M(r,a,n,s,e[i+12],6,1700485571),a,n,e[i+3],10,-1894986606),r,a,e[i+10],15,-1051523),s,r,e[i+1],21,-2054922799),n=M(n,s=M(s,r=M(r,a,n,s,e[i+8],6,1873313359),a,n,e[i+15],10,-30611744),r,a,e[i+6],15,-1560198380),s,r,e[i+13],21,1309151649),n=M(n,s=M(s,r=M(r,a,n,s,e[i+4],6,-145523070),a,n,e[i+11],10,-1120210379),r,a,e[i+2],15,718787259),s,r,e[i+9],21,-343485551),r=D(r,o),a=D(a,c),n=D(n,l),s=D(s,u)}return Array(r,a,n,s)}function E(e,t,r,a,n,s){return D(T(D(D(t,e),D(a,s)),n),r)}function F(e,t,r,a,n,s,i){return E(t&r|~t&a,e,t,n,s,i)}function P(e,t,r,a,n,s,i){return E(t&a|r&~a,e,t,n,s,i)}function O(e,t,r,a,n,s,i){return E(t^r^a,e,t,n,s,i)}function M(e,t,r,a,n,s,i){return E(r^(t|~a),e,t,n,s,i)}function D(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function T(e,t){return e<<t|e>>>32-t}var U=r("1157"),I=r.n(U);function z(e){e=x(e,'href="https://www.iot-lab.info','href="'),e=x(e,'href="https://devwww.iot-lab.info','href="');var t=I()("<div>",{html:e});return t.find("ul.nav > li > a").addClass("nav-link"),t.find('a[data-toggle="dropdown"]').addClass("dropdown-toggle"),t.find("span.caret").remove(),t.html()}var B={name:"WordpressNavbar",data:function(){return{topmenu:z(f.a)}},mounted:function(){I()("body").on("mouseenter mouseleave",".navbar-onelab .dropdown",function(e){I()(".navbar-onelab .dropdown").removeClass("show"),I()(".navbar-onelab .dropdown-menu").removeClass("show");var t=I()(e.target).closest(".dropdown"),r=I()(".dropdown-menu",t);t.addClass("show"),r.addClass("show"),setTimeout(function(){t[t.is(":hover")?"addClass":"removeClass"]("show"),r[t.is(":hover")?"addClass":"removeClass"]("show")},200)})}},L=B,G=(r("1e1b"),r("2877")),q=Object(G["a"])(L,d,p,!1,null,null,null);q.options.__file="WordpressNavbar.vue";var H=q.exports,W=(r("6762"),r("2fdb"),r("96cf"),r("3040")),Y=(r("ac4d"),r("8a81"),r("ac6a"),r("7f7f"),r("386d"),r("bc3a")),K=r.n(Y),V="https://".concat("www.iot-lab.info","/api/"),J={api:K.a.create({baseURL:V,auth:JSON.parse(localStorage.getItem("apiAuth")||"{}")}),create:function(e,t){this.api=K.a.create({baseURL:V,auth:{username:e,password:t}})},signup:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=5;break}return e.next=3,J.api.post("/users?nbusers=".concat(r),t);case 3:e.next=7;break;case 5:return e.next=7,J.api.post("/users",t);case 7:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),activateAccount:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,J.api.post("/users/activate/",{hash:t});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),deleteUser:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){var t,r=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:void 0,!t){e.next=6;break}return e.next=4,J.api.delete("/users/".concat(t));case 4:e.next=8;break;case 6:return e.next=8,J.api.delete("/user");case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),resetPassword:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,J.api.post("/users/reset_password",{email:t});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),changePassword:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t,r,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,J.api.put("/user/password",{old_password:t,new_password:r,confirm_new_password:a});case 2:case"end":return e.stop()}},e,this)}));return function(t,r,a){return e.apply(this,arguments)}}(),getSSHkeys:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.get("/user/keys").then(function(e){return e.data.sshkeys}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),modifySSHkeys:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.post("/user/keys",{sshkeys:t}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),deleteSSHkey:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.delete("/user/keys/".concat(t)));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getUsers:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){var t,r,a,n,s,i=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},r=t.status,a=t.group,n=t.search,s={},r&&(s.status=r),a&&(s.group=a),n&&(s.search=n),e.abrupt("return",J.api.get("/users",{params:s}).then(function(e){return e.data}));case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getUserInfo:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){var t,r=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:void 0,!t){e.next=5;break}return e.abrupt("return",J.api.get("/users/".concat(t)).then(function(e){return e.data}));case 5:return e.abrupt("return",J.api.get("/user").then(function(e){return e.data}));case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),setUserInfo:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){var r,a=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=a.length>1&&void 0!==a[1]?a[1]:void 0,!r){e.next=5;break}return e.abrupt("return",J.api.put("/users/".concat(r),t));case 5:return e.abrupt("return",J.api.put("/user",t));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),activateUser:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.put("/users/".concat(t),{status:"active"}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),deactivateUser:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.put("/users/".concat(t),{status:"inactive"}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),setUserGroups:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.put("/users/".concat(t),{groups:r}));case 1:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),sendMail:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t,r,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,J.api.post("/users/email",{recipients:t,subject:r,body:a});case 2:case"end":return e.stop()}},e,this)}));return function(t,r,a){return e.apply(this,arguments)}}(),getUserExperimentsCount:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.get("/experiments/total").then(function(e){return e.data}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getAllExperimentsCount:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.abrupt("return",J.api.get("/experiments/total/users/".concat(t)).then(function(e){return e.data}));case 4:return e.abrupt("return",J.api.get("/experiments/total/all").then(function(e){return e.data}));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getAllExperiments:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){var t,r,a,n,s,i,o,c=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},r=t.limit,a=t.offset,n=t.user,s=t.state,i=void 0===s?"Terminated,Error,Running,Finishing,Resuming,toError,Waiting,Launching,Hold,toLaunch,toAckReservation,Suspended":s,o={},i&&(o.state=i),r&&(o.limit=Math.min(r,500)),a&&(o.offset=a),"@self"!==n){e.next=9;break}return e.abrupt("return",J.api.get("/experiments",{params:o}).then(function(e){return e.data.items}));case 9:if(!n){e.next=13;break}return e.abrupt("return",J.api.get("/experiments/users/".concat(n),{params:o}).then(function(e){return e.data.items}));case 13:return e.abrupt("return",J.api.get("/experiments/all",{params:o}).then(function(e){return e.data.items}));case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getRunningExperiments:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.get("/experiments/running").then(function(e){return e.data.items}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getExperiment:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.get("/experiments/".concat(t)).then(function(e){return e.data}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getExperimentArchive:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.get("/experiments/".concat(t,"/data"),{responseType:"arraybuffer"}).then(function(e){return e.data}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getExperimentDeployment:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.get("/experiments/".concat(t,"/deployment")).then(function(e){return e.data}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),stopExperiment:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.delete("/experiments/".concat(t)));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),submitExperiment:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){var t,r,a,n,s,i,o,c,l,u,d,p,m,f,h,v,g,b=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:for(t=b.length>0&&void 0!==b[0]?b[0]:{},r=t.type,a=t.name,n=t.duration,s=t.reservation,i=t.nodes,o=t.firmwareassociations,c=t.firmwares,l=t.profileassociations,t.profiles,u=new FormData,u.append("experiment.json",JSON.stringify({type:r,duration:n,reservation:s,name:a,nodes:i,firmwareassociations:o,profileassociations:l})),d=[],p=!0,m=!1,f=void 0,e.prev=7,h=(o||[])[Symbol.iterator]();!(p=(v=h.next()).done);p=!0)g=v.value,g.firmwarename in c&&!d.includes(g.firmwarename)&&(u.append(g.firmwarename,new Blob([c[g.firmwarename]],{type:"application/octet-stream"}),g.firmwarename),d.push(g.firmwarename));e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](7),m=!0,f=e.t0;case 15:e.prev=15,e.prev=16,p||null==h.return||h.return();case 18:if(e.prev=18,!m){e.next=21;break}throw f;case 21:return e.finish(18);case 22:return e.finish(15);case 23:return e.abrupt("return",J.api.post("/experiments",u).then(function(e){return e.data}));case 24:case"end":return e.stop()}},e,this,[[7,11,15,23],[16,,18,22]])}));return function(){return e.apply(this,arguments)}}(),checkFirmware:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=new FormData,r.append("firmware.bin",t),e.abrupt("return",J.api.post("/firmwares/checker",r).then(function(e){return e.data}));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),flashFirmware:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t,r,a){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=new FormData,n.append("experiment".concat(t,".json"),JSON.stringify(r)),n.append("firmware.bin",new Blob([a],{type:"application/octet-stream"}),"firmware.bin"),e.abrupt("return",J.api.post("/experiments/".concat(t,"/nodes/flash"),n).then(function(e){return e.data}));case 4:case"end":return e.stop()}},e,this)}));return function(t,r,a){return e.apply(this,arguments)}}(),flashBinaryFirmware:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t,r,a,n){var s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=new FormData,i={},i.nodes=r,i.offset=n,s.append("experiment".concat(t,".json"),JSON.stringify(i)),s.append("firmware.bin",new Blob([a],{type:"application/octet-stream"}),"firmware.bin"),e.abrupt("return",J.api.post("/experiments/".concat(t,"/nodes/flash/binary"),s).then(function(e){return e.data}));case 7:case"end":return e.stop()}},e,this)}));return function(t,r,a,n){return e.apply(this,arguments)}}(),flashResourcesFirmware:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t,r,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.post("/experiments/".concat(t,"/nodes/flash/").concat(a),r).then(function(e){return e.data}));case 1:case"end":return e.stop()}},e,this)}));return function(t,r,a){return e.apply(this,arguments)}}(),updateMonitoring:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t,r,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.post("/experiments/".concat(t,"/nodes/monitoring/").concat(a),r).then(function(e){return e.data}));case 1:case"end":return e.stop()}},e,this)}));return function(t,r,a){return e.apply(this,arguments)}}(),reloadExperiment:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.post("/experiments/".concat(t,"/reload"),{}).then(function(e){return e.data}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getUserGroups:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.get("/groups").then(function(e){return e.data}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),createGroup:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.post("/groups",{name:t}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),deleteGroup:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.delete("/groups/".concat(t)));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getSites:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.get("/sites").then(function(e){return e.data.items}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getSitesDetails:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.get("/sites/details").then(function(e){return e.data.items}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getNodes:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.get("/nodes").then(function(e){return e.data.items}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),updateNodesProperties:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.put("/nodes"));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),updateNodesPropertiesOldApi:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t="https://".concat("www.iot-lab.info","/rest/"),r=K.a.create({baseURL:t,auth:JSON.parse(localStorage.getItem("apiAuth")||"{}")}),e.abrupt("return",r.post("/admin/nodes"));case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getNodesIds:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.get("/nodes/ids").then(function(e){return e.data.items}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getExperimentNodes:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.get("/experiments/".concat(t,"/nodes")).then(function(e){return e.data.items}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getExperimentToken:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.get("/experiments/".concat(t,"/token")).then(function(e){return e.data.token}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),sendNodesCommand:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t,r,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.post("/experiments/".concat(t,"/nodes/").concat(r),a).then(function(e){return e.data}));case 1:case"end":return e.stop()}},e,this)}));return function(t,r,a){return e.apply(this,arguments)}}(),getMonitoringProfiles:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.get("/monitoring").then(function(e){return e.data}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getMonitoringProfile:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.get("/monitoring/".concat(t)).then(function(e){return e.data}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),updateMonitoringProfile:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.put("/monitoring/".concat(t),r));case 1:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),createMonitoringProfile:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.post("/monitoring",t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),deleteMonitoringProfile:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.delete("/monitoring/".concat(t)));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getFirmwares:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.get("/firmwares").then(function(e){return e.data}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getFirmware:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.get("/firmwares/".concat(t)).then(function(e){return e.data}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getFirmwareFile:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.get("/firmwares/".concat(t,"/file"),{responseType:"arraybuffer"}).then(function(e){return e.data}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),updateFirmware:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t,r,a){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=new FormData,n.append("firmware.json",JSON.stringify(r)),a&&n.append("firmware.bin",new Blob([a],{type:"application/octet-stream"}),"firmware.bin"),e.abrupt("return",J.api.put("/firmwares/".concat(t),n).then(function(e){return e.data}));case 4:case"end":return e.stop()}},e,this)}));return function(t,r,a){return e.apply(this,arguments)}}(),createFirmware:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t,r){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=new FormData,a.append("firmware.json",JSON.stringify(t)),a.append("firmware.bin",new Blob([r],{type:"application/octet-stream"}),"firmware.bin"),e.abrupt("return",J.api.post("/firmwares",a).then(function(e){return e.data}));case 4:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),deleteFirmware:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",J.api.delete("/firmwares/".concat(t)));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},Z={loggedIn:"true"===localStorage.getItem("loggedIn"),isAdmin:"true"===localStorage.getItem("isAdmin"),username:localStorage.getItem("username")||"",doLogin:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t,r){var a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return J.create(t,r),e.next=3,J.getUserInfo().then(function(e){a.loggedIn=!0,a.username=e.login,a.isAdmin=e.groups.includes("admin"),localStorage.setItem("loggedIn",a.loggedIn),localStorage.setItem("isAdmin",a.isAdmin),localStorage.setItem("username",a.username),localStorage.setItem("apiAuth",JSON.stringify({username:a.username,password:r}))}).catch(function(e){throw a.isAdmin=!1,a.loggedIn=!1,a.username="",e});case 3:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),doLogout:function(){this.loggedIn=!1,localStorage.removeItem("loggedIn"),localStorage.removeItem("apiAuth"),localStorage.removeItem("isAdmin"),localStorage.removeItem("username")}},X={name:"app",components:{WordpressNavbar:H},data:function(){return{auth:Z}},methods:{logout:function(e){Z.doLogout()}}},Q=X,ee=(r("034f"),Object(G["a"])(Q,l,u,!1,null,null,null));ee.options.__file="App.vue";var te=ee.exports,re=r("8c4f"),ae=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},ne=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container mt-3"},[r("h1",[e._v("404 "),r("span",{staticClass:"text-muted"},[e._v("Not found")])])])}],se={},ie=Object(G["a"])(se,ae,ne,!1,null,null,null);ie.options.__file="404.vue";var oe=ie.exports,ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container mt-4 text-center"},[e._m(0),"devwww.iot-lab.info"===e.hostname?r("div",{staticClass:"card border-danger my-2 mx-auto d-inline-block text-left"},[e._m(1)]):e._e(),r("div",{staticClass:"login-box mx-auto",class:{error:e.failed}},[r("h2",{staticStyle:{"font-size":"1.75rem"}},[e._v("Welcome to FIT IoT-LAB")]),r("form",{staticClass:"mx-auto",on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"form-control",class:{"is-invalid":e.failed},attrs:{type:"text",placeholder:"Username",autofocus:"",required:""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",class:{"is-invalid":e.failed},attrs:{type:"password",placeholder:"Password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),r("div",{staticClass:"invalid-feedback mb-2"},[e._v("Invalid username or password")]),r("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"submit"}},[e._v("Log in")]),r("router-link",{staticClass:"btn btn-outline-success btn-block",attrs:{to:{name:"signup"}}},[e._v("Register for an account")]),r("p",{staticClass:"text-center"},[r("router-link",{staticClass:"btn btn-block",attrs:{to:{name:"reset"}}},[e._v("Forgot your password?")])],1)],1)])])},le=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mb-2 mx-auto",attrs:{id:"logo"}},[a("img",{attrs:{src:r("3ab4")}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card-body text-danger"},[e._v("\n      Development site for "),r("b",[e._v("internal purpose only")]),e._v("."),r("br"),e._v("\n      Go to "),r("a",{staticClass:"text-danger alert-link",attrs:{href:"https://www.iot-lab.info/testbed"}},[e._v("www.iot-lab.info")]),e._v(" for FIT IoT-LAB public site.\n    ")])}],ue={name:"login",data:function(){return{username:"",password:"",failed:!1,hostname:location.hostname}},methods:{login:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.failed=!1,e.next=4,Z.doLogin(this.username,this.password);case 4:this.$router.push(this.$route.query.next||"dashboard"),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.failed=!0;case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()}},de=ue,pe=(r("6fce"),Object(G["a"])(de,ce,le,!1,null,"fcbcc13e",null));pe.options.__file="Login.vue";var me=pe.exports,fe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container mt-5"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-lg-4 mx-md-auto well"},[r("h2",[e._v("Reset your password")]),r("form",{on:{submit:function(t){return t.preventDefault(),e.reset(t)}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",placeholder:"Email",autofocus:"",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),r("button",{staticClass:"btn btn-primary btn-block"},[e._v("Reset password")])]),r("p",{staticClass:"text-center"},[r("router-link",{attrs:{to:{name:"signup"}}},[e._v("Register for an account")]),e._v(" –\n                "),r("router-link",{attrs:{to:{name:"login"}}},[e._v("Login")])],1)])])])},he=[],ve={name:"reset",data:function(){return{email:""}},methods:{reset:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,J.resetPassword(this.email);case 2:this.$notify({text:"An email has been sent to "+this.email,type:"success"});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},ge=ve,be=(r("58c9"),Object(G["a"])(ge,fe,he,!1,null,"408a57f7",null));be.options.__file="ResetPassword.vue";var we=be.exports,ye=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container mt-3"},[r("div",{staticClass:"row justify-content-center"},[r("div",{staticClass:"col-lg-8"},[r("h2",[e._v("Sign up to FIT IoT-LAB")]),"devwww.iot-lab.info"===e.hostname?r("div",{staticClass:"card border-danger bg-danger my-2 mx-auto"},[e._m(0)]):e._e(),e.success?r("div",{staticClass:"card border-success my-5"},[r("div",{staticClass:"card-header bg-success text-white"},[r("i",{staticClass:"fa fa-check mr-1"}),e._v(" An email has been sent to "),r("i",[e._v(e._s(e.user.email))])]),e._m(1)]):r("form",{staticClass:"mb-5",on:{submit:function(t){return t.preventDefault(),e.signup(t)}}},[r("div",{staticClass:"text-right text-italic text-muted small"},[e._v("\n          * All fields are mandatory\n        ")]),r("user-form",{ref:"user",attrs:{user:e.user,hidden:["groups"]}}),r("div",{staticClass:"form-group"},[r("vue-recaptcha",{ref:"recaptcha",class:!e.captcha.verified&&e.captcha.dirty?"border-danger form-control p-2":"",attrs:{sitekey:e.reCaptchaSitekey},on:{verify:e.onCaptchaVerify,expired:e.onCaptchaExpired}}),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.captcha.verified&&e.captcha.dirty,expression:"!captcha.verified && captcha.dirty"}],staticClass:"invalid-feedback mb-3",class:{"d-block":!e.captcha.verified&&e.captcha.dirty}},[e._v("\n            Please verify the captcha.\n          ")])],1),r("div",{staticClass:"form-check"},[r("label",{staticClass:"custom-control custom-checkbox"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.charter,expression:"charter"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"custom-control-input",class:{"is-invalid":e.errors.has("charter")},attrs:{name:"charter",type:"checkbox"},domProps:{checked:Array.isArray(e.charter)?e._i(e.charter,null)>-1:e.charter},on:{change:function(t){var r=e.charter,a=t.target,n=!!a.checked;if(Array.isArray(r)){var s=null,i=e._i(r,s);a.checked?i<0&&(e.charter=r.concat([s])):i>-1&&(e.charter=r.slice(0,i).concat(r.slice(i+1)))}else e.charter=n}}}),r("span",{staticClass:"custom-control-indicator"}),r("span",{staticClass:"custom-control-description"},[e._v("\n              I read and I accept "),r("a",{class:{"text-danger":e.errors.has("charter")},attrs:{href:"/charter/",target:"_blank"}},[e._v("IoT-LAB Terms of Service")]),e._v(".\n            ")])]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("charter"),expression:"errors.has('charter')"}],staticClass:"invalid-feedback mb-3",class:{"d-block":e.errors.has("charter")}},[e._v("\n            You must check the box and accept the terms of service.\n          ")])]),r("div",{staticClass:"form-group"},[r("button",{staticClass:"btn btn-lg btn-primary mr-1",attrs:{type:"submit"}},[e._v("Sign up")]),r("router-link",{staticClass:"btn btn-lg btn-secondary",attrs:{to:{name:"login"}}},[e._v("Login")])],1)],1)])])])},_e=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card-body text-white p-2"},[e._v("\n          Signup on "),r("b",[e._v("devwww")]),e._v(" is restricted to "),r("b",[e._v("administrators")]),e._v(".\n          Users should sign up to "),r("a",{staticClass:"text-white alert-link",attrs:{href:"https://www.iot-lab.info/testbed"}},[e._v("www.iot-lab.info")]),e._v(".\n        ")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card-body text-success"},[r("h5",[e._v("Check your inbox and follow the link to activate your account.")])])}],xe=r("e096"),Ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md"},[e.hidden.includes("firstName")?e._e():r("div",{staticClass:"form-group"},[r("label",{staticClass:"form-control-label"},[e._v("First name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.firstName,expression:"user.firstName"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("firstname")},attrs:{placeholder:"First name",name:"firstname",type:"text"},domProps:{value:e.user.firstName},on:{input:function(t){t.target.composing||e.$set(e.user,"firstName",t.target.value)}}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("firstname"),expression:"errors.has('firstname')"}],staticClass:"invalid-feedback"},[e._v("\n          "+e._s(e.errors.first("firstname"))+"\n        ")])])]),r("div",{staticClass:"col-md"},[e.hidden.includes("lastName")?e._e():r("div",{staticClass:"form-group"},[r("label",{staticClass:"form-control-label"},[e._v("Last name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.lastName,expression:"user.lastName"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("lastname")},attrs:{placeholder:"Last name",name:"lastname",type:"text"},domProps:{value:e.user.lastName},on:{input:function(t){t.target.composing||e.$set(e.user,"lastName",t.target.value)}}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("lastname"),expression:"errors.has('lastname')"}],staticClass:"invalid-feedback"},[e._v("\n          "+e._s(e.errors.first("lastname"))+"\n        ")])])])]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md"},[e.hidden.includes("email")?e._e():r("div",{staticClass:"form-group"},[r("label",{staticClass:"form-control-label"},[e._v("Email")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"},{name:"validate",rawName:"v-validate",value:"required|email|noWebMail",expression:"'required|email|noWebMail'"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("email")},attrs:{name:"email",type:"email",placeholder:"Academic or professional email"},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("email"),expression:"errors.has('email')"}],staticClass:"invalid-feedback",domProps:{innerHTML:e._s(e.errors.first("email"))}})])]),r("div",{staticClass:"col-md"})]),e.hidden.includes("password")?e._e():r("div",{staticClass:"row mb-5"},[r("div",{ref:"passwordGroup",staticClass:"col form-group password"},[r("label",{staticClass:"form-control-label"},[e._v("Password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"adv-tooltip",rawName:"v-adv-tooltip",value:{title:e.passwordPolicy,placement:"auto",trigger:"hover",html:!0,delay:400,container:this.$refs.passwordGroup},expression:"{\n          title: passwordPolicy,\n          placement: 'auto',\n          trigger: 'hover',\n          html: true,\n          delay: 400,\n          container: this.$refs.passwordGroup,\n          }"}],ref:"password",staticClass:"form-control",class:{"is-invalid":e.errors.has("password")},attrs:{placeholder:"Password",name:"password",type:"password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("password"),expression:"errors.has('password')"}],staticClass:"invalid-feedback"},[e._v("\n        "+e._s(e.errors.first("password"))+"\n      ")])]),r("div",{staticClass:"col form-group"},[r("label",{staticClass:"form-control-label"},[e._v("Confirm password")]),r("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|confirmed:password",expression:"'required|confirmed:password'"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("password_confirmation")},attrs:{placeholder:"Password",name:"password_confirmation","data-vv-as":"password",type:"password"}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("password_confirmation"),expression:"errors.has('password_confirmation')"}],staticClass:"invalid-feedback"},[e._v("\n        "+e._s(e.errors.first("password_confirmation"))+"\n      ")])])]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md"},[e.hidden.includes("category")?e._e():r("div",{staticClass:"form-group"},[r("label",{staticClass:"form-control-label"},[e._v("User category")]),r("multiselect",{class:{mymultiselect:!0,invalid:e.dirty.category&&!e.user.category},attrs:{placeholder:"Category",options:Object.keys(e.categories),"allow-empty":!1,searchable:!1,"show-labels":!1,"custom-label":e.userLabel},on:{close:function(t){e.dirty.category=!0}},model:{value:e.user.category,callback:function(t){e.$set(e.user,"category",t)},expression:"user.category"}}),r("div",{staticClass:"invalid-feedback",style:{display:e.dirty.category&&!e.user.category?"block":"none"}},[e._v("\n          The user category field is required.\n        ")])],1)]),r("div",{staticClass:"col-md"},[e.hidden.includes("organization")?e._e():r("div",{staticClass:"form-group"},[r("label",{staticClass:"form-control-label"},[e._v("Organization")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.organization,expression:"user.organization"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("organization")},attrs:{placeholder:"Organization",name:"organization",type:"text"},domProps:{value:e.user.organization},on:{input:function(t){t.target.composing||e.$set(e.user,"organization",t.target.value)}}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("organization"),expression:"errors.has('organization')"}],staticClass:"invalid-feedback"},[e._v("\n          "+e._s(e.errors.first("organization"))+"\n        ")])])])]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md"},[e.hidden.includes("city")?e._e():r("div",{staticClass:"form-group"},[r("label",{staticClass:"form-control-label"},[e._v("City")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.city,expression:"user.city"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("city")},attrs:{placeholder:"City",name:"city",type:"text"},domProps:{value:e.user.city},on:{input:function(t){t.target.composing||e.$set(e.user,"city",t.target.value)}}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("city"),expression:"errors.has('city')"}],staticClass:"invalid-feedback"},[e._v("\n          "+e._s(e.errors.first("city"))+"\n        ")])])]),r("div",{staticClass:"col-md"},[e.hidden.includes("country")?e._e():r("div",{staticClass:"form-group"},[r("label",{staticClass:"form-control-label"},[e._v("Country")]),r("multiselect",{class:{mymultiselect:!0,invalid:e.dirty.country&&!e.user.country},attrs:{placeholder:"Country",options:e.countries},on:{close:function(t){e.dirty.country=!0}},model:{value:e.user.country,callback:function(t){e.$set(e.user,"country",t)},expression:"user.country"}}),r("div",{staticClass:"invalid-feedback",style:{display:e.dirty.country&&!e.user.country?"block":"none"}},[e._v("\n          The country field is required.\n        ")])],1)])]),e.hidden.includes("motivations")?e._e():r("div",{staticClass:"form-group"},[r("label",{staticClass:"form-control-label"},[e._v("Motivations")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.user.motivations,expression:"user.motivations"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("motivations")},attrs:{name:"motivations",rows:"5",placeholder:"Tell us about you"},domProps:{value:e.user.motivations},on:{focus:e.toggleMotivations,blur:e.toggleMotivations,input:function(t){t.target.composing||e.$set(e.user,"motivations",t.target.value)}}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("motivations"),expression:"errors.has('motivations')"}],staticClass:"invalid-feedback"},[e._v("\n      "+e._s(e.errors.first("motivations"))+"\n    ")])]),e._m(0),e.hidden.includes("sshkeys")?e._e():r("div",{staticClass:"form-group"},[r("a",{attrs:{"data-toggle":"collapse",href:".collapse-ssh",role:"button","aria-expanded":"false","aria-controls":"collapseSSH"}},["edit"===e.mode?r("label",{staticClass:"form-control-label"},[r("i",{staticClass:"fa fa-caret-right"}),e._v(" SSH keys\n      ")]):r("label",{staticClass:"form-control-label"},[r("i",{staticClass:"fa fa-caret-right"}),e._v(" add SSH key "),r("span",{staticClass:"text-muted"},[e._v("(optional, can be done later)")])])]),r("ssh-keys",{staticClass:"collapse collapse-ssh",attrs:{keys:e.user.sshkeys}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("motivations"),expression:"errors.has('motivations')"}],staticClass:"invalid-feedback"},[e._v("\n      "+e._s(e.errors.first("motivations"))+"\n    ")])],1),e.hidden.includes("groups")?e._e():r("div",{staticClass:"form-group"},[r("label",{staticClass:"form-control-label"},[e._v("User groups")]),r("multiselect",{class:{mymultiselect:!0},attrs:{placeholder:"Groups",options:e.store.groups?e.store.groups.map(function(e){return e.name}):[],"allow-empty":!0,searchable:!1,multiple:!0,"close-on-select":!1,"hide-selected":!0,"show-labels":!1},scopedSlots:e._u([{key:"tag",fn:function(t){return[r("span",{staticClass:"badge-tag badge",class:"admin"===t.option?"badge-warning":"badge-primary"},[r("span",[e._v(e._s(t.option))]),r("span",{staticClass:"tag-remove cursor ml-1",on:{click:function(e){t.remove(t.option)}}},[e._v("×")])])]}},{key:"option",fn:function(t){return[r("span",{class:"admin"===t.option?"text-warning":""},[r("em",[e._v(e._s(t.option))])])]}}]),model:{value:e.user.groups,callback:function(t){e.$set(e.user,"groups",t)},expression:"user.groups"}})],1)])},ke=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form-group",staticStyle:{display:"none"},attrs:{id:"motivations-help"}},[r("div",{staticClass:"alert alert-info form-control"},[r("i",{staticClass:"fa fa-pencil"}),r("b",[e._v("Tell us about your motivations")]),r("ul",{staticStyle:{margin:"0"}},[r("li",[e._v("Research domain (Radio communication, networking protocol, distributed applications, …)")]),r("li",[e._v("What kind of experiments do you want to run with IoT-LAB?")]),r("li",[e._v("Goal (Verify something existing in large scale, new development, …)")]),r("li",[e._v("Experience with sensor networks (n00b, experiments with X platform, former IoT-LAB user, Guru, God)")])])])])}],Se=r("8e5f"),Ae=r.n(Se),Ne=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("ul",{staticClass:"nav nav-tabs",staticStyle:{position:"relative",top:"1px"}},[e._l(e.keys,function(t,a){return r("li",{staticClass:"nav-item"},[r("a",{staticClass:"nav-link",class:{active:a===e.activeKey},attrs:{href:"#tab_SSH"+a,"data-toggle":"tab"},on:{click:function(t){e.activeKey=a}}},[e._v("\n      SSH key "+e._s(a+1)+"\n      "),r("a",{directives:[{name:"show",rawName:"v-show",value:a===e.activeKey&&e.keys.length>1,expression:"i === activeKey && keys.length > 1"}],on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.delKey(a)}}},[r("i",{staticClass:"fa fa-times-circle"})])])])}),r("li",{staticClass:"nav-item"},[r("a",{staticClass:"nav-link",on:{click:e.addKey}},[r("i",{staticClass:"fa fa-plus"})])])],2),r("div",{staticClass:"tab-content",attrs:{id:"sshkeysTabContent"}},e._l(e.keys,function(t,a){return r("div",{staticClass:"tab-pane",class:{active:a===e.activeKey,show:0===a},attrs:{id:"tab_SSH"+a}},[r("div",{staticClass:"control-group"},[r("div",{staticClass:"controls"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.keys[a],expression:"keys[i]"}],staticClass:"form-control",attrs:{rows:e.rows},domProps:{value:e.keys[a]},on:{input:function(t){t.target.composing||e.$set(e.keys,a,t.target.value)}}})])])])}))])},Re=[],$e=(r("c5f6"),{name:"SshKeys",props:{keys:{type:Array,default:function(){return[""]}},rows:{type:Number,default:4}},data:function(){return{activeKey:0}},watch:{keys:function(e,t){(this.activeKey>=this.keys.length||e[0]!==t[0])&&(this.activeKey=0)}},methods:{addKey:function(){this.keys.push(""),this.activeKey=this.keys.length-1},delKey:function(e){this.keys.splice(e,1),this.activeKey=Math.min(this.activeKey,this.keys.length-1)}}}),je=$e,Ee=Object(G["a"])(je,Ne,Re,!1,null,null,null);Ee.options.__file="SshKeysForm.vue";var Fe=Ee.exports,Pe=["aol.com","att.net","comcast.net","facebook.com","gmail.com","gmx.com","googlemail.com","google.com","hotmail.com","hotmail.co.uk","mac.com","me.com","mail.com","msn.com","live.com","sbcglobal.net","verizon.net","yahoo.com","yahoo.co.uk","email.com","fastmail.fm","games.com","gmx.net","hush.com","hushmail.com","icloud.com","iname.com","inbox.com","lavabit.com","love.com","outlook.com","pobox.com","protonmail.com","rocketmail.com","safe-mail.net","wow.com","ygm.com","ymail.com","zoho.com","yandex.com","bellsouth.net","charter.net","cox.net","earthlink.net","juno.com","btinternet.com","virginmedia.com","blueyonder.co.uk","freeserve.co.uk","live.co.uk","ntlworld.com","o2.co.uk","orange.net","sky.com","talktalk.co.uk","tiscali.co.uk","virgin.net","wanadoo.co.uk","bt.com","sina.com","qq.com","naver.com","hanmail.net","daum.net","nate.com","yahoo.co.jp","yahoo.co.kr","yahoo.co.id","yahoo.co.in","yahoo.com.sg","yahoo.com.ph","yahoo.in","hotmail.fr","live.fr","laposte.net","yahoo.fr","wanadoo.fr","orange.fr","gmx.fr","sfr.fr","neuf.fr","free.fr","gmx.de","hotmail.de","live.de","online.de","t-online.de","web.de","yahoo.de","libero.it","virgilio.it","hotmail.it","aol.it","tiscali.it","alice.it","live.it","yahoo.it","email.it","tin.it","poste.it","teletu.it","mail.ru","rambler.ru","yandex.ru","ya.ru","list.ru","hotmail.be","live.be","skynet.be","voo.be","tvcablenet.be","telenet.be","hotmail.com.ar","live.com.ar","yahoo.com.ar","fibertel.com.ar","speedy.com.ar","arnet.com.ar","yahoo.com.mx","live.com.mx","hotmail.es","hotmail.com.mx","prodigy.net.mx","yahoo.com.br","hotmail.com.br","outlook.com.br","uol.com.br","bol.com.br","terra.com.br","ig.com.br","itelefonica.com.br","r7.com","zipmail.com.br","globo.com","globomail.com","oi.com.br","yopmail.com","yopmail.fr","yopmail.net","jetable.org","cool.fr.nf","jetable.fr.nf","nospam.ze.tc","nomail.xl.cx","mega.zik.dj","speed.1s.fr","courriel.fr.nf","moncourrier.fr.nf","monemail.fr.nf","monmail.fr.nf"],Oe=Pe,Me=["Afghanistan","Åland Islands","Albania","Algeria","American Samoa","Andorra","Angola","Anguilla","Antarctica","Antigua and Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia, Plurinational State of","Bonaire, Sint Eustatius and Saba","Bosnia and Herzegovina","Botswana","Bouvet Island","Brazil","British Indian Ocean Territory","Brunei Darussalam","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Cayman Islands","Central African Republic","Chad","Chile","China","Christmas Island","Cocos (Keeling) Islands","Colombia","Comoros","Congo","Congo, the Democratic Republic of the","Cook Islands","Costa Rica","Côte d'Ivoire","Croatia","Cuba","Curaçao","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Falkland Islands (Malvinas)","Faroe Islands","Fiji","Finland","France","French Guiana","French Polynesia","French Southern Territories","Gabon","Gambia","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenada","Guadeloupe","Guam","Guatemala","Guernsey","Guinea","Guinea-Bissau","Guyana","Haiti","Heard Island and McDonald Islands","Holy See (Vatican City State)","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iran, Islamic Republic of","Iraq","Ireland","Isle of Man","Israel","Italy","Jamaica","Japan","Jersey","Jordan","Kazakhstan","Kenya","Kiribati","Korea, Democratic People's Republic of","Korea, Republic of","Kuwait","Kyrgyzstan","Lao People's Democratic Republic","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macao","Macedonia, the former Yugoslav Republic of","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Martinique","Mauritania","Mauritius","Mayotte","Mexico","Micronesia, Federated States of","Moldova, Republic of","Monaco","Mongolia","Montenegro","Montserrat","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","Niue","Norfolk Island","Northern Mariana Islands","Norway","Oman","Pakistan","Palau","Palestinian Territory, Occupied","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Pitcairn","Poland","Portugal","Puerto Rico","Qatar","Réunion","Romania","Russian Federation","Rwanda","Saint Barthélemy","Saint Helena, Ascension and Tristan da Cunha","Saint Kitts and Nevis","Saint Lucia","Saint Martin (French part)","Saint Pierre and Miquelon","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Sint Maarten (Dutch part)","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Georgia and the South Sandwich Islands","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Svalbard and Jan Mayen","Swaziland","Sweden","Switzerland","Syrian Arab Republic","Taiwan, Province of China","Tajikistan","Tanzania, United Republic of","Thailand","Timor-Leste","Togo","Tokelau","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Turks and Caicos Islands","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","United States Minor Outlying Islands","Uruguay","Uzbekistan","Vanuatu","Venezuela, Bolivarian Republic of","Viet Nam","Virgin Islands, British","Virgin Islands, U.S.","Wallis and Futuna","Western Sahara","Yemen","Zambia","Zimbabwe"],De=Me,Te={Student:"Student",Academic:"Academic (Researcher, ...)",Startup:"Small business (Start-up, SME, ...)",Business:"Large business (Industry)"},Ue=Te,Ie={groups:[],profiles:[],firmwares:[]},ze={name:"UserForm",components:{Multiselect:Ae.a,SshKeys:Fe},props:{user:{type:Object,default:function(){}},hidden:{type:[String,Array],default:function(){return[]}},admin:{type:Boolean,default:function(){return!1}},mode:{type:String,default:"create"}},data:function(){return{reCaptchaSitekey:"6Ld8cR4UAAAAAC-zBLP9m2bC35xyyYwTbvkBcx4q",countries:De,categories:Ue,dirty:{category:!1,country:!1},store:Ie}},created:function(){var e=this;n["a"].extend("noWebMail",{getMessage:function(t){return"Your email must be <b>academic</b> or <b>professional</b> in order to validate your account (<b>".concat(e.user.email.split("@")[1],"</b> not allowed).")},validate:function(t){return e.admin||!Oe.includes(t.split("@")[1].toLowerCase())}}),this.hidden.includes("groups")||J.getUserGroups().then(function(t){e.store.groups=t}).catch(function(t){return e.$notify({text:t.response.data.message||"Failed to fetch groups",type:"error"})})},methods:{clean:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$validator.reset(),this.dirty={category:!1,country:!1},this.user=e},validate:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.$validator.validateAll().then(function(e){return!!(e&&t.user.country&&t.user.category)||(t.dirty.category=t.dirty.country=!0,console.log("User form is not valid."),!1)}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),userLabel:function(e){return Ue[e]},toggleMotivations:function(){this.admin||I()("#motivations-help").slideToggle()}},computed:{passwordPolicy:function(){return'<h6>Password Policy</h6><ul class="pl-3 mb-0"><li>one upper case letter [A-Z]</li><li>three lower case letters [a-z]</li><li>one digit [0-9]</li><li>one special character [!@#$%^&*_=+-/]</li><li>minimum length of eight characters</li></ul>'}}},Be=ze,Le=(r("29fe"),r("9ee7"),Object(G["a"])(Be,Ce,ke,!1,null,"2e117473",null));Le.options.__file="UserForm.vue";var Ge=Le.exports,qe={name:"signup",components:{UserForm:Ge,VueRecaptcha:xe["a"]},data:function(){return{hostname:location.hostname,reCaptchaSitekey:"6Ld8cR4UAAAAAC-zBLP9m2bC35xyyYwTbvkBcx4q",user:{sshkeys:[""]},charter:!1,success:!1,captcha:{dirty:!1,verified:!1}}},methods:{signup:function(){var e=this;this.$validator.validateAll().then(function(){var t=Object(W["a"])(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.user.validate();case 2:if(t.t1=!t.sent,t.t1){t.next=5;break}t.t1=!r;case 5:if(t.t0=t.t1,t.t0){t.next=8;break}t.t0=!e.captcha.verified;case 8:if(!t.t0){t.next=12;break}return e.captcha.dirty=!0,console.log("Form is not valid."),t.abrupt("return");case 12:if("devwww.iot-lab.info"!==location.hostname){t.next=15;break}return alert("Signup on devwww is restricted to IoT-LAB administrators"),t.abrupt("return");case 15:return t.prev=15,t.next=18,J.signup(e.user);case 18:e.success=!0,t.next=25;break;case 21:t.prev=21,t.t2=t["catch"](15),e.success=!1,e.$notify({text:"Error during signup<br>"+t.t2.response.data.message,type:"error",duration:-1});case 25:case"end":return t.stop()}},t,this,[[15,21]])}));return function(e){return t.apply(this,arguments)}}())},onCaptchaVerify:function(e){console.log("Captcha Verified"),this.captcha.verified=!0},onCaptchaExpired:function(){console.log("Captcha Expired"),this.captcha.verified=!1}}},He=qe,We=Object(G["a"])(He,ye,_e,!1,null,null,null);We.options.__file="Signup.vue";var Ye=We.exports,Ke=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container mt-3"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-lg-8"},[r("h2",[e._v("Activate account")]),e.success?r("div",{staticClass:"card border-success my-5"},[e._m(0),r("div",{staticClass:"card-body text-success"},[r("h5",[e._v("Welcome to FIT IoT-LAB")]),r("p",[e._v("You will receive an email with your username.")]),r("router-link",{staticClass:"btn btn-block btn-outline-success w-25 mx-auto mt-3",attrs:{to:{name:"login"}}},[e._v("Log in")])],1)]):e._e(),!1===e.success?r("div",{staticClass:"card border-danger my-5"},[e._m(1),e._m(2)]):e._e()])])])},Ve=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card-header bg-success text-white"},[r("i",{staticClass:"fa fa-check mr-1"}),e._v(" Your account has been activated")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card-header bg-danger text-white"},[r("i",{staticClass:"fa fa-times mr-1"}),e._v(" Your account cannot be activated")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card-body text-danger"},[r("p",[e._v("Maybe the activation link is incorrect or expired.")]),r("p",[e._v("Try to sign up again or contact the administrators.")])])}],Je={name:"ActivateAccount",data:function(){return{success:void 0}},created:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$route.query.hash,t){e.next=4;break}return this.$notify({text:"Hash is missing from URL",type:"error"}),e.abrupt("return");case 4:return e.prev=4,e.next=7,J.activateAccount(t);case 7:this.success=!0,e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](4),this.success=!1,this.$notify({text:"Account activation failed",type:"error"});case 14:case"end":return e.stop()}},e,this,[[4,10]])}));return function(){return e.apply(this,arguments)}}()},Ze=Je,Xe=Object(G["a"])(Ze,Ke,Ve,!1,null,null,null);Xe.options.__file="ActivateAccount.vue";var Qe=Xe.exports,et=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container mt-3"},[e._m(0),r("div",{staticClass:"row"},[e._m(1),r("div",{staticClass:"col-md-9"},[r("div",{staticClass:"tab-content",attrs:{id:"nav-tabContent"}},[r("div",{staticClass:"tab-pane fade show active",attrs:{id:"list-profile",role:"tabpanel","aria-labelledby":"list-profile-list"}},[e._m(2),r("form",{on:{submit:function(t){return t.preventDefault(),e.updateProfile(t)}}},[r("div",{staticClass:"form-group"},[r("span",{staticClass:"lead text-muted mr-1"},[e._v(e._s(e.auth.username))]),e._l([].concat(e.user.groups).sort(),function(t){return r("span",{staticClass:"badge ml-1",class:"admin"===t?"badge-warning":"badge-primary"},[e._v("\n                        "+e._s(t)+"\n                ")])})],2),r("user-form",{ref:"user",attrs:{user:e.user,hidden:["sshkeys","groups","password"]}}),r("div",{staticClass:"form-group"},[r("button",{staticClass:"btn btn-success mr-1",attrs:{type:"submit"}},[e._v("Update profile")]),r("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:e.reset}},[e._v("Reset")])])],1)]),r("div",{staticClass:"tab-pane fade",attrs:{id:"list-password",role:"tabpanel","aria-labelledby":"list-password-list"}},[e._m(3),r("div",{staticClass:"row"},[r("form",{staticClass:"col-md-5",on:{submit:function(t){return t.preventDefault(),e.changePassword(t)}}},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"form-control-label"},[e._v("Current password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.pwd.old,expression:"pwd.old"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("current_password")},attrs:{type:"password",placeholder:"Type your current password",name:"current_password","data-vv-as":"current password"},domProps:{value:e.pwd.old},on:{input:function(t){t.target.composing||e.$set(e.pwd,"old",t.target.value)}}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("current_password"),expression:"errors.has('current_password')"}],staticClass:"invalid-feedback"},[e._v("\n                  "+e._s(e.errors.first("current_password"))+"\n                ")])]),r("div",{staticClass:"form-group"},[r("label",{staticClass:"form-control-label"},[e._v("New password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.pwd.new,expression:"pwd.new"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"new_password",staticClass:"form-control",class:{"is-invalid":e.errors.has("new_password")},attrs:{type:"password",placeholder:"Choose a new password",name:"new_password","data-vv-as":"new password"},domProps:{value:e.pwd.new},on:{input:function(t){t.target.composing||e.$set(e.pwd,"new",t.target.value)}}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("new_password"),expression:"errors.has('new_password')"}],staticClass:"invalid-feedback"},[e._v("\n                    "+e._s(e.errors.first("new_password"))+"\n                  ")])]),r("div",{staticClass:"form-group"},[r("label",{staticClass:"form-control-label"},[e._v("Confirm new password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.pwd.confirm,expression:"pwd.confirm"},{name:"validate",rawName:"v-validate",value:"required|confirmed:new_password",expression:"'required|confirmed:new_password'"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("confirm_new_password")},attrs:{type:"password",placeholder:"Type again your new password",name:"confirm_new_password","data-vv-as":"new password"},domProps:{value:e.pwd.confirm},on:{input:function(t){t.target.composing||e.$set(e.pwd,"confirm",t.target.value)}}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("confirm_new_password"),expression:"errors.has('confirm_new_password')"}],staticClass:"invalid-feedback"},[e._v("\n                    "+e._s(e.errors.first("confirm_new_password"))+"\n                  ")])]),r("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[e._v("Change Password")])]),e._m(4)])]),r("div",{staticClass:"tab-pane fade",attrs:{id:"list-sshkeys",role:"tabpanel","aria-labelledby":"list-sshkeys-list"}},[e._m(5),r("form",{on:{submit:function(t){return t.preventDefault(),e.saveKeys(t)}}},[r("ssh-keys",{attrs:{keys:e.keys,rows:6}}),r("button",{staticClass:"btn btn-success",staticStyle:{"margin-top":"10px"},attrs:{type:"submit"}},[e._v("Update SSH keys")])],1)]),r("div",{staticClass:"tab-pane fade",attrs:{id:"list-delete",role:"tabpanel","aria-labelledby":"list-delete-list"}},[r("p",{staticClass:"lead"},[e._v("Permanently delete your account?")]),e._m(6),r("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:e.deleteUser}},[r("i",{staticClass:"fa fa-trash-o fa-lg",attrs:{"aria-hidden":"true"}}),e._v(" Delete Account")])]),e._m(7)])])])])},tt=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h2",{staticClass:"d-none d-sm-block d-md-none"},[r("i",{staticClass:"fa fa-fw fa-user",attrs:{"aria-hidden":"true"}}),e._v(" My Account\n    ")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"col-md-3 mb-4"},[r("div",{staticClass:"list-group",attrs:{id:"list-tab",role:"tablist"}},[r("a",{staticClass:"list-group-item list-group-item-action active",attrs:{id:"list-profile-list","data-toggle":"list",href:"#list-profile",role:"tab","aria-controls":"profile"}},[r("i",{staticClass:"fa fa-fw fa-address-card",attrs:{"aria-hidden":"true"}}),e._v(" Profile")]),r("a",{staticClass:"list-group-item list-group-item-action",attrs:{id:"list-password-list","data-toggle":"list",href:"#list-password",role:"tab","aria-controls":"password"}},[r("i",{staticClass:"fa fa-fw fa-unlock-alt",attrs:{"aria-hidden":"true"}}),e._v(" Password")]),r("a",{staticClass:"list-group-item list-group-item-action",attrs:{id:"list-sshkeys-list","data-toggle":"list",href:"#list-sshkeys",role:"tab","aria-controls":"sshkeys"}},[r("i",{staticClass:"fa fa-fw fa-key",attrs:{"aria-hidden":"true"}}),e._v(" SSH Keys")]),r("a",{staticClass:"list-group-item list-group-item-action",attrs:{id:"list-delete-list","data-toggle":"list",href:"#list-delete",role:"tab","aria-controls":"delete"}},[r("i",{staticClass:"fa fa-fw fa-trash-o",attrs:{"aria-hidden":"true"}}),e._v(" Delete account")]),r("a",{staticClass:"list-group-item list-group-item-action",attrs:{id:"list-mailing-list","data-toggle":"list",href:"#list-mailing",role:"tab","aria-controls":"mailing"}},[r("i",{staticClass:"fa fa-fw fa-envelope-o",attrs:{"aria-hidden":"true"}}),e._v(" Mailing list")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h5",[r("i",{staticClass:"fa fa-fw fa-pencil",attrs:{"aria-hidden":"true"}}),e._v(" Edit your profile")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h5",[r("i",{staticClass:"fa fa-fw fa-unlock-alt",attrs:{"aria-hidden":"true"}}),e._v(" Change your password")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"card mt-2 border-info text-info",attrs:{id:"policy"}},[r("div",{staticClass:"card-body"},[r("h6",[e._v("Password Policy")]),r("ul",{staticClass:"pl-3 mb-0"},[r("li",[e._v("one upper case letter [A-Z]")]),r("li",[e._v("three lower case letters [a-z]")]),r("li",[e._v("one digit [0-9]")]),r("li",[e._v("one special character [!@#$%^&*_=+-/]")]),r("li",[e._v("minimum length of eight characters")])])])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h5",[r("i",{staticClass:"fa fa-fw fa-key",attrs:{"aria-hidden":"true"}}),e._v(" SSH keys")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",[r("strong",[e._v("All your data will be lost")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"tab-pane fade",attrs:{id:"list-mailing",role:"tabpanel","aria-labelledby":"list-mailing-list"}},[r("h5",{staticClass:"mb-3"},[r("i",{staticClass:"fa fa-envelope-o",attrs:{"aria-hidden":"true"}}),e._v(" Mailing list subscription")]),r("p",[e._v("You can manage your subscription to the mailing list for FIT IoT-LAB users, or browse the archive, from this page:"),r("br"),r("a",{attrs:{href:"https://sympa.inria.fr/sympa/info/iot-lab-users"}},[e._v("https://sympa.inria.fr/sympa/info/iot-lab-users")])])])}],rt={name:"UserAccount",components:{UserForm:Ge,SshKeys:Fe},data:function(){return{user:{},keys:[""],pwd:{},auth:Z,activeKey:0}},created:function(){var e=this;J.getSSHkeys().then(function(t){e.keys=t}).catch(function(t){e.$notify({text:t.response.data.message||"An error occured",type:"error"})}),J.getUserInfo().then(function(t){e.user=t}).then(function(t){void 0!==e.$route.query.validate&&e.$nextTick(function(){this.updateProfile()})}).catch(function(t){e.$notify({text:t.response.data.message||"An error occured",type:"error"})})},methods:{reset:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,J.getUserInfo();case 2:this.user=e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),updateProfile:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.user.validate();case 2:if(!e.sent){e.next=12;break}return e.prev=3,e.next=6,J.setUserInfo(this.user);case 6:this.$notify({text:"Profile updated",type:"success"}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](3),this.$notify({text:e.t0.response.data.message||"An error occured",type:"error"});case 12:case"end":return e.stop()}},e,this,[[3,9]])}));return function(){return e.apply(this,arguments)}}(),changePassword:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.changePassword(this.pwd.old,this.pwd.new,this.pwd.confirm);case 3:this.pwd={},this.$notify({text:"Password successfully changed",type:"success"}),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](0),this.pwd={},this.$notify({title:"Failed to change password",text:e.t0.response.data.message,type:"error",duration:5e3});case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),saveKeys:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.modifySSHkeys(this.keys);case 3:this.$notify({text:"SSH keys updated",type:"success"}),this.user.sshkeys=this.keys,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$notify({text:"Failed to update SSH keys",type:"error"});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),addKey:function(){this.keys.push(""),this.activeKey=this.keys.length-1},delKey:function(e){this.keys.splice(e,1),this.activeKey=Math.min(this.activeKey,this.keys.length-1)},deleteUser:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!confirm("Delete your account?")){e.next=12;break}return e.prev=1,e.next=4,J.deleteUser();case 4:Z.doLogout(),this.$notify({text:"User account deleted",type:"success"}),this.$router.push({name:"login"}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),this.$notify({title:"An error occured",text:e.t0.response.data.message,type:"error"});case 12:case"end":return e.stop()}},e,this,[[1,9]])}));return function(){return e.apply(this,arguments)}}()}},at=rt,nt=Object(G["a"])(at,et,tt,!1,null,null,null);nt.options.__file="UserAccount.vue";var st=nt.exports,it=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container mt-3"},[r("h2",[e._v("Groups")]),r("table",{staticClass:"table table-striped table-sm mt-4"},[e._m(0),r("tbody",e._l(e.store.groups,function(t){return r("tr",[r("td",[r("span",{staticClass:"badge",class:"admin"===t.name?"badge-warning":"badge-primary"},[e._v(e._s(t.name))])]),r("td",[r("span",{staticClass:"badge badge-pill badge-secondary"},[e._v(e._s(t.users.length))]),e._v(" "+e._s([].concat(t.users).sort().join(", ")))]),r("td",[r("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Delete group",expression:"'Delete group'"}],staticClass:"btn btn-sm border-0 btn-outline-danger",attrs:{href:""},on:{click:function(r){r.preventDefault(),e.deleteGroup(t.name)}}},[r("i",{staticClass:"fa fa-fw fa-trash-o"})])])])}))]),r("a",{staticClass:"btn btn-success",attrs:{href:"","data-toggle":"modal","data-target":".add-group-modal"},on:{click:function(t){t.preventDefault(),e.newGroup="",e.$validator.reset()}}},[e._v("New group")]),r("modal-dialog",{attrs:{name:"add-group-modal"},on:{save:e.createGroup,open:function(t){e.setFocus("group-name")}}},[r("template",{slot:"title"},[r("i",{staticClass:"fa fa-fw fa-user-circle"}),e._v(" New user group\n    ")]),r("form",{on:{submit:function(t){return t.preventDefault(),e.createGroup(t)}}},[r("label",[e._v("Enter group name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.newGroup,expression:"newGroup"},{name:"validate",rawName:"v-validate",value:"required|alpha_dash|min:3",expression:"'required|alpha_dash|min:3'"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("name")},attrs:{id:"group-name",name:"name",placeholder:"Name",type:"text"},domProps:{value:e.newGroup},on:{input:function(t){t.target.composing||(e.newGroup=t.target.value)}}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("name"),expression:"errors.has('name')"}],staticClass:"invalid-feedback"},[e._v("\n        "+e._s(e.errors.first("name"))+"\n      ")])])],2)],1)},ot=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",[r("th",{staticClass:"header"},[e._v("Name")]),r("th",{staticClass:"header"},[e._v("Users")]),r("th",{staticClass:"header text-center"})])])}],ct=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"modal fade",class:e.name,attrs:{tabindex:"-1",role:"dialog","aria-hidden":"true"}},[r("div",{staticClass:"modal-dialog"},[r("div",{staticClass:"modal-content"},[r("div",{staticClass:"modal-header bg-light"},[r("h5",{staticClass:"modal-title"},[e._t("title")],2),e._m(0)]),r("div",{staticClass:"modal-body"},[e._t("default")],2),r("div",{staticClass:"modal-footer border-0"},[r("button",{staticClass:"btn",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Close")]),r("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.save(t)}}},[e._t("action",[e._v("Save")])],2)])])])])},lt=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[r("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])}],ut={name:"ModalDialog",props:{name:{type:String}},data:function(){return{}},mounted:function(){var e=this;I()(".modal").on("shown.bs.modal",function(t){e.$emit("open")})},methods:{save:function(){this.$emit("save")}}},dt=ut,pt=Object(G["a"])(dt,ct,lt,!1,null,null,null);pt.options.__file="ModalDialog.vue";var mt=pt.exports,ft={name:"AdminGroups",components:{ModalDialog:mt},data:function(){return{store:Ie,newGroup:""}},created:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getGroups();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{setFocus:function(e){document.getElementById(e).focus()},getGroups:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.getUserGroups();case 3:e.t0=function(e,t){return e.name.localeCompare(t.name)},this.store.groups=e.sent.sort(e.t0),e.next=10;break;case 7:e.prev=7,e.t1=e["catch"](0),this.$notify({text:e.t1.response.data.message||"Failed to fetch groups",type:"error"});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),createGroup:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.store.groups.some(function(e){return e.name===t.newGroup})){e.next=4;break}return this.$notify({text:"Group ".concat(this.newGroup," already exists"),type:"warning"}),this.setFocus("group-name"),e.abrupt("return");case 4:return e.next=6,this.$validator.validateAll();case 6:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:return I()(".modal").modal("hide"),e.next=11,J.createGroup(this.newGroup).catch(function(e){t.$notify({text:e.response.data.message||"An error occured",type:"error"})});case 11:return e.next=13,g(50);case 13:return e.next=15,this.getGroups();case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),deleteGroup:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!confirm("Delete group ".concat(t,"?"))){e.next=11;break}return e.prev=1,e.next=4,J.deleteGroup(t);case 4:this.store.groups=this.store.groups.filter(function(e){return e.name!==t}),this.$notify({text:"Group ".concat(t," deleted"),type:"success"}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),this.$notify({text:e.t0.response.data.message||"An error occured",type:"error"});case 11:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()}},ht=ft,vt=(r("8f4e"),Object(G["a"])(ht,it,ot,!1,null,"0b00a9d4",null));vt.options.__file="AdminGroups.vue";var gt=vt.exports,bt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container mt-3"},[r("h4",{staticClass:"d-none d-sm-block d-md-none"},[e._v("Users")]),r("form",{staticClass:"form-inline my-4",on:{submit:function(t){return t.preventDefault(),e.search(t)}}},[r("div",{staticClass:"input-group mr-2"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchPattern,expression:"searchPattern"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search for users"},domProps:{value:e.searchPattern},on:{input:function(t){t.target.composing||(e.searchPattern=t.target.value)}}}),e._m(0)]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.showGroup,expression:"showGroup"}],staticClass:"form-control custom-select mr-2",on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.showGroup=t.target.multiple?r:r[0]},e.showUsers]}},[r("option",{attrs:{value:"",disabled:""}},[e._v("Show users in group")]),e._l(e.store.groups,function(t){return r("option",{domProps:{value:t.name}},[e._v(e._s(t.name))])})],2),r("i",{staticClass:"fa fa-lg fa-spinner fa-spin ml-1 mr-auto",class:e.spinner?"text-dark":"text-white"}),r("router-link",{staticClass:"btn btn-success mr-2",attrs:{to:{name:"addUsers"}}},[r("i",{staticClass:"fa fa-user-plus"}),e._v(" Add Users")]),r("router-link",{staticClass:"btn btn-secondary mr-2",attrs:{to:{name:"groups"}}},[r("i",{staticClass:"fa fa-cog"}),e._v(" Groups")]),r("div",{staticClass:"dropdown d-inline-block"},[r("button",{staticClass:"btn dropdown-toggle cursor",attrs:{type:"button",id:"actionMenuBtn","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[r("i",{staticClass:"fa fa-wrench text-dark"}),e._v(" Actions on "+e._s(e.selectedUsers.length||"")+" users\n      ")]),r("div",{staticClass:"dropdown-menu dropdown-menu-right",attrs:{"aria-labelledby":"actionMenuBtn"}},[r("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.showGroupsModal("add")}}},[r("i",{staticClass:"fa fa-fw fa-user-plus"}),e._v(" Add groups")]),r("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.showGroupsModal("remove")}}},[r("i",{staticClass:"fa fa-fw fa-user-times"}),e._v(" Remove groups")]),r("a",{staticClass:"dropdown-item text-danger",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.deleteSelectedUsers(t)}}},[r("i",{staticClass:"fa fa-fw fa-trash"}),e._v(" Delete users")])])])],1),r("table",{staticClass:"table table-striped table-sm"},[r("thead",[r("tr",[r("th",{staticClass:"header",attrs:{width:"15px"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.allSelected,expression:"allSelected"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.allSelected)?e._i(e.allSelected,null)>-1:e.allSelected},on:{change:[function(t){var r=e.allSelected,a=t.target,n=!!a.checked;if(Array.isArray(r)){var s=null,i=e._i(r,s);a.checked?i<0&&(e.allSelected=r.concat([s])):i>-1&&(e.allSelected=r.slice(0,i).concat(r.slice(i+1)))}else e.allSelected=n},e.toggleSelectedUsers]}})]),r("th",{staticClass:"header headerSortDown",attrs:{"aria-sort":"ascending"}},[e._v("Login")]),r("th",{staticClass:"header"},[e._v("Name")]),r("th",{staticClass:"header"},[e._v("Email")]),r("th",{staticClass:"header"},[e._v("Created")]),r("th",{staticClass:"header",attrs:{width:"50px"}},[e._v("State")]),r("th",{staticClass:"header"},[e._v("Groups")]),r("th",{staticClass:"header",attrs:{width:"50px"}},[e._v("Actions")])])]),r("tbody",e._l(e.users,function(t){return r("tr",[r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedUsers,expression:"selectedUsers"}],attrs:{type:"checkbox"},domProps:{value:t,checked:Array.isArray(e.selectedUsers)?e._i(e.selectedUsers,t)>-1:e.selectedUsers},on:{click:e.checkUncheckAll,change:function(r){var a=e.selectedUsers,n=r.target,s=!!n.checked;if(Array.isArray(a)){var i=t,o=e._i(a,i);n.checked?o<0&&(e.selectedUsers=a.concat([i])):o>-1&&(e.selectedUsers=a.slice(0,o).concat(a.slice(o+1)))}else e.selectedUsers=s}}})]),r("td",{on:{click:function(r){e.toggleUserSelected(t)}}},[e._v(e._s(t.login))]),r("td",[e._v(e._s(t.firstName)+" "+e._s(t.lastName)+" "),"clochett"===t.login?r("i",{staticClass:"fa fa-bell-o"}):e._e()]),r("td",[r("a",{staticClass:"email",attrs:{href:"mailto:"+t.email}},[e._v(e._s(t.email))])]),r("td",{staticStyle:{"white-space":"nowrap"},attrs:{title:e._f("formatDateTime")(t.created)}},[e._v(e._s(e._f("formatDate")(t.created)))]),r("td",[r("a",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:"inactive"===t.status?"Activate":"Deactivate",expression:"(user.status === 'inactive') ? 'Activate' : 'Deactivate'",arg:"top"}],staticClass:"badge",class:"inactive"===t.status?"badge-dark":"badge-info",attrs:{href:""},on:{click:function(r){r.preventDefault(),e.toggleActive(t)}}},[e._v("\n            "+e._s(t.status)+"\n          ")])]),r("td",e._l([].concat(t.groups).sort(),function(t){return r("span",{staticClass:"badge mr-1",class:"admin"===t?"badge-warning":"badge-primary"},[e._v("\n            "+e._s(t)+"\n          ")])})),r("td",[r("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"User actions"}},[r("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Groups",expression:"'Groups'"}],staticClass:"btn btn-sm border-0 btn-outline-secondary",attrs:{href:"","data-toggle":"modal","data-target":".edit-groups-modal"},on:{click:function(r){e.currentUser=t,e.currentGroups=e.getCurrentGroups(t)}}},[r("i",{staticClass:"fa fa-fw fa-user-circle"})]),r("router-link",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Experiments",expression:"'Experiments'"}],staticClass:"btn btn-sm border-0 btn-outline-secondary",attrs:{to:{name:"userExperiments",params:{username:t.login}}}},[r("i",{staticClass:"fa fa-fw fa-flask",on:{click:e.hideTooltip}})]),r("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Edit",expression:"'Edit'"}],staticClass:"btn btn-sm border-0 btn-outline-secondary",attrs:{href:"","data-toggle":"modal","data-target":".edit-user-modal"},on:{click:function(r){e.currentUser=JSON.parse(JSON.stringify(t)),e.$refs.user.clean(t)}}},[r("i",{staticClass:"fa fa-fw fa-pencil"})]),r("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Email",expression:"'Email'"}],staticClass:"btn btn-sm border-0 btn-outline-secondary",attrs:{href:"","data-toggle":"modal","data-target":".email-user-modal"},on:{click:function(r){e.currentUser=t,e.$refs.mail.$validator.reset()}}},[r("i",{staticClass:"fa fa-fw fa-envelope"})]),r("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Reset password",expression:"'Reset password'"}],staticClass:"btn btn-sm border-0 btn-outline-dark",attrs:{href:""},on:{click:function(r){r.preventDefault(),e.resetPassword(t)}}},[r("i",{staticClass:"fa fa-fw fa-unlock-alt"})]),r("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Delete",expression:"'Delete'"}],staticClass:"btn btn-sm border-0 btn-outline-danger",attrs:{href:""},on:{click:function(r){r.preventDefault(),e.deleteUser(t)}}},[r("i",{staticClass:"fa fa-fw fa-trash"})])],1)])])}))]),r("div",{staticClass:"text-muted"},[e.showGroup||e.searchPattern?1===e.users.length?r("p",[e._v(e._s(e.users.length)+" matching user")]):e.users.length>1?r("p",[e._v(e._s(e.users.length)+" matching users")]):r("p",[e._v("No matching user found")]):r("p",[e._v("Select a search criterion")])]),r("modal-dialog",{attrs:{name:"add-groups-modal"},on:{save:function(t){e.setGroups("add")}}},[r("template",{slot:"title"},[r("i",{staticClass:"fa fa-fw fa-user-plus"}),e._v(" Add groups to "),r("span",{staticClass:"text-primary"},[e._v(e._s(e.selectedUsers.length)+" users")])]),e._l(e.store.groups,function(t){return r("label",{staticClass:"custom-control custom-checkbox d-block"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.currentGroups[t.name],expression:"currentGroups[group.name]"}],staticClass:"custom-control-input",attrs:{name:"checkbox-monitor",type:"checkbox"},domProps:{checked:Array.isArray(e.currentGroups[t.name])?e._i(e.currentGroups[t.name],null)>-1:e.currentGroups[t.name]},on:{change:function(r){var a=e.currentGroups[t.name],n=r.target,s=!!n.checked;if(Array.isArray(a)){var i=null,o=e._i(a,i);n.checked?o<0&&e.$set(e.currentGroups,t.name,a.concat([i])):o>-1&&e.$set(e.currentGroups,t.name,a.slice(0,o).concat(a.slice(o+1)))}else e.$set(e.currentGroups,t.name,s)}}}),r("span",{staticClass:"custom-control-indicator"}),r("span",{staticClass:"custom-control-description text-capitalize"},[e._v(e._s(t.name))])])}),r("template",{slot:"action"},[e._v("Add groups")])],2),r("modal-dialog",{attrs:{name:"remove-groups-modal"},on:{save:function(t){e.setGroups("remove")}}},[r("template",{slot:"title"},[r("i",{staticClass:"fa fa-fw fa-user-plus"}),e._v(" Remove groups to "),r("span",{staticClass:"text-primary"},[e._v(e._s(e.selectedUsers.length)+" users")])]),e._l(e.store.groups,function(t){return r("label",{staticClass:"custom-control custom-checkbox d-block"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.currentGroups[t.name],expression:"currentGroups[group.name]"}],staticClass:"custom-control-input",attrs:{name:"checkbox-monitor",type:"checkbox"},domProps:{checked:Array.isArray(e.currentGroups[t.name])?e._i(e.currentGroups[t.name],null)>-1:e.currentGroups[t.name]},on:{change:function(r){var a=e.currentGroups[t.name],n=r.target,s=!!n.checked;if(Array.isArray(a)){var i=null,o=e._i(a,i);n.checked?o<0&&e.$set(e.currentGroups,t.name,a.concat([i])):o>-1&&e.$set(e.currentGroups,t.name,a.slice(0,o).concat(a.slice(o+1)))}else e.$set(e.currentGroups,t.name,s)}}}),r("span",{staticClass:"custom-control-indicator"}),r("span",{staticClass:"custom-control-description text-capitalize"},[e._v(e._s(t.name))])])}),r("template",{slot:"action"},[e._v("Remove groups")])],2),r("modal-dialog",{attrs:{name:"edit-groups-modal"},on:{save:e.updateGroups}},[r("template",{slot:"title"},[r("i",{staticClass:"fa fa-fw fa-pencil"}),e._v(" Edit user groups for "),r("span",{staticClass:"text-primary"},[e._v(e._s(e.currentUser.login))])]),e._l(e.store.groups,function(t){return r("label",{staticClass:"custom-control custom-checkbox d-block"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.currentGroups[t.name],expression:"currentGroups[group.name]"}],staticClass:"custom-control-input",attrs:{name:"checkbox-monitor",type:"checkbox"},domProps:{checked:Array.isArray(e.currentGroups[t.name])?e._i(e.currentGroups[t.name],null)>-1:e.currentGroups[t.name]},on:{change:function(r){var a=e.currentGroups[t.name],n=r.target,s=!!n.checked;if(Array.isArray(a)){var i=null,o=e._i(a,i);n.checked?o<0&&e.$set(e.currentGroups,t.name,a.concat([i])):o>-1&&e.$set(e.currentGroups,t.name,a.slice(0,o).concat(a.slice(o+1)))}else e.$set(e.currentGroups,t.name,s)}}}),r("span",{staticClass:"custom-control-indicator"}),r("span",{staticClass:"custom-control-description text-capitalize"},[e._v(e._s(t.name))])])})],2),r("div",{staticClass:"modal fade edit-user-modal",attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"editUserModal","aria-hidden":"true"}},[r("div",{staticClass:"modal-dialog modal-lg"},[r("div",{staticClass:"modal-content"},[r("div",{staticClass:"modal-header bg-light"},[r("h5",{staticClass:"modal-title"},[r("i",{staticClass:"fa fa-fw fa-pencil"}),e._v(" Edit "),r("span",{staticClass:"text-primary"},[e._v(e._s(e.currentUser.login))]),e._v("'s profile")]),e._m(1)]),r("div",{staticClass:"modal-body px-4 pt-3 pb-0"},[r("user-form",{ref:"user",attrs:{user:e.currentUser,admin:!0,mode:"edit",hidden:["password"]}})],1),r("div",{staticClass:"modal-footer border-0 dbg-light"},[r("button",{staticClass:"btn",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Close")]),r("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.updateProfile(t)}}},[e._v("Save profile")])])])])]),r("div",{staticClass:"modal fade email-user-modal",attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"emailUserModal","aria-hidden":"true"}},[r("div",{staticClass:"modal-dialog modal-lg"},[r("div",{staticClass:"modal-content"},[r("div",{staticClass:"modal-header bg-light"},[r("h5",{staticClass:"modal-title"},[r("i",{staticClass:"fa fa-fw fa-envelope"}),e._v("\n            Send email to "+e._s(e.currentUser.firstName)+" "+e._s(e.currentUser.lastName)+" "),r("span",{staticClass:"text-muted"},[e._v("("+e._s(e.currentUser.login)+")")])]),e._m(2)]),r("div",{staticClass:"modal-body px-4 pt-3 pb-0"},[r("email-form",{ref:"mail",attrs:{to:e.currentUser.email+", admin@iot-lab.info"}})],1),r("div",{staticClass:"modal-footer border-0"},[r("button",{staticClass:"btn",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Close")]),r("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$refs.mail.send(t)}}},[e._v("Send")])])])])])],1)},wt=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"input-group-btn"},[r("button",{staticClass:"btn btn-secondary",attrs:{type:"submit","aria-label":"Search"}},[r("i",{staticClass:"fa fa-search"})])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[r("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[r("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])}],yt=(r("4f7f"),r("8afe")),_t=(r("456d"),r("20d6"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"form-group"},[e._m(0),r("input",{directives:[{name:"model",rawName:"v-model",value:e.to,expression:"to"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("recipients")},attrs:{name:"recipients",type:"text",placeholder:"Recipients"},domProps:{value:e.to},on:{input:function(t){t.target.composing||(e.to=t.target.value)}}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("recipients"),expression:"errors.has('recipients')"}],staticClass:"invalid-feedback",domProps:{innerHTML:e._s(e.errors.first("recipients"))}})]),r("div",{staticClass:"form-group"},[r("label",{staticClass:"form-control-label"},[e._v("Subject")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.subject,expression:"subject"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("subject")},attrs:{name:"subject",type:"text",placeholder:"Subject"},domProps:{value:e.subject},on:{input:function(t){t.target.composing||(e.subject=t.target.value)}}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("subject"),expression:"errors.has('subject')"}],staticClass:"invalid-feedback",domProps:{innerHTML:e._s(e.errors.first("subject"))}})]),r("div",{staticClass:"form-group"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("message")},attrs:{name:"message",rows:"8",placeholder:"Message"},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("message"),expression:"errors.has('message')"}],staticClass:"invalid-feedback"},[e._v("\n      "+e._s(e.errors.first("message"))+"\n    ")])])])}),xt=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{staticClass:"form-control-label"},[e._v("Recipients "),r("small",{staticClass:"text-muted"},[e._v("(comma separated)")])])}],Ct={name:"EmailForm",props:{to:{type:String,default:function(){return""}},subject:{type:String,default:function(){return""}},message:{type:String,default:function(){return"Dear IoT-LAB user,\n\n\n\nRegards,\nThe FIT IoT-LAB Team\nhttps://www.iot-lab.info"}}},computed:{recipients:function(){return this.to.split(",").map(function(e){return e.trim()})}},methods:{send:function(){var e=this;return this.$validator.validateAll().then(function(){var t=Object(W["a"])(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",!1);case 2:return t.prev=2,t.next=5,J.sendMail(e.recipients,e.subject,e.message);case 5:e.$notify({text:"Email sent",type:"success"}),I()(".email-user-modal").modal("hide"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),e.$notify({text:"An error occured",type:"error"});case 12:return t.abrupt("return",!0);case 13:case"end":return t.stop()}},t,this,[[2,9]])}));return function(e){return t.apply(this,arguments)}}())}}},kt=Ct,St=Object(G["a"])(kt,_t,xt,!1,null,null,null);St.options.__file="EmailForm.vue";var At=St.exports,Nt={name:"AdminUsers",components:{UserForm:Ge,EmailForm:At,ModalDialog:mt},data:function(){return{store:Ie,users:[],currentUser:{},currentGroups:{},auth:Z,searchPattern:"",showGroup:"",selectedUsers:[],allSelected:!1,spinner:!1}},created:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.searchPattern=this.$route.query.search,this.search(),this.$nextTick(function(){I()('[data-toggle="popover"]').popover({trigger:"focus",html:!0})}),e.prev=3,e.next=6,J.getUserGroups();case 6:e.t0=function(e,t){return e.name.localeCompare(t.name)},this.store.groups=e.sent.sort(e.t0),e.next=13;break;case 10:e.prev=10,e.t1=e["catch"](3),this.$notify({text:e.t1.response.data.message||"Failed to fetch groups",type:"error"});case 13:case"end":return e.stop()}},e,this,[[3,10]])}));return function(){return e.apply(this,arguments)}}(),beforeRouteEnter:function(e,t,r){r(function(e){e.$route.query.search&&e.$route.query.search!==e.searchPattern&&(e.searchPattern=e.$route.query.search,e.search()),e.searchPattern||e.showGroup||I()('input[placeholder="Search for users"]').focus()})},beforeUpdate:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{getCurrentGroups:function(e){var t={};if(!e.groups)return{};var r=!0,a=!1,n=void 0;try{for(var s,i=this.store.groups[Symbol.iterator]();!(r=(s=i.next()).done);r=!0){var o=s.value;t[o.name]=e.groups.includes(o.name)}}catch(e){a=!0,n=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw n}}return t},showUsers:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return delete this.$route.query.search,this.searchPattern="",t={group:this.showGroup},this.spinner=!0,e.next=6,J.getUsers(t).catch(function(e){r.$notify({text:e.response.data.message||"Failed to fetch users",type:"error"})}).finally(function(){r.spinner=!1});case 6:this.users=e.sent;case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),search:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.showGroup="",!this.searchPattern){e.next=9;break}return delete this.$route.query.search,this.spinner=!0,e.next=6,J.getUsers({search:this.searchPattern}).catch(function(e){t.$notify({text:e.response.data.message||"Failed to fetch users",type:"error"})}).finally(function(){t.spinner=!1});case 6:this.users=e.sent,e.next=10;break;case 9:this.users=[];case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),updateProfile:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.user.validate();case 2:if(!e.sent){e.next=13;break}return e.prev=3,e.next=6,J.setUserInfo(this.currentUser,this.currentUser.login);case 6:this.$set(this.users,this.users.findIndex(function(e){return e.login===t.currentUser.login}),this.currentUser),I()(".edit-user-modal").modal("hide"),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),this.$notify({text:"An error occured",type:"error"});case 13:case"end":return e.stop()}},e,this,[[3,10]])}));return function(){return e.apply(this,arguments)}}(),toggleActive:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("inactive"!==t.status){e.next=13;break}if(!confirm("Activate user?")){e.next=11;break}return e.prev=2,e.next=5,J.activateUser(t.login);case 5:t.status="active",e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](2),this.$notify({text:"An error occured",type:"error"});case 11:e.next=23;break;case 13:if(!confirm("Deactivate user?")){e.next=23;break}return e.prev=14,e.next=17,J.deactivateUser(t.login);case 17:t.status="inactive",e.next=23;break;case 20:e.prev=20,e.t1=e["catch"](14),this.$notify({text:"An error occured",type:"error"});case 23:case"end":return e.stop()}},e,this,[[2,8],[14,20]])}));return function(t){return e.apply(this,arguments)}}(),resetPassword:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!confirm("Reset password for user ".concat(t.login,"?\n\nThe user will receive a new password by email."))){e.next=10;break}return e.prev=1,e.next=4,J.resetPassword(t.email);case 4:this.$notify({text:"New password sent by email",type:"success"}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),this.$notify({text:"An error occured",type:"error"});case 10:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),deleteUser:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!confirm("Delete user ".concat(t.login,"?"))){e.next=11;break}return e.prev=1,e.next=4,J.deleteUser(t.login);case 4:this.users=this.users.filter(function(e){return e.login!==t.login}),this.$notify({text:"User ".concat(t.login," deleted"),type:"success"}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),this.$notify({text:"An error occured",type:"error"});case 11:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t){return e.apply(this,arguments)}}(),hideTooltip:function(){I()(".tooltip").fadeOut()},toggleSelectedUsers:function(){this.selectedUsers.length===this.users.length?this.selectedUsers=[]:this.selectedUsers=this.users},toggleUserSelected:function(e){this.selectedUsers.includes(e)?this.selectedUsers=this.selectedUsers.filter(function(t){return t!==e}):this.selectedUsers.push(e)},checkUncheckAll:function(){this.$nextTick(function(){this.allSelected=this.selectedUsers.length===this.users.length})},deleteSelectedUsers:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){var t,r,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!==this.selectedUsers.length){e.next=3;break}return this.$notify({text:"No user selected",type:"warning"}),e.abrupt("return");case 3:if(confirm("Delete ".concat(this.selectedUsers.length," users. Are you sure?"))){e.next=5;break}return e.abrupt("return");case 5:t=0,r=0,this.selectedUsers.forEach(function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.deleteUser(n.login);case 3:a.users=a.users.filter(function(e){return e.login!==n.login}),t+=1,r+=1,e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),a.$notify({text:"Delete user <b>".concat(n.login,"</b> failed"),type:"error"}),t+=1;case 12:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}());case 8:if(!(t<this.selectedUsers.length)){e.next=13;break}return e.next=11,g(50);case 11:e.next=8;break;case 13:this.$notify({text:"".concat(r," users deleted"),type:"success"});case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),showGroupsModal:function(e){0!==this.selectedUsers.length?(this.currentUser={},this.currentGroups={},I()(".".concat(e,"-groups-modal")).modal("show")):this.$notify({text:"No user selected",type:"warning"})},setGroups:function(e){var t=this;I()(".".concat(e,"-groups-modal")).modal("hide");var r,a=Object.keys(this.currentGroups).filter(function(e){return!0===t.currentGroups[e]});this.selectedUsers.forEach(function(){var n=Object(W["a"])(regeneratorRuntime.mark(function n(s){return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,r="add"===e?Object(yt["a"])(new Set(Object(yt["a"])(s.groups).concat(Object(yt["a"])(a)))):s.groups.filter(function(e){return!a.includes(e)}),n.next=4,J.setUserGroups(s.login,r);case 4:s.groups=r,n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),t.$notify({text:"Set group failed for <b>".concat(s.login,"</b>"),type:"error"});case 10:case"end":return n.stop()}},n,this,[[0,7]])}));return function(e){return n.apply(this,arguments)}}())},updateGroups:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=Object.keys(this.currentGroups).filter(function(e){return!0===r.currentGroups[e]}),e.prev=1,e.next=4,J.setUserGroups(this.currentUser.login,t);case 4:this.currentUser.groups=t,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),this.$notify({text:"Set group failed for <b>".concat(this.currentUser.login,"</b>"),type:"error"});case 10:I()(".edit-groups-modal").modal("hide");case 11:case"end":return e.stop()}},e,this,[[1,7]])}));return function(){return e.apply(this,arguments)}}()}},Rt=Nt,$t=(r("79cb"),Object(G["a"])(Rt,bt,wt,!1,null,"5a33f497",null));$t.options.__file="AdminUsers.vue";var jt=$t.exports,Et=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container mt-3"},[r("h2",[e._v("Add user")]),r("div",{staticClass:"row"},[e._m(0),r("div",{staticClass:"col-md-9"},[r("div",{staticClass:"tab-content",attrs:{id:"nav-tabContent"}},[r("div",{staticClass:"tab-pane fade show active",attrs:{id:"list-single",role:"tabpanel","aria-labelledby":"list-single-list"}},[r("form",{on:{submit:function(t){return t.preventDefault(),e.createSingle(t)}}},[r("user-form",{ref:"user",attrs:{user:e.user,admin:!0,hidden:["password"]}}),r("div",{staticClass:"form-group"},[r("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[e._v("Create account")]),r("button",{staticClass:"btn btn-secondary ml-1",attrs:{type:"reset"},on:{click:function(t){e.$refs.user.clean()}}},[e._v("Clear")])])],1)]),r("div",{staticClass:"tab-pane fade show",attrs:{id:"list-multiple",role:"tabpanel","aria-labelledby":"list-multiple-list"}},[r("form",{on:{submit:function(t){return t.preventDefault(),e.createMultiple(t)}}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"form-control-label"},[e._v("Login")]),r("div",{staticClass:"input-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.baseLogin,expression:"baseLogin"},{name:"validate",rawName:"v-validate",value:"required|min:3|max:"+(20-String(e.qty).length)+"|iotlabLogin|checkDuplicate",expression:"`required|min:3|max:${20-String(qty).length}|iotlabLogin|checkDuplicate`"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("login")},attrs:{type:"text",placeholder:"login",name:"login","data-vv-delay":"400"},domProps:{value:e.baseLogin},on:{input:function(t){t.target.composing||(e.baseLogin=t.target.value)}}}),r("span",{staticClass:"input-group-addon",domProps:{textContent:e._s("1 to "+e.qty)}})]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("login"),expression:"errors.has('login')"}],staticClass:"invalid-feedback",style:{display:e.errors.has("login")?"none":"block"}},[e._v("\n                      "+e._s(e.errors.first("login"))+"\n                    ")])])]),r("div",{staticClass:"col-6 col-lg-4"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"form-control-label"},[e._v("How many accounts?")]),r("div",{staticClass:"input-group"},[r("span",{staticClass:"input-group-btn"},[r("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button",disabled:e.qty<=2},on:{click:function(t){e.qty--}}},[r("i",{staticClass:"fa fa-minus"})])]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.qty,expression:"qty"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.qty},on:{input:function(t){t.target.composing||(e.qty=t.target.value)}}}),r("span",{staticClass:"input-group-btn"},[r("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(t){e.qty++}}},[r("i",{staticClass:"fa fa-plus"})])])])])])]),r("user-form",{ref:"users",attrs:{user:e.users,admin:!0,hidden:["firstName","lastName","email","password"]}}),r("div",{staticClass:"form-group"},[r("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[e._v("Create accounts")]),r("button",{staticClass:"btn btn-secondary ml-1",attrs:{type:"reset"},on:{click:function(t){e.$refs.users.clean(),e.baseLogin="",e.$validator.reset()}}},[e._v("Clear")])])],1)])])])])])},Ft=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"col-md-3 mb-4"},[r("div",{staticClass:"list-group",attrs:{id:"list-tab",role:"tablist"}},[r("a",{staticClass:"list-group-item list-group-item-action active",attrs:{id:"list-single-list","data-toggle":"list",href:"#list-single",role:"tab","aria-controls":"single"}},[r("i",{staticClass:"fa fa-fw fa-user",attrs:{"aria-hidden":"true"}}),e._v(" Single account\n        ")]),r("a",{staticClass:"list-group-item list-group-item-action",attrs:{id:"list-multiple-list","data-toggle":"list",href:"#list-multiple",role:"tab","aria-controls":"multiple"}},[r("i",{staticClass:"fa fa-fw fa-users",attrs:{"aria-hidden":"true"}}),e._v(" Multiple accounts\n        ")])])])}],Pt={name:"AdminAddUser",components:{UserForm:Ge},created:function(){var e=this;n["a"].extend("iotlabLogin",{getMessage:function(e){return"Must be a valid iotlab login (use only a-z & 0-9 characters)."},validate:function(t){return/^[a-z][a-z0-9]{3,19}$/.test(t+String(e.qty))}}),n["a"].extend("checkDuplicate",{getMessage:function(e){return"This login already exists."},validate:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.getUserInfo(t+"1");case 3:return e.abrupt("return",!1);case 6:return e.prev=6,e.t0=e["catch"](0),e.abrupt("return",!0);case 9:case"end":return e.stop()}},e,this,[[0,6]])}));return function(t){return e.apply(this,arguments)}}()})},data:function(){return{user:{sshkeys:[""]},users:{sshkeys:[""],groups:["training"],motivations:"# created by ".concat(Z.username," for <DESCRIBE THE EVENT>")},qty:3,baseLogin:"",showQty:!1}},watch:{qty:function(e){this.qty=parseInt(e)||1}},methods:{createSingle:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.user.validate();case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,this.user.status="active",e.next=8,J.signup(this.user);case 8:this.$notify({text:"User created",type:"success"}),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](4),this.$notify({text:e.t0.response.data.message,type:"error"});case 14:case"end":return e.stop()}},e,this,[[4,11]])}));return function(){return e.apply(this,arguments)}}(),createMultiple:function(){var e=this;this.$validator.validateAll().then(function(){var t=Object(W["a"])(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.users.validate();case 2:if(t.t0=!t.sent,t.t0){t.next=5;break}t.t0=!r;case 5:if(!t.t0){t.next=7;break}return t.abrupt("return");case 7:return t.prev=7,e.users.login=e.baseLogin,t.next=11,J.signup(e.users,e.qty);case 11:e.$notify({text:"".concat(e.qty," users created"),type:"success"}),t.next=17;break;case 14:t.prev=14,t.t1=t["catch"](7),e.$notify({text:"An error occured",type:"error"});case 17:case"end":return t.stop()}},t,this,[[7,14]])}));return function(e){return t.apply(this,arguments)}}())}}},Ot=Pt,Mt=Object(G["a"])(Ot,Et,Ft,!1,null,null,null);Mt.options.__file="AdminAddUser.vue";var Dt,Tt=Mt.exports,Ut=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container mt-3"},[r("h4",[e._v("All experiments\n    "),e.username?r("span",[e._v("for user "),r("span",{staticClass:"text-muted"},[e._v(e._s(e.username))])]):e._e()]),void 0!=e.total.running?r("p",[r("span",{staticClass:"badge badge-pill badge-success"},[e._v(e._s(e.total.running))]),e._v(" Running\n    "),r("span",{staticClass:"badge badge-pill badge-warning"},[e._v(e._s(e.total.upcoming))]),e._v(" Scheduled\n    "),r("span",{staticClass:"badge badge-pill badge-dark"},[e._v(e._s(e.total.terminated))]),e._v(" Completed\n  ")]):r("p",[r("span",{staticClass:"badge badge-pill badge-success"},[e._v("?")]),e._v(" Running\n    "),r("span",{staticClass:"badge badge-pill badge-warning"},[e._v("?")]),e._v(" Scheduled\n    "),r("span",{staticClass:"badge badge-pill badge-dark"},[e._v("?")]),e._v(" Completed\n  ")]),r("experiment-list",{ref:"runningExpList",attrs:{title:"Scheduled",user:e.username,state:"all_scheduled"},on:{completed:e.updateTotal}}),e.total.terminated?[r("experiment-list",{attrs:{title:"Recent",user:e.username,state:"all_terminated",show:20,total:e.total.terminated,step:100},on:{started:e.refreshRunning,loaded:function(t){e.spinner=!1}}})]:e._e(),e.spinner?[r("i",{staticClass:"fa fa-spinner fa-spin fa-fw mr-1"}),r("i",[e._v("loading experiments")])]:e._e()],2)},It=[],zt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.title&&e.experiments.length?r("h4",{staticClass:"text-secondary"},[e._v(e._s(e.title))]):e._e(),e.experiments.length?r("table",{staticClass:"table table-striped table-sm"},[r("thead",[r("tr",[r("th",{staticClass:"cursor",attrs:{title:"sort by id"},on:{click:function(t){e.sortBy(function(e){return e.id})}}},[e._v("Id")]),"@self"!=e.user?r("th",{staticClass:"cursor",attrs:{title:"sort by user"},on:{click:function(t){e.sortBy(function(e){return e.user})}}},[e._v("User")]):e._e(),r("th",{staticClass:"cursor",attrs:{title:"sort by name"},on:{click:function(t){e.sortBy(function(e){return e.name})}}},[e._v("Name")]),r("th",{staticClass:"cursor",attrs:{title:"sort by date"},on:{click:function(t){e.sortBy(function(t){return e.expDate(t)})}}},[e._v("Date")]),r("th",{staticClass:"cursor",staticStyle:{"text-align":"center"},attrs:{title:"sort by duration"},on:{click:function(t){e.sortBy(function(t){return e.expDuration(t)})}}},[e._v("Duration")]),r("th",{staticClass:"cursor",staticStyle:{"text-align":"right"},attrs:{title:"sort by nodes"},on:{click:function(t){e.sortBy(function(e){return e.nb_nodes})}}},[e._v("Nodes")]),r("th",{staticClass:"cursor",staticStyle:{"text-align":"right"},attrs:{title:"sort by state"},on:{click:function(t){e.sortBy(function(e){return e.state})}}},[e._v("State")]),r("th",{attrs:{width:"10px"}})])]),r("tbody",[e._l(e.experiments,function(t){return r("tr",[r("td",[r("router-link",{attrs:{to:{name:"experimentDetails",params:{id:t.id}}}},[e._v(e._s(t.id))])],1),"@self"!=e.user?r("td",[r("router-link",{attrs:{to:{name:"users",query:{search:t.user}}}},[e._v(e._s(t.user))])],1):e._e(),r("td",{domProps:{innerHTML:e._s(e.allowBreak(t.name))}}),r("td",{attrs:{title:e.showEnding(t)}},[e._v(e._s(e._f("formatDateTime")(e.expDate(t))))]),r("td",{class:{durationProgress:e.showProgress(t)},style:"text-align: center; --progress: "+e.experimentProgress(t)+"%",attrs:{title:e.showRemaining(t)}},[e._v("\n          "+e._s(e._f("humanizeDuration")(e.expDuration(t)))+"\n          "),e.showProgress(t)?r("small",{staticClass:"text-dark"},[e._v("("+e._s(e.experimentProgress(t))+"%)")]):e._e()]),r("td",{staticStyle:{"text-align":"right"}},[e._v(e._s(t.nb_nodes))]),r("td",{staticStyle:{"text-align":"right"}},[r("span",{staticClass:"badge badge-state",class:e._f("stateBadgeClass")(t.state)},[e._v(e._s(t.state))])]),r("td",[r("div",{staticClass:"dropdown"},[r("button",{staticClass:"btn-link border-0 text-secondary dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}}),r("div",{staticClass:"dropdown-menu dropdown-menu-right"},[r("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"experimentDetails",params:{id:t.id}}}},[r("i",{staticClass:"fa fa-fw fa-eye"}),e._v(" View details\n              ")]),e.expStates.stoppable.includes(t.state)?r("a",{staticClass:"dropdown-item text-danger",attrs:{href:""},on:{click:function(r){r.preventDefault(),e.stopExperiment(t)}}},["Running"===t.state?[r("i",{staticClass:"fa fa-fw fa-stop-circle"}),e._v(" Stop\n                ")]:[r("i",{staticClass:"fa fa-fw fa-ban"}),e._v(" Cancel\n                ")]],2):e._e(),t.user===e.currentUser?["Waiting"===t.state?r("a",{staticClass:"dropdown-item",attrs:{href:""},on:{click:function(r){r.preventDefault(),e.startExperiment(t)}}},[r("i",{staticClass:"fa fa-fw fa-play"}),e._v(" Start\n                ")]):e._e(),e.expStates.completed.includes(t.state)?r("a",{staticClass:"dropdown-item",attrs:{href:""},on:{click:function(r){r.preventDefault(),e.reloadExperiment(t)}}},[r("i",{staticClass:"fa fa-fw fa-refresh"}),e._v(" Restart\n                ")]):e._e()]:e._e()],2)])])])}),r("tr",{directives:[{name:"show",rawName:"v-show",value:!e.spinner&&0===e.experiments.length,expression:"!spinner && experiments.length === 0"}]},[r("td",{staticClass:"font-italic",attrs:{colspan:"7"}},[e._v("No items to display")])])],2),e.total>e.experiments.length&&!e.spinner?r("tfoot",[r("tr",[r("td",{staticClass:"font-italic cursor btn-link",attrs:{colspan:"7"},on:{click:function(t){e.loadMore(e.step)}}},[e._v("Load more...")])])]):e._e()]):e._e(),r("div",{directives:[{name:"show",rawName:"v-show",value:e.spinner,expression:"spinner"}]},[r("i",{staticClass:"fa fa-spinner fa-spin fa-fw mr-1"}),r("i",[e._v("loading experiments")])])])},Bt=[],Lt=function(e){switch(e=e.split(":")[0].toLowerCase(),e){case"a8":case"rpi3":case"pycom":case"lora-gw":case"rtl-sdr":return[];case"wsn430":return["hex","ihex"];default:return["elf"]}},Gt=function(e){return e.split(":")[0]},qt=function(e){return e.split("-")[0]},Ht={all:"Terminated,Stopped,Error,Running,Finishing,Resuming,toError,Waiting,Launching,Hold,toLaunch,toAckReservation,Suspended".split(","),scheduled:"Running,Finishing,Resuming,toError,Waiting,Launching,Hold,toLaunch,toAckReservation,Suspended".split(","),completed:"Terminated,Stopped,Error".split(","),stoppable:"Running,Launching,Waiting".split(",")},Wt=!1,Yt={name:"ExperimentList",props:{title:{type:String,default:""},user:{type:String},state:{type:String},total:{type:Number,default:0},show:{type:Number,default:500},step:{type:Number,default:40},loader:{type:Boolean,default:!1}},data:function(){return{currentUser:Z.username,spinner:!1,states:[],expStates:Ht,experiments:[]}},created:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.states=this.state.split(","),"all_scheduled"===this.state&&(this.states=Ht.scheduled),"all_terminated"===this.state&&(this.states=Ht.completed),this.createPolling(),e.next=6,this.loadMore(this.show,this.loader);case 6:this.$emit("loaded");case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),destroyed:function(){this.destroyPolling()},computed:{hasPolling:function(){return this.states.some(function(e){return Ht.scheduled.includes(e)})}},watch:{total:function(e,t){this.refresh(e-t)}},methods:{allowBreak:function(e){return e.replace(/_/g,"_<wbr>")},showProgress:function(e){return"Running"===e.state},showEnding:function(e){if(this.showProgress(e))return"ending ".concat(this.$options.filters.formatDateTime(e.start_date,e.submitted_duration))},showRemaining:function(e){if(this.showProgress(e))return"remaining ".concat(this.$options.filters.humanizeDuration(e.submitted_duration-e.effective_duration))},experimentProgress:function(e){return Ht.completed.includes(e.state)?0:Math.min(100,Math.round(100*e.effective_duration/e.submitted_duration))},expDate:function(e){return[e.start_date,e.scheduled_date,e.submission_date].find(function(e){return"1970-01-01T00:00:00Z"!==e})},expDuration:function(e){return e.effective_duration||e.submitted_duration},sortBy:function(e){this.experiments=this.experiments.sort(function(t,r){return e(t)===e(r)?r.id-t.id:"string"===typeof e(t)||"string"===typeof e(r)?e(r).localeCompare(e(t)):"number"===typeof e(t)||"number"===typeof e(r)?e(r)-e(t):void console.log("Unhandled sort criteria",t.id,e(t),r.id,e(r))})},loadMore:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){var r,a=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=!(a.length>1&&void 0!==a[1])||a[1],r&&(this.spinner=!0),e.prev=2,e.t0=this.experiments,e.next=6,J.getAllExperiments({user:this.user,state:this.states.join(","),offset:Math.max(this.total-this.experiments.length-t,0),limit:Math.min(this.total-this.experiments.length,t)});case 6:e.t1=function(e,t){return t.id-e.id},e.t2=e.sent.sort(e.t1),this.experiments=e.t0.concat.call(e.t0,e.t2),e.next=14;break;case 11:e.prev=11,e.t3=e["catch"](2),this.$notify({text:"Failed to fetch experiments",type:"error"});case 14:r&&(this.spinner=!1);case 15:case"end":return e.stop()}},e,this,[[2,11]])}));return function(t){return e.apply(this,arguments)}}(),refresh:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){var t,r,a=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:0,console.debug("refresh"),r=this.experiments,e.prev=3,e.next=6,J.getAllExperiments({user:this.user,state:this.states.join(","),offset:Math.max(this.total-this.experiments.length-t,0),limit:Math.max(this.experiments.length,this.show)+t});case 6:e.t0=function(e,t){return t.id-e.id},this.experiments=e.sent.sort(e.t0),e.next=16;break;case 10:e.prev=10,e.t1=e["catch"](3),this.$notify({text:"Failed to fetch experiments",type:"error"}),Wt=!0,this.$notify({text:"Dashboard refresh stopped due to an error, do a manual refresh to retry",type:"info",duration:-1,group:"alt"}),this.stopPolling();case 16:this.experiments.length<r.length&&this.$emit("completed");case 17:case"end":return e.stop()}},e,this,[[3,10]])}));return function(){return e.apply(this,arguments)}}(),pollingLoop:function(){this.hasPolling&&!Wt&&this.refresh()},stopPolling:function(){console.debug("polling stopped"),Dt=clearInterval(Dt)},disablePolling:function(){Wt||(Wt=!0,this.$notify({text:"Dashboard refresh paused",type:"info",duration:-1,group:"alt"}))},enablePolling:function(){Wt=!1,this.$notify({group:"alt",clean:!0})},createPolling:function(){var e=this;this.hasPolling&&!Dt&&(console.debug("polling started"),Dt=setInterval(function(){return e.pollingLoop()},5e3),addEventListener("blur",this.disablePolling),addEventListener("focus",this.enablePolling))},destroyPolling:function(){Dt&&(this.enablePolling(),this.stopPolling(),removeEventListener("blur",this.disablePolling),removeEventListener("focus",this.enablePolling))},stopExperiment:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){var r,a=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=a.length>1&&void 0!==a[1]&&a[1],r||confirm("Cancel this experiment?")){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,J.stopExperiment(t.id);case 6:this.$notify({text:"Experiment ".concat(t.id," stopping"),type:"success"}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](3),this.$notify({text:e.t0.response.data.message||"Failed to stop experiment",type:"error"});case 12:case"end":return e.stop()}},e,this,[[3,9]])}));return function(t){return e.apply(this,arguments)}}(),startExperiment:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(confirm("Resubmit now and cancel this experiment?")){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.stopExperiment(t,!0);case 4:return e.next=6,this.reloadExperiment(t);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),reloadExperiment:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.reloadExperiment(t.id);case 3:return r=e.sent,this.$notify({text:"Experiment ".concat(r.id," submitted"),type:"success"}),e.next=7,g(200);case 7:this.$emit("started"),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),this.$notify({text:e.t0.response.data.message||"Failed to reload experiment",type:"error"});case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(t){return e.apply(this,arguments)}}()}},Kt=Yt,Vt=(r("8670"),r("03a7"),Object(G["a"])(Kt,zt,Bt,!1,null,"3c4a97cc",null));Vt.options.__file="ExperimentList.vue";var Jt=Vt.exports,Zt={name:"AdminExperiments",components:{ExperimentList:Jt},props:{username:{type:String,default:function(){return""}}},data:function(){return{total:{},spinner:!0}},created:function(){this.updateTotal()},methods:{updateTotal:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,J.getAllExperimentsCount(this.username);case 2:this.total=e.sent,0===this.total.terminated&&(this.spinner=!1);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),refreshRunning:function(){this.$refs.runningExpList.refresh()}}},Xt=Zt,Qt=Object(G["a"])(Xt,Ut,It,!1,null,null,null);Qt.options.__file="AdminExperiments.vue";var er=Qt.exports,tr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container my-3"},[e._m(0),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-3 mb-4"},[r("div",{staticClass:"list-group",attrs:{id:"list-tab",role:"tablist"}},[r("router-link",{staticClass:"list-group-item list-group-item-action",attrs:{to:{name:"listMonitoring"},"active-class":"active"}},[r("i",{staticClass:"fa fa-fw fa-thermometer",attrs:{"aria-hidden":"true"}}),e._v(" Monitoring profiles\n        ")]),r("router-link",{staticClass:"list-group-item list-group-item-action",attrs:{to:{name:"listFirmware"},"active-class":"active"}},[r("i",{staticClass:"fa fa-fw fa-microchip",attrs:{"aria-hidden":"true"}}),e._v(" Firmwares\n        ")])],1)]),r("div",{staticClass:"col-md-9"},[r("div",{staticClass:"tab-content",attrs:{id:"nav-tabContent"}},[r("router-view")],1)])])])},rr=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h2",{staticClass:"d-none d-sm-block d-md-none"},[r("i",{staticClass:"fa fa-fw fa-folder-open",attrs:{"aria-hidden":"true"}}),e._v(" My resources\n  ")])}],ar={},nr=Object(G["a"])(ar,tr,rr,!1,null,null,null);nr.options.__file="Resources.vue";var sr=nr.exports,ir=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-7"},[e.name?r("button",{staticClass:"btn btn-sm btn-outline-danger float-right",attrs:{type:"button"},on:{click:e.deleteProfile}},[e._v("Delete")]):e._e(),e.name?r("h5",[r("i",{staticClass:"fa fa-pencil"}),e._v(" Edit monitoring profile")]):r("h5",[r("i",{staticClass:"fa fa-pencil"}),e._v(" New monitoring profile")]),r("monitoring-form",{attrs:{"monitoring-profile":e.profile}})],1)])])},or=[],cr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{staticClass:"mt-3",on:{submit:function(t){return t.preventDefault(),e.updateProfile(t)}}},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"mr-3 my-label"},[e._v("Name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.profile.profilename,expression:"profile.profilename"}],ref:"name",staticClass:"form-control",class:{"is-invalid":!e.nameValidation},staticStyle:{"max-width":"300px",display:"inline-block"},attrs:{type:"text",placeholder:"Profile name"},domProps:{value:e.profile.profilename},on:{input:function(t){t.target.composing||e.$set(e.profile,"profilename",t.target.value)}}}),r("div",{staticClass:"invalid-feedback"},[e._v("\n      Invalid name. Only alphanumeric characters allowed [0-9A-Za-z_]\n    ")])]),r("div",{staticClass:"form-group"},[r("label",{staticClass:"mr-3 my-label"},[e._v("Architecture")]),r("label",{staticClass:"custom-control custom-radio"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.profile.nodearch,expression:"profile.nodearch"}],staticClass:"custom-control-input",attrs:{name:"radio-archi",type:"radio",value:"m3"},domProps:{checked:e._q(e.profile.nodearch,"m3")},on:{change:function(t){e.$set(e.profile,"nodearch","m3")}}}),r("span",{staticClass:"custom-control-indicator"}),r("span",{staticClass:"custom-control-description"},[e._v("M3")])]),r("label",{staticClass:"custom-control custom-radio"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.profile.nodearch,expression:"profile.nodearch"}],staticClass:"custom-control-input",attrs:{name:"radio-archi",type:"radio",value:"a8"},domProps:{checked:e._q(e.profile.nodearch,"a8")},on:{change:function(t){e.$set(e.profile,"nodearch","a8")}}}),r("span",{staticClass:"custom-control-indicator"}),r("span",{staticClass:"custom-control-description"},[e._v("A8")])]),r("label",{staticClass:"custom-control custom-radio"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.profile.nodearch,expression:"profile.nodearch"}],staticClass:"custom-control-input",attrs:{name:"radio-archi",type:"radio",value:"custom"},domProps:{checked:e._q(e.profile.nodearch,"custom")},on:{change:function(t){e.$set(e.profile,"nodearch","custom")}}}),r("span",{staticClass:"custom-control-indicator"}),r("span",{staticClass:"custom-control-description"},[e._v("Other")])])]),r("div",{staticClass:"form-group"},[r("label",{staticClass:"mr-3 my-label"},[e._v("Monitor")]),r("label",{staticClass:"custom-control custom-checkbox"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.showConso,expression:"showConso"}],staticClass:"custom-control-input",attrs:{name:"checkbox-monitor",type:"checkbox"},domProps:{checked:Array.isArray(e.showConso)?e._i(e.showConso,null)>-1:e.showConso},on:{change:function(t){var r=e.showConso,a=t.target,n=!!a.checked;if(Array.isArray(r)){var s=null,i=e._i(r,s);a.checked?i<0&&(e.showConso=r.concat([s])):i>-1&&(e.showConso=r.slice(0,i).concat(r.slice(i+1)))}else e.showConso=n}}}),r("span",{staticClass:"custom-control-indicator"}),e._m(0)]),r("label",{staticClass:"custom-control custom-checkbox"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.showRadio,expression:"showRadio"}],staticClass:"custom-control-input",attrs:{name:"checkbox-monitor",type:"checkbox"},domProps:{checked:Array.isArray(e.showRadio)?e._i(e.showRadio,null)>-1:e.showRadio},on:{change:function(t){var r=e.showRadio,a=t.target,n=!!a.checked;if(Array.isArray(r)){var s=null,i=e._i(r,s);a.checked?i<0&&(e.showRadio=r.concat([s])):i>-1&&(e.showRadio=r.slice(0,i).concat(r.slice(i+1)))}else e.showRadio=n}}}),r("span",{staticClass:"custom-control-indicator"}),e._m(1)])]),e.showConso?r("fieldset",{staticClass:"card bg-light pt-2 mb-3"},[r("div",{staticClass:"form-group"},[e._m(2),r("label",{staticClass:"custom-control custom-checkbox"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.profile.consumption.current,expression:"profile.consumption.current"}],staticClass:"custom-control-input",attrs:{name:"checkbox-conso",type:"checkbox"},domProps:{checked:Array.isArray(e.profile.consumption.current)?e._i(e.profile.consumption.current,null)>-1:e.profile.consumption.current},on:{change:function(t){var r=e.profile.consumption.current,a=t.target,n=!!a.checked;if(Array.isArray(r)){var s=null,i=e._i(r,s);a.checked?i<0&&e.$set(e.profile.consumption,"current",r.concat([s])):i>-1&&e.$set(e.profile.consumption,"current",r.slice(0,i).concat(r.slice(i+1)))}else e.$set(e.profile.consumption,"current",n)}}}),r("span",{staticClass:"custom-control-indicator"}),r("span",{staticClass:"custom-control-description"},[e._v("Current")])]),r("label",{staticClass:"custom-control custom-checkbox"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.profile.consumption.voltage,expression:"profile.consumption.voltage"}],staticClass:"custom-control-input",attrs:{name:"checkbox-conso",type:"checkbox"},domProps:{checked:Array.isArray(e.profile.consumption.voltage)?e._i(e.profile.consumption.voltage,null)>-1:e.profile.consumption.voltage},on:{change:function(t){var r=e.profile.consumption.voltage,a=t.target,n=!!a.checked;if(Array.isArray(r)){var s=null,i=e._i(r,s);a.checked?i<0&&e.$set(e.profile.consumption,"voltage",r.concat([s])):i>-1&&e.$set(e.profile.consumption,"voltage",r.slice(0,i).concat(r.slice(i+1)))}else e.$set(e.profile.consumption,"voltage",n)}}}),r("span",{staticClass:"custom-control-indicator"}),r("span",{staticClass:"custom-control-description"},[e._v("Voltage")])]),r("label",{staticClass:"custom-control custom-checkbox"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.profile.consumption.power,expression:"profile.consumption.power"}],staticClass:"custom-control-input",attrs:{name:"checkbox-conso",type:"checkbox"},domProps:{checked:Array.isArray(e.profile.consumption.power)?e._i(e.profile.consumption.power,null)>-1:e.profile.consumption.power},on:{change:function(t){var r=e.profile.consumption.power,a=t.target,n=!!a.checked;if(Array.isArray(r)){var s=null,i=e._i(r,s);a.checked?i<0&&e.$set(e.profile.consumption,"power",r.concat([s])):i>-1&&e.$set(e.profile.consumption,"power",r.slice(0,i).concat(r.slice(i+1)))}else e.$set(e.profile.consumption,"power",n)}}}),r("span",{staticClass:"custom-control-indicator"}),r("span",{staticClass:"custom-control-description"},[e._v("Power")])])]),r("div",{staticClass:"form-group"},[r("label",{staticClass:"mr-3 my-label"},[e._v("Period")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.profile.consumption.period,expression:"profile.consumption.period"}],staticClass:"custom-select",on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.profile.consumption,"period",t.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"140"}},[e._v("140 µs")]),r("option",{attrs:{value:"204"}},[e._v("204 µs")]),r("option",{attrs:{value:"332"}},[e._v("332 µs")]),r("option",{attrs:{value:"588"}},[e._v("588 µs")]),r("option",{attrs:{value:"1100"}},[e._v("1100 µs")]),r("option",{attrs:{value:"2116"}},[e._v("2116 µs")]),r("option",{attrs:{value:"4156"}},[e._v("4156 µs")]),r("option",{attrs:{value:"8244"}},[e._v("8244 µs")])])]),r("div",{staticClass:"form-group"},[r("label",{staticClass:"mr-3 my-label"},[e._v("Average")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.profile.consumption.average,expression:"profile.consumption.average"}],staticClass:"custom-select",attrs:{placeholder:"avg"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.profile.consumption,"average",t.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"1"}},[e._v("1")]),r("option",{attrs:{value:"4"}},[e._v("4")]),r("option",{attrs:{value:"16"}},[e._v("16")]),r("option",{attrs:{value:"64"}},[e._v("64")]),r("option",{attrs:{value:"256"}},[e._v("256")]),r("option",{attrs:{value:"128"}},[e._v("428")]),r("option",{attrs:{value:"512"}},[e._v("512")]),r("option",{attrs:{value:"1024"}},[e._v("1024")])])])]):e._e(),e.showRadio?r("fieldset",{staticClass:"card bg-light pt-2 mb-3"},[r("div",{staticClass:"form-group"},[e._m(3),r("label",{staticClass:"custom-control custom-radio"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.profile.radio.mode,expression:"profile.radio.mode"}],staticClass:"custom-control-input",attrs:{name:"radio-mode",type:"radio",value:"rssi"},domProps:{checked:e._q(e.profile.radio.mode,"rssi")},on:{change:function(t){e.$set(e.profile.radio,"mode","rssi")}}}),r("span",{staticClass:"custom-control-indicator"}),r("span",{staticClass:"custom-control-description"},[e._v("rssi")])]),r("label",{staticClass:"custom-control custom-radio"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.profile.radio.mode,expression:"profile.radio.mode"}],staticClass:"custom-control-input",attrs:{name:"radio-mode",type:"radio",value:"sniffer"},domProps:{checked:e._q(e.profile.radio.mode,"sniffer")},on:{change:function(t){e.$set(e.profile.radio,"mode","sniffer")}}}),r("span",{staticClass:"custom-control-indicator"}),r("span",{staticClass:"custom-control-description"},[e._v("sniffer")])])]),r("div",{staticClass:"form-group"},[r("label",{staticClass:"mr-3 my-label"},[e._v("Channels")]),r("multiselect",{class:{mymultiselect:!0,invalid:0===e.profile.radio.channels.length},staticStyle:{"max-width":"300px",display:"inline-block","z-index":"3"},attrs:{placeholder:"select "+("rssi"===e.profile.radio.mode?"channels":"channel"),options:[11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],"allow-empty":!0,searchable:!0,"show-labels":!1,"close-on-select":"sniffer"===e.profile.radio.mode,multiple:"rssi"===e.profile.radio.mode},model:{value:e.profile.radio.channels,callback:function(t){e.$set(e.profile.radio,"channels",t)},expression:"profile.radio.channels"}})],1),"rssi"===e.profile.radio.mode?r("div",{staticClass:"form-group"},[r("label",{staticClass:"mr-3 my-label"},[e._v("Period")]),r("div",{staticClass:"input-group",staticStyle:{display:"inline-flex","max-width":"300px"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.profile.radio.period,expression:"profile.radio.period"}],staticClass:"form-control",attrs:{type:"number",min:"1",max:"65535",step:"1"},domProps:{value:e.profile.radio.period},on:{input:function(t){t.target.composing||e.$set(e.profile.radio,"period",t.target.value)}}}),r("span",{staticClass:"input-group-addon"},[e._v("ms")])])]):e._e(),"rssi"===e.profile.radio.mode&&e.profile.radio.channels&&e.profile.radio.channels.length>1?r("div",{staticClass:"form-group"},[r("label",{staticClass:"mr-3 my-label"},[e._v("Measures")]),r("div",{staticClass:"input-group",staticStyle:{display:"inline-flex","max-width":"300px"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.profile.radio.num_per_channel,expression:"profile.radio.num_per_channel"}],attrs:{type:"range",max:"255",min:"1",step:"1"},domProps:{value:e.profile.radio.num_per_channel},on:{__r:function(t){e.$set(e.profile.radio,"num_per_channel",t.target.value)}}}),r("span",{staticClass:"xinput-group-addon"},[e._v(e._s(e.profile.radio.num_per_channel)+" per channel")])])]):e._e()]):e._e(),e._m(4)])},lr=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"custom-control-description"},[e._v("Consumption "),r("i",{staticClass:"fa fa-bolt text-muted"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"custom-control-description"},[e._v("Radio "),r("i",{staticClass:"fa fa-wifi text-muted"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{staticClass:"mr-3 my-label"},[r("i",{staticClass:"fa fa-bolt"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{staticClass:"mr-3 my-label"},[r("i",{staticClass:"fa fa-wifi"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form-group"},[r("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[e._v("Save profile")])])}],ur=r("6bde"),dr=(r("4917"),r("f751"),{name:"MonitoringForm",components:{Multiselect:Ae.a},props:{monitoringProfile:{type:Object,default:function(){}}},data:function(){return{showConso:!1,showRadio:!1,profile:{profilename:"",power:"dc",consumption:{current:!1,voltage:!1,power:!1,period:8244,average:4},radio:{mode:"rssi",channels:[11],period:1e3,num_per_channel:1}}}},mounted:function(){this.monitoringProfile.profilename||this.$refs.name.focus()},watch:{monitoringProfile:function(e){this.profile=Object.assign({},this.profile,e),this.showConso=this.profileHasConsumption(e),this.showRadio=void 0!==e.radio,this.$refs.name.blur()}},computed:{nameValidation:function(){return this.profile.profilename.match(/^[0-9A-Za-z_]*$/)}},methods:{validate:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),profileHasConsumption:function(e){return!!e.consumption&&(e.consumption.current||e.consumption.voltage||e.consumption.power)},updateProfile:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=Object.assign({},this.profile),"sniffer"===t.radio.mode?(delete t.radio.period,delete t.radio.num_per_channel,"object"===Object(ur["a"])(t.radio.channels)&&(t.radio.channels=[t.radio.channels[0]]),"number"===typeof t.radio.channels&&(t.radio.channels=[t.radio.channels])):t.radio.channels.length<2&&(t.radio.num_per_channel=0),this.showConso||delete t.consumption,this.showRadio||delete t.radio,t.profilename){e.next=8;break}return this.$notify({text:"Name is empty",type:"warning"}),this.$refs.name.focus(),e.abrupt("return");case 8:if(t.nodearch){e.next=11;break}return this.$notify({text:"Select Architecture first",type:"warning"}),e.abrupt("return");case 11:if(this.profileHasConsumption(t)||this.showRadio){e.next=15;break}return this.$notify({text:"Select something to monitor",type:"warning"}),console.log(t),e.abrupt("return");case 15:if(e.prev=15,!this.monitoringProfile.profilename){e.next=21;break}return e.next=19,J.updateMonitoringProfile(this.monitoringProfile.profilename,t);case 19:e.next=23;break;case 21:return e.next=23,J.createMonitoringProfile(t);case 23:this.$notify({text:"Profile ".concat(t.profilename," saved"),type:"success"}),this.$router.push({name:"listMonitoring"}),e.next=31;break;case 27:e.prev=27,e.t0=e["catch"](15),this.$notify({text:e.t0.response.data.message,type:"error"}),console.log(t);case 31:case"end":return e.stop()}},e,this,[[15,27]])}));return function(){return e.apply(this,arguments)}}()}}),pr=dr,mr=(r("ffd5"),Object(G["a"])(pr,cr,lr,!1,null,"71eb5555",null));mr.options.__file="MonitoringForm.vue";var fr=mr.exports,hr={name:"Monitoring",components:{MonitoringForm:fr},props:{name:{type:String,default:function(){return""}}},data:function(){return{profile:{}}},created:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.name){e.next=4;break}return e.next=3,J.getMonitoringProfile(this.name);case 3:this.profile=e.sent;case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{deleteProfile:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!confirm("Delete profile ".concat(this.name,"?"))){e.next=3;break}return e.next=3,J.deleteMonitoringProfile(this.name).then(function(e){t.$notify({text:"Profile ".concat(t.name," deleted"),type:"success"}),t.$router.push({name:"resources"})}).catch(function(e){t.$notify({text:e.response.data.message,type:"error"})});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},vr=hr,gr=Object(G["a"])(vr,ir,or,!1,null,null,null);gr.options.__file="Monitoring.vue";var br=gr.exports,wr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"text-right"},[r("router-link",{staticClass:"btn btn-sm btn-outline-success",attrs:{to:{name:"newMonitoring"}}},[r("i",{staticClass:"fa fa-plus"}),e._v(" New profile")])],1),r("table",{staticClass:"table table-striped table-sm mt-2"},[r("thead",[r("tr",[r("th",{staticClass:"cursor",attrs:{title:"sort by name"},on:{click:function(t){e.sortBy(function(e){return e.profilename})}}},[e._v("Profile")]),r("th",{staticClass:"cursor",attrs:{title:"sort by archi"},on:{click:function(t){e.sortBy(function(t){return e.nodeArchi(t)})}}},[e._v("Archi")]),r("th",[e._v("Monitor")])])]),r("tbody",[e._l(e.store.profiles,function(t){return e.filterByArchi(t)?r("tr",[r("td",[e.select?r("a",{attrs:{href:"#"},on:{click:function(r){r.preventDefault(),e.selectItem(t)}}},[e._v(e._s(t.profilename))]):r("router-link",{attrs:{to:{name:"monitoring",params:{name:t.profilename}}}},[e._v("\n            "+e._s(t.profilename)+"\n          ")])],1),r("td",[e._v(e._s(e.nodeArchi(t)))]),r("td",[t.consumption&&(t.consumption.current||t.consumption.voltage||t.consumption.power)?[r("i",{staticClass:"fa fa-bolt",attrs:{title:"consumption"}}),t.consumption.current?r("span",[e._v(" current ")]):e._e(),t.consumption.voltage?r("span",[e._v(" voltage ")]):e._e(),t.consumption.power?r("span",[e._v(" power ")]):e._e(),r("span",{staticClass:"text-muted",attrs:{title:"period, average"}},[e._v("("+e._s(t.consumption.period)+"µs, "+e._s(t.consumption.average)+")")])]:e._e(),t.radio?[r("i",{staticClass:"fa fa-wifi",attrs:{title:"radio"}}),e._v(" "+e._s(t.radio.mode)+"\n            "),r("span",{staticClass:"text-muted",attrs:{title:"channel"}},[e._v("("+e._s(t.radio.channels.join(","))+")")])]:e._e()],2)]):e._e()}),0===e.store.profiles.length?r("tr",[r("td",{staticClass:"font-italic bg-light",attrs:{colspan:"3"}},[r("router-link",{staticClass:"fsont-italic",attrs:{to:{name:"newMonitoring"}}},[e._v("create a monitoring profile")])],1)]):e._e()],2)])])},yr=[],_r={name:"MonitoringList",props:{archi:{type:String,default:""},select:{type:Boolean,default:!1}},data:function(){return{store:Ie}},created:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.getMonitoringProfiles();case 3:e.t0=function(e,t){return e.profilename.localeCompare(t.profilename)},this.store.profiles=e.sent.sort(e.t0),e.next=10;break;case 7:e.prev=7,e.t1=e["catch"](0),this.$notify({text:"Failed to load profiles",type:"error"});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),methods:{sortBy:function(e){this.store.profiles=this.store.profiles.sort(function(t,r){return e(t)===e(r)?t.profilename.localeCompare(r.profilename):e(t).localeCompare(e(r))})},nodeArchi:function(e){return e.nodearch.replace("custom","other")},filterByArchi:function(e){switch(this.archi){case"":return!0;case"a8":return"a8"===e.nodearch;case"m3":return"m3"===e.nodearch;default:return"custom"===e.nodearch}},selectItem:function(e){this.$emit("select",e.profilename)}}},xr=_r,Cr=(r("1fe3"),Object(G["a"])(xr,wr,yr,!1,null,"1696b843",null));Cr.options.__file="MonitoringList.vue";var kr=Cr.exports,Sr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[e.name?r("button",{directives:[{name:"show",rawName:"v-show",value:!e.readOnly,expression:"!readOnly"}],staticClass:"btn btn-sm btn-outline-danger float-right",attrs:{type:"button"},on:{click:e.deleteFirmware}},[e._v("Delete")]):e._e(),e.name&&!e.readOnly?r("h5",[r("i",{staticClass:"fa fa-pencil"}),e._v(" Edit firmware")]):e.name&&e.readOnly?r("h5",[r("i",{staticClass:"fa fa-microchip"}),e._v(" View firmware")]):r("h5",[r("i",{staticClass:"fa fa-pencil"}),e._v(" New firmware")]),r("firmware-form",{attrs:{firmware:e.firmware,"read-only":e.readOnly}})],1)])])},Ar=[],Nr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{staticClass:"mt-3",on:{submit:function(t){return t.preventDefault(),e.saveFirmware(t)}}},[r("div",{staticClass:"form-group"},[r("label",[e._v("File")]),e.firmware.filename?r("div",{staticClass:"mb-2"},[r("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.download(t)}}},[r("i",{staticClass:"fa fa-download"}),e._v(" "+e._s(e.firmware.filename))])]):e._e(),e.readOnly?e._e():r("label",{staticClass:"custom-file"},[r("input",{ref:"firmwareFile",staticClass:"custom-file-input",attrs:{type:"file",id:"file"},on:{change:e.uploadFirmware}}),r("span",{staticClass:"custom-file-control"},[e._v(e._s(e.firmwareFile&&e.firmwareFile.name))])])]),r("div",{staticClass:"form-group"},[r("label",[e._v("Identifier")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.firmwareForm.name,expression:"firmwareForm.name"},{name:"validate",rawName:"v-validate",value:"required|alpha_dash",expression:"'required|alpha_dash'"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("name")},attrs:{type:"text",name:"name",placeholder:"Unique identifier name",disabled:e.readOnly},domProps:{value:e.firmwareForm.name},on:{input:function(t){t.target.composing||e.$set(e.firmwareForm,"name",t.target.value)}}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("name"),expression:"errors.has('name')"}],staticClass:"invalid-feedback"},[e._v("\n      "+e._s(e.errors.first("name"))+"\n    ")])]),r("div",{staticClass:"form-group"},[e._m(0),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.firmwareForm.description,expression:"firmwareForm.description"}],staticClass:"form-control",attrs:{rows:"3",name:"description",placeholder:"Description",disabled:e.readOnly},domProps:{value:e.firmwareForm.description},on:{input:function(t){t.target.composing||e.$set(e.firmwareForm,"description",t.target.value)}}})]),r("div",{staticClass:"form-group"},[e._m(1),r("input",{directives:[{name:"model",rawName:"v-model",value:e.firmwareForm.os,expression:"firmwareForm.os"}],staticClass:"form-control",attrs:{type:"text",name:"os",placeholder:"OS",disabled:e.readOnly},domProps:{value:e.firmwareForm.os},on:{input:function(t){t.target.composing||e.$set(e.firmwareForm,"os",t.target.value)}}})]),r("div",{staticClass:"form-group"},[e._m(2),r("multiselect",{class:{mymultiselect:!0},attrs:{disabled:e.readOnly,placeholder:"Select architecture",options:e.archis},model:{value:e.firmwareForm.archi,callback:function(t){e.$set(e.firmwareForm,"archi",t)},expression:"firmwareForm.archi"}})],1),e.readOnly?e._e():r("div",{staticClass:"form-group"},[r("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[e._v("Save")])])])},Rr=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",[e._v("Description "),r("span",{staticClass:"text-muted"},[e._v("(optional)")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",[e._v("Operating system "),r("span",{staticClass:"text-muted"},[e._v("(optional)")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",[e._v("Architecture "),r("span",{staticClass:"text-muted"},[e._v("(optional)")])])}],$r=(r("1c4c"),{name:"FirmwareForm",components:{Multiselect:Ae.a},props:{firmware:{type:Object,default:function(){}},readOnly:{type:Boolean,default:!1}},data:function(){return{firmwareForm:{},firmwareFile:void 0,archis:[]}},created:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=Array,e.next=4,J.getSitesDetails();case 4:e.t1=function(e,t){return t.archis.map(function(t){return e.add(Gt(t.archi))}),e},e.t2=new Set,e.t3=e.sent.reduce(e.t1,e.t2),e.t4=function(e,t){return e.localeCompare(t)},this.archis=e.t0.from.call(e.t0,e.t3).sort(e.t4),e.next=14;break;case 11:e.prev=11,e.t5=e["catch"](0),this.$notify({text:e.t5.response.data.message||"Failed to fetch archis",type:"error"});case 14:case"end":return e.stop()}},e,this,[[0,11]])}));return function(){return e.apply(this,arguments)}}(),mounted:function(){this.firmware.name||this.$refs.firmwareFile.focus()},watch:{firmware:function(e){this.firmwareForm=Object.assign({},this.firmwareForm,this.firmware),this.$refs.firmwareFile.blur()}},methods:{download:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=S,e.t1=this.firmware.filename,e.next=5,J.getFirmwareFile(this.firmware.name);case 5:e.t2=e.sent,(0,e.t0)(e.t1,e.t2),e.next=12;break;case 9:e.prev=9,e.t3=e["catch"](0),this.$notify({text:e.t3.response.data.message||"Failed to download file",type:"error"});case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(){return e.apply(this,arguments)}}(),uploadFirmware:function(){this.$notify({text:"Uploading file...",type:"info",duration:-1}),this.firmwareFile=this.$refs.firmwareFile.files[0];var e=new FileReader;e.onload=function(e,t){return function(){var r=Object(W["a"])(regeneratorRuntime.mark(function r(a){return regeneratorRuntime.wrap(function(r){while(1)switch(r.prev=r.next){case 0:t.$notify({clean:!0}),e.bin=a.target.result,t.firmwareFile=e,t.firmwareForm.filename=e.name,/^[0-9A-Za-z_-]+(\.[0-9A-Za-z_-]+)?$/.test(e.name)?(t.$notify({text:"File uploaded",type:"info"}),t.firmwareForm.name||(t.firmwareForm.name=e.name.replace(/\.[^.$]+$/,""),t.$forceUpdate())):t.$notify({text:"Invalid file name format. Only alphanumeric characters allowed [0-9A-Za-z_]",type:"error"});case 5:case"end":return r.stop()}},r,this)}));return function(e){return r.apply(this,arguments)}}()}(this.firmwareFile,this),e.readAsDataURL(this.firmwareFile)},saveFirmware:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!this.firmware.name){e.next=12;break}if(!this.firmwareFile||!this.firmwareFile.name){e.next=8;break}return this.$notify({text:"Updating firmware...",type:"info",duration:-1}),e.next=6,J.updateFirmware(this.firmware.name,this.firmwareForm,this.firmwareFile.bin);case 6:e.next=10;break;case 8:return e.next=10,J.updateFirmware(this.firmware.name,this.firmwareForm);case 10:e.next=18;break;case 12:if(this.firmwareFile&&this.firmwareFile.name){e.next=15;break}return this.$notify({text:"Select firmware file first",type:"warning"}),e.abrupt("return");case 15:return this.$notify({text:"Creating firmware...",type:"info",duration:-1}),e.next=18,J.createFirmware(this.firmwareForm,this.firmwareFile.bin);case 18:this.$notify({clean:!0}),this.$notify({text:"firmware ".concat(this.firmwareForm.name," saved"),type:"success"}),this.$router.push({name:"listFirmware"}),e.next=27;break;case 23:e.prev=23,e.t0=e["catch"](0),this.$notify({clean:!0}),this.$notify({text:e.t0.response.data.message||"An error occured",type:"error"});case 27:case"end":return e.stop()}},e,this,[[0,23]])}));return function(){return e.apply(this,arguments)}}()}}),jr=$r,Er=(r("7b7c"),Object(G["a"])(jr,Nr,Rr,!1,null,"78c6bfa7",null));Er.options.__file="FirmwareForm.vue";var Fr=Er.exports,Pr={name:"Firmware",components:{FirmwareForm:Fr},props:{name:{type:String,default:function(){return""}}},data:function(){return{firmware:{},readOnly:!0}},created:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.name){e.next=7;break}return e.next=3,J.getFirmware(this.name);case 3:this.firmware=e.sent,this.readOnly="userdefined"!==this.firmware.type,e.next=8;break;case 7:this.readOnly=!1;case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{deleteFirmware:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!confirm("Delete firmware ".concat(this.name,"?"))){e.next=3;break}return e.next=3,J.deleteFirmware(this.name).then(function(e){t.$notify({text:"Firmware ".concat(t.name," deleted"),type:"success"}),t.$router.push({name:"resources"})}).catch(function(e){t.$notify({text:e.response.data.message,type:"error"})});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},Or=Pr,Mr=Object(G["a"])(Or,Sr,Ar,!1,null,null,null);Mr.options.__file="Firmware.vue";var Dr=Mr.exports,Tr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("router-link",{staticClass:"btn btn-sm btn-outline-success float-right",attrs:{to:{name:"newFirmware"}}},[r("i",{staticClass:"fa fa-plus"}),e._v(" New firmware")]),r("ul",{staticClass:"nav nav-tabs",staticStyle:{position:"relative",top:"1px"}},[r("li",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:"User firmwares",expression:"'User firmwares'",arg:"top"}],staticClass:"nav-item"},[r("a",{staticClass:"nav-link active",attrs:{"data-toggle":"list",href:"#userdefined",role:"tab","aria-controls":"userdefined"},on:{click:function(t){e.filterType="userdefined"}}},[e._v(" My firmwares ")])]),r("li",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:"Predefined firmwares",expression:"'Predefined firmwares'",arg:"top"}],staticClass:"nav-item"},[r("a",{staticClass:"nav-link",attrs:{"data-toggle":"list",href:"#predefined",role:"tab","aria-controls":"predefined"},on:{click:function(t){e.filterType="predefined"}}},[e._v(" Presets ")])])]),r("table",{staticClass:"table table-striped table-sm"},[r("thead",[r("tr",[r("th",{staticClass:"cursor",attrs:{title:"sort by identifier"},on:{click:function(t){e.sortBy(function(e){return e.name})}}},[e._v("Identifier")]),r("th",{staticClass:"cursor",attrs:{title:"sort by archi"},on:{click:function(t){e.sortBy(function(e){return e.archi||""})}}},[e._v("Archi")]),r("th",{staticClass:"cursor",attrs:{title:"sort by OS"},on:{click:function(t){e.sortBy(function(e){return e.os||""})}}},[e._v("OS")]),r("th",{staticClass:"cursor",attrs:{title:"sort by description"},on:{click:function(t){e.sortBy(function(e){return e.description||""})}}},[e._v("Description")]),r("th",{attrs:{width:"15"}},[r("i",{directives:[{name:"tooltip",rawName:"v-tooltip:bottom",value:"Download",expression:"'Download'",arg:"bottom"}],staticClass:"fa fa-download"})])])]),r("tbody",[e._l(e.store.firmwares,function(t){return e.filter(t)?r("tr",[r("td",[e.select?r("a",{attrs:{href:"#"},on:{click:function(r){r.preventDefault(),e.selectItem(t)}}},[e._v(e._s(t.name))]):r("router-link",{attrs:{to:{name:"firmware",params:{name:t.name}}}},[e._v("\n            "+e._s(t.name)+"\n          ")])],1),r("td",[e._v(e._s(t.archi))]),r("td",[e._v(e._s(t.os))]),r("td",{staticClass:"ellipsis",attrs:{title:t.description}},[e._v(e._s(t.description))]),r("td",[r("a",{directives:[{name:"tooltip",rawName:"v-tooltip:bottom.html",value:"<i class='fa fa-download'></i> <b>"+t.filename+"</b>",expression:"`<i class='fa fa-download'></i> <b>${firmware.filename}</b>`",arg:"bottom",modifiers:{html:!0}}],attrs:{href:"#"},on:{click:function(r){r.preventDefault(),e.download(t)}}},[r("i",{staticClass:"fa fa-file-o"})])])]):e._e()}),0===e.store.firmwares.length?r("tr",[r("td",{staticClass:"font-italic bg-light",attrs:{colspan:"4"}},[r("router-link",{attrs:{to:{name:"newFirmware"}}},[e._v("upload a firmware")])],1)]):e._e()],2)])],1)},Ur=[],Ir={name:"FirmwareList",props:{archi:{type:[String,Array],default:""},select:{type:Boolean,default:!1}},data:function(){return{store:Ie,filterType:"userdefined"}},created:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.getFirmwares();case 3:Ie.firmwares=e.sent,this.sortBy(function(e){return e.archi||"zzz"}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$notify({text:"Failed to load firmwares",type:"error"});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),methods:{sortBy:function(e){Ie.firmwares=Ie.firmwares.sort(function(t,r){return e(t)===e(r)?t.name.localeCompare(r.name):e(t).localeCompare(e(r))})},filter:function(e){if(e.type!==this.filterType)return!1;if(""===this.archi)return!0;var t="string"===typeof this.archi?Array(this.archi):this.archi;return t.includes(e.archi)},selectItem:function(e){this.$emit("select",e.name)},download:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=S,e.t1=t.filename,e.next=5,J.getFirmwareFile(t.name);case 5:e.t2=e.sent,(0,e.t0)(e.t1,e.t2),e.next=12;break;case 9:e.prev=9,e.t3=e["catch"](0),this.$notify({text:e.t3.response.data.message||"Failed to download file",type:"error"});case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(t){return e.apply(this,arguments)}}()}},zr=Ir,Br=(r("4e88"),Object(G["a"])(zr,Tr,Ur,!1,null,"ca64c394",null));Br.options.__file="FirmwareList.vue";var Lr=Br.exports,Gr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container my-3"},[r("h2",{staticClass:"mb-4 d-none d-sm-block d-md-none"},[e._v("New experiment")]),r("div",{attrs:{id:"accordion",role:"tablist"}},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-header pl-3",attrs:{role:"tab",id:"headingZero"}},[r("a",{staticClass:"text-dark",attrs:{"data-toggle":"collapse",href:"#collapseZero","aria-expanded":"true","aria-controls":"collapseZero"}},[r("h6",{staticClass:"mb-0"},[r("i",{staticClass:"fa fa-fw fa-clock-o",attrs:{"aria-hidden":"true"}}),e._v(" Schedule\n            "),r("span",{staticClass:"text-muted font-weight-normal font-size-sm float-right"},[r("i",{staticClass:"fa fa-clock-o",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.duration)+" "+e._s(1==e.durationMultiplier?"min":"hours")+", "+e._s(e.scheduleText)+"\n            ")])])])]),r("div",{staticClass:"collapse show",attrs:{id:"collapseZero",role:"tabpanel","aria-labelledby":"headingZero","data-parent":"#accordion"}},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"lead mr-3 my-label"},[e._v("Name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-control",class:{"is-invalid":!e.nameValidation},staticStyle:{"max-width":"300px",display:"inline-block"},attrs:{type:"text",placeholder:"New experiment",autofocus:""},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),r("div",{staticClass:"invalid-feedback"},[e._v("\n              Invalid name. Only alphanumeric characters allowed [0-9A-Za-z_]\n            ")])]),r("div",{staticClass:"form-group"},[r("label",{staticClass:"lead mr-3 my-label"},[e._v("Duration")]),r("div",{staticClass:"input-group",staticStyle:{display:"inline-flex","max-width":"300px"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.duration,expression:"duration"}],staticClass:"form-control",attrs:{type:"number",min:"1"},domProps:{value:e.duration},on:{input:function(t){t.target.composing||(e.duration=t.target.value)}}}),r("div",{staticClass:"input-group-btn"},[r("button",{staticClass:"btn",class:{"btn-secondary":1==e.durationMultiplier},attrs:{type:"button"},on:{click:function(t){e.durationMultiplier=1}}},[e._v(" minutes ")]),r("button",{staticClass:"btn",class:{"btn-secondary":60==e.durationMultiplier},attrs:{type:"button"},on:{click:function(t){e.durationMultiplier=60}}},[e._v(" hours ")])])])]),r("div",{staticClass:"form-group"},[r("label",{staticClass:"lead mr-3 my-label"},[e._v("Start")]),r("label",{staticClass:"custom-control custom-radio"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.start,expression:"start"}],staticClass:"custom-control-input",attrs:{id:"radioStacked1",name:"radio-stacked",type:"radio",value:"asap"},domProps:{checked:e._q(e.start,"asap")},on:{change:function(t){e.start="asap"}}}),r("span",{staticClass:"custom-control-indicator"}),r("span",{staticClass:"custom-control-description"},[e._v("As soon as possible")])]),r("label",{staticClass:"custom-control custom-radio mr-0"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.start,expression:"start"}],staticClass:"custom-control-input",attrs:{id:"radioStacked2",name:"radio-stacked",type:"radio",value:"scheduled"},domProps:{checked:e._q(e.start,"scheduled")},on:{click:e.startScheduled,change:function(t){e.start="scheduled"}}}),r("span",{staticClass:"custom-control-indicator"}),r("span",{staticClass:"custom-control-description"},[e._v("Scheduled")])])]),r("div",{directives:[{name:"show",rawName:"v-show",value:"scheduled"==e.start,expression:"start == 'scheduled'"}],staticClass:"form-group"},[r("label",{staticClass:"lead mr-3 my-label"}),r("input",{staticClass:"form-control datetimepicker-input",staticStyle:{"max-width":"300px",display:"inline-block"},attrs:{type:"text",id:"datetimepicker1","data-toggle":"datetimepicker","data-target":"#datetimepicker1",placeholder:""}})])])])]),r("div",{staticClass:"card"},[r("div",{staticClass:"card-header pl-3",attrs:{role:"tab",id:"headingOne"}},[r("a",{staticClass:"collapsed text-dark",attrs:{"data-toggle":"collapse",href:"#collapseOne","aria-expanded":"false","aria-controls":"collapseOne"},on:{click:e.refreshNodes}},[r("h6",{staticClass:"mb-0"},[r("i",{staticClass:"fa fa-fw fa-share-alt",attrs:{"aria-hidden":"true"}}),e._v(" Nodes "),r("span",{staticClass:"badge float-right",class:e.nodeCount?"badge-info":"badge-secondary"},[e._v(e._s(e.nodeCount))])])])]),r("div",{staticClass:"collapse",attrs:{id:"collapseOne",role:"tabpanel","aria-labelledby":"headingOne","data-parent":"#accordion"}},[r("ul",{staticClass:"nav nav-tabs pt-2 font-size-sm bg-light"},[e._m(0),r("li",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:"Select sets of nodes with the same properties",expression:"'Select sets of nodes with the same properties'",arg:"top"}],staticClass:"nav-item"},[r("a",{staticClass:"nav-link active",attrs:{id:"list-byprop-list","data-toggle":"list",href:"#list-byprop",role:"tab","aria-controls":"byprop"},on:{click:function(t){e.setMode("byprop")}}},[e._v(" node properties ")])]),r("li",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:"Select nodes from list or map",expression:"'Select nodes from list or map'",arg:"top"}],staticClass:"nav-item"},[r("a",{staticClass:"nav-link",attrs:{id:"list-byname-list","data-toggle":"list",href:"#list-byname",role:"tab","aria-controls":"byname"},on:{click:function(t){e.setMode("byname"),e.refreshNodes()}}},[e._v(" host name / map ")])]),r("li",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:"Select nodes with given ids",expression:"'Select nodes with given ids'",arg:"top"}],staticClass:"nav-item"},[r("a",{staticClass:"nav-link",attrs:{id:"list-byid-list","data-toggle":"list",href:"#list-byid",role:"tab","aria-controls":"byid"},on:{click:function(t){e.setMode("byid"),e.refreshNodes()}}},[e._v(" node id ")])])]),r("div",{staticClass:"py-3 card-body"},[r("div",{staticClass:"tab-content",attrs:{id:"nav-tabContent"}},[r("div",{staticClass:"tab-pane fade show active",attrs:{id:"list-byprop",role:"tabpanel","aria-labelledby":"list-byprop-list"}},[r("p",{staticClass:"mb-2 lead text-muted"},[e._v("Select an architecture, site and quantity.")]),r("div",{staticClass:"d-md-flex",staticStyle:{"max-width":"850px"}},[r("filter-select",{attrs:{title:"Architecture",items:e.sortedArchis},on:{input:function(t){e.filterSite=e.sites4Archi[0],e.qty=1}},model:{value:e.filterArchi,callback:function(t){e.filterArchi=t},expression:"filterArchi"}}),r("filter-select",{attrs:{title:"Site",items:e.sites4Archi.sort()},model:{value:e.filterSite,callback:function(t){e.filterSite=t},expression:"filterSite"}}),r("filter-select",{staticStyle:{"max-width":"90px"},attrs:{items:e.qtyAvailable,title:"Qty"},model:{value:e.qty,callback:function(t){e.qty=e._n(t)},expression:"qty"}}),r("label",{staticClass:"custom-control custom-checkbox mb-0 mt-1"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.propMobile,expression:"propMobile"}],staticClass:"custom-control-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.propMobile)?e._i(e.propMobile,null)>-1:e.propMobile},on:{change:function(t){var r=e.propMobile,a=t.target,n=!!a.checked;if(Array.isArray(r)){var s=null,i=e._i(r,s);a.checked?i<0&&(e.propMobile=r.concat([s])):i>-1&&(e.propMobile=r.slice(0,i).concat(r.slice(i+1)))}else e.propMobile=n}}}),r("span",{staticClass:"custom-control-indicator"}),r("span",{staticClass:"custom-control-description"},[e._v("Mobile")])]),r("button",{staticClass:"btn btn-sm btn-success",on:{click:e.addProps}},[r("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),e._v(" Add to experiment")])],1)]),r("div",{staticClass:"tab-pane fade show",attrs:{id:"list-byname",role:"tabpanel","aria-labelledby":"list-byname-list"}},[r("p",{staticClass:"mb-2 lead text-muted"},[e._v("Pick nodes from the list. Add some filters or a search pattern.")]),r("div",[r("span",[e._v("Filters")]),e._v(" \n                "),r("filter-select",{attrs:{items:e.sites.map(function(e){return e.site}).sort(),all:"All sites"},model:{value:e.filterSite,callback:function(t){e.filterSite=t},expression:"filterSite"}}),r("filter-select",{attrs:{all:"All architectures",items:e.sortedArchis4Site},model:{value:e.filterArchi,callback:function(t){e.filterArchi=t},expression:"filterArchi"}}),r("filter-select",{attrs:{all:"All mobility",items:[{value:"1",option:"Mobile"},{value:"0",option:"Not mobile"}]},model:{value:e.filterMobile,callback:function(t){e.filterMobile=t},expression:"filterMobile"}})],1),r("div",{staticClass:"d-md-flex flex-row mt-3",staticStyle:{"align-items":"center"}},[r("multiselect",{staticClass:"multiselect-nodes mr-1",attrs:{options:e.filteredNodes,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"hide-selected":!0,"preserve-search":!0,placeholder:e.searchNodesPlaceholder,label:"network_address","track-by":"network_address"},scopedSlots:e._u([{key:"tag",fn:function(t){return[r("span",{staticClass:"badge-tag badge badge-primary"},[r("span",[e._v(e._s(e._f("stripDomain")(t.option.network_address)))]),r("span",{staticClass:"tag-remove cursor",on:{click:function(e){t.remove(t.option)}}},[e._v("×")])])]}},{key:"option",fn:function(t){return[r("div",{staticClass:"option__desc"},[r("span",{staticClass:"option__title"},[e._v(e._s(t.option.network_address))]),r("span",{staticClass:"float-right badge badge-tag badge-secondary",class:t.option.archi},[e._v(e._s(t.option.archi))]),t.option.mobile?r("span",{staticClass:"float-right badge badge-tag badge-primary"},[e._v("mobile")]):e._e(),r("span",{staticClass:"float-right badge badge-tag",class:e._f("stateBadgeClass")(t.option.state)},[e._v(e._s(t.option.state))])])]}}]),model:{value:e.currentNodes,callback:function(t){e.currentNodes=t},expression:"currentNodes"}}),r("button",{staticClass:"btn btn-success",on:{click:e.addNodes}},[e._v("Add to experiment")])],1),r("p",{staticClass:"mt-2 mb-2 font-size-sm"},[r("a",{attrs:{href:"#collapseMap"},on:{click:function(t){t.preventDefault(),e.showMap=!e.showMap}}},[r("i",{staticClass:"fa fa-map-o fa-fw fa-lg",attrs:{"aria-hidden":"true"}}),e._v(" View/select nodes on map "),r("i",{staticClass:"fa fa-caret-down",attrs:{"aria-hidden":"true"}})])]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.showMap,expression:"showMap"}],attrs:{id:"collapseMap"}},[r("map-3d",{attrs:{nodes:e.filteredNodes,selectedNodes:e.selectedNodesForSite,shows:e.showMap},on:{selectSite:function(t){return e.filterSite=t}},model:{value:e.currentNodes,callback:function(t){e.currentNodes=t},expression:"currentNodes"}})],1)]),r("div",{staticClass:"tab-pane fade show",attrs:{id:"list-byid",role:"tabpanel","aria-labelledby":"list-byid-list"}},[r("p",{staticClass:"mb-2 lead text-muted"},[e._v("Select a site, architecture and desired ids.")]),r("div",{staticClass:"d-md-flex",staticStyle:{"max-width":"800px"}},[r("filter-select",{attrs:{items:e.sites.map(function(e){return e.site}).sort(),title:"Site"},on:{input:e.testArchi},model:{value:e.filterSite,callback:function(t){e.filterSite=t},expression:"filterSite"}}),r("filter-select",{attrs:{title:"Architecture",items:e.sortedArchis4Site},model:{value:e.filterArchi,callback:function(t){e.filterArchi=t},expression:"filterArchi"}}),r("input",{directives:[{name:"model",rawName:"v-model",value:e.nodeIds,expression:"nodeIds"}],staticClass:"form-control form-control-sm mr-2",attrs:{id:"nodeIds",type:"text",placeholder:"IDs (e.g. 1-5+7)","data-toggle":"popover","data-placement":"bottom","data-title":"Available node ids","data-content":e.nodeIdsInfo},domProps:{value:e.nodeIds},on:{input:function(t){t.target.composing||(e.nodeIds=t.target.value)}}}),r("button",{staticClass:"btn btn-sm btn-success",on:{click:e.expandNodeIds}},[r("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),e._v(" Add to experiment")])],1)])])])]),e.selectedNodes.length?r("div",{directives:[{name:"show",rawName:"v-show",value:"byprop"!==e.mode,expression:"mode !== 'byprop'"}],staticClass:"card-body font-size-sm",staticStyle:{background:"#22222222"}},[r("p",{staticClass:"mb-0 font-size-1"},[e._v(e._s(e.selectedNodes.length)+" nodes selected: "),r("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.clearAllNodes(t)}}},[e._v("clear all")])]),e._l(e.selectedNodeGroups,function(t,a){return r("div",{staticStyle:{"margin-top":"0.35rem"}},[e._l(t.nodes,function(t){return r("span",{staticClass:"badge badge-info badge-tag",class:{"badge-even":a%2}},[r("span",[e._v(e._s(e._f("stripDomain")(t.network_address)))]),r("span",{staticClass:"tag-remove cursor",on:{click:function(r){e.removeNode(t)}}},[e._v("×")])])}),t.hasFirmware?r("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Add firmware",expression:"'Add firmware'"}],staticClass:"badge badge-light badge-tag cursor",attrs:{"data-toggle":"dropdown"}},[r("i",{staticClass:"fa fa-microchip text-dark"}),t.firmware.name?r("span",{staticClass:"mx-1",domProps:{innerHTML:e._s(e.$options.filters.md5Tag(t.firmware.name))}}):e._e(),t.firmware.name?r("span",{staticClass:"tag-remove cursor",on:{click:function(e){e.stopPropagation(),t.firmware={name:void 0}}}},[e._v("×")]):e._e()]):e._e(),r("div",{staticClass:"dropdown-menu dropdown-menu-right"},[r("div",{staticClass:"card-body"},[e._m(1,!0),r("label",{staticClass:"custom-file mb-2"},[r("input",{ref:"firmwareFile"+a,refInFor:!0,staticClass:"custom-file-input",attrs:{type:"file",id:"file"},on:{change:function(t){e.loadFirmwareFile("firmwareFile"+a,a)}}}),r("span",{staticClass:"custom-file-control"},[e._v(e._s(t.firmware.name))])]),r("hr"),r("firmware-list",{attrs:{archi:[t.archi,void 0],select:!0},on:{select:function(r){e.avoidCollision(r),t.firmware={name:r}}}})],1)]),r("span",[r("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Add monitoring profile",expression:"'Add monitoring profile'"}],staticClass:"badge badge-light badge-tag cursor",attrs:{"data-toggle":"dropdown"}},[r("i",{staticClass:"fa fa-thermometer text-dark",staticStyle:{width:"12px"}}),e._v(" "+e._s(t.monitoring)+" "),t.monitoring?r("span",{staticClass:"tag-remove cursor",on:{click:function(e){e.stopPropagation(),t.monitoring=void 0}}},[e._v("×")]):e._e()]),r("div",{staticClass:"dropdown-menu dropdown-menu-right"},[r("div",{staticClass:"card-body"},[r("p",{staticClass:"lead"},[e._v("Assign a monitoring profile")]),r("monitoring-list",{attrs:{archi:t.archi,select:!0},on:{select:function(e){t.monitoring=e}}})],1)])]),r("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Clear "+t.nodes.length+" nodes",expression:"`Clear ${group.nodes.length} nodes`"}],staticClass:"badge badge-light badge-tag tag-remove cursor",on:{click:function(r){e.hideTooltip(),t.nodes.map(function(t){return e.removeNode(t)})}}},[r("i",{staticClass:"fa fa-trash-o"})])],2)})],2):e._e(),e.selectedProps.length?r("div",{directives:[{name:"show",rawName:"v-show",value:"byprop"===e.mode,expression:"mode === 'byprop'"}],staticClass:"card-body font-size-sm",staticStyle:{background:"#22222222"}},[r("p",{staticClass:"mb-0 font-size-1"},[e._v(e._s(e.nodeCount)+" nodes selected: "),r("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.clearAllNodes(t)}}},[e._v("clear all")])]),e._l(e.selectedProps,function(t,a){return r("div",{staticStyle:{"margin-top":"0.35rem"}},[r("span",{staticClass:"badge badge-info badge-tag"},[e._v(" "+e._s(e._f("formatArchiRadio")(t.prop.properties.archi))+" @ "+e._s(t.prop.properties.site))]),e._v("\n          x "+e._s(t.prop.nbnodes)+"\n          "),t.prop.properties.mobile?r("span",{staticClass:"badge badge-primary badge-tag"},[e._v(" mobile ")]):e._e(),t.hasFirmware?r("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Add firmware",expression:"'Add firmware'"}],staticClass:"badge badge-light badge-tag cursor",attrs:{"data-toggle":"dropdown"}},[r("i",{staticClass:"fa fa-microchip text-dark"}),t.firmware.name?r("span",{staticClass:"mx-1",domProps:{innerHTML:e._s(e.$options.filters.md5Tag(t.firmware.name))}}):e._e(),t.firmware.name?r("span",{staticClass:"tag-remove cursor",on:{click:function(e){e.stopPropagation(),t.firmware={name:void 0}}}},[e._v("×")]):e._e()]):e._e(),r("div",{staticClass:"dropdown-menu dropdown-menu-right"},[r("div",{staticClass:"card-body"},[e._m(2,!0),r("label",{staticClass:"custom-file mb-2"},[r("input",{ref:"firmwarePropFile"+a,refInFor:!0,staticClass:"custom-file-input",attrs:{type:"file",id:"file"},on:{change:function(t){e.loadFirmwareFile("firmwarePropFile"+a,a)}}}),r("span",{staticClass:"custom-file-control"},[e._v(e._s(t.firmware.name))])]),r("hr"),r("firmware-list",{attrs:{archi:[t.archi,void 0],select:!0},on:{select:function(r){e.avoidCollision(r),t.firmware={name:r}}}})],1)]),r("span",[r("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Add monitoring profile",expression:"'Add monitoring profile'"}],staticClass:"badge badge-light badge-tag cursor",attrs:{"data-toggle":"dropdown"}},[r("i",{staticClass:"fa fa-thermometer text-dark",staticStyle:{width:"12px"}}),e._v(" "+e._s(t.monitoring)+" "),t.monitoring?r("span",{staticClass:"tag-remove cursor",on:{click:function(e){e.stopPropagation(),t.monitoring=void 0}}},[e._v("×")]):e._e()]),r("div",{staticClass:"dropdown-menu dropdown-menu-right"},[r("div",{staticClass:"card-body"},[r("p",{staticClass:"lead"},[e._v("Assign a monitoring profile")]),r("monitoring-list",{attrs:{archi:t.archi,select:!0},on:{select:function(e){t.monitoring=e}}})],1)])]),r("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Clear "+t.prop.nbnodes+" nodes",expression:"`Clear ${p.prop.nbnodes} nodes`"}],staticClass:"badge badge-light badge-tag tag-remove cursor",on:{click:function(t){e.hideTooltip(),e.removeProp(a)}}},[r("i",{staticClass:"fa fa-trash-o"})])])})],2):e._e()])]),r("h5",{staticClass:"my-3"},[e._v("Summary")]),r("p",{staticClass:"lead"},[e._v("Your experiment on "),r("span",{staticClass:"text-primary"},[e._v(e._s(e.nodeCount))]),e._v(" nodes is set to start "),r("span",{staticClass:"text-primary"},[e._v(e._s(e.scheduleText))]),e._v(" for "),r("span",{staticClass:"text-primary"},[e._v(e._s(e.duration))]),e._v(" "+e._s(1==e.durationMultiplier?"minutes":"hours")+".")]),r("button",{staticClass:"btn btn-lg btn-primary",on:{click:e.submitExperiment}},[e._v("Submit experiment")])])},qr=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("li",{staticClass:"nav-item"},[r("span",{staticClass:"nav-link disabled text-dark fdont-weight-bold"},[e._v("Select by")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",{staticClass:"lead"},[e._v("Assign a firmware "),r("span",{staticClass:"text-muted"},[e._v("(upload or select from list)")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",{staticClass:"lead"},[e._v("Assign a firmware "),r("span",{staticClass:"text-muted"},[e._v("(upload or select from list)")])])}],Hr=(r("8615"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("select",{staticClass:"form-control form-control-sm text-capitalize mr-2 d-inline-block",on:{change:e.filterChanged}},[e.title?r("option",{attrs:{value:"all",disabled:""},domProps:{selected:"all"===e.value||0===e.value}},[e._v(e._s(e.title))]):e._e(),e.all?r("option",{attrs:{value:"all"},domProps:{selected:"all"===e.value}},[e._v(e._s(e.all))]):e._e(),e._l(e.items,function(t){return r("option",{staticClass:"text-capitalize",attrs:{disabled:"_separator_"===t.value},domProps:{value:t.value||t,selected:e.value===(t.value||t)}},[e._v("\n    "+e._s(t.option||t)+"\n  ")])})],2)}),Wr=[],Yr={name:"FilterSelect",props:{items:{type:[Array,Number],default:function(){return[]}},title:{type:String,default:function(){return""}},all:{type:String,default:function(){return""}},value:{type:[String,Number],default:function(){return"all"}}},data:function(){return{selected:void 0}},methods:{filterChanged:function(e){this.$emit("input",e.target.value)}}},Kr=Yr,Vr=(r("3af0"),Object(G["a"])(Kr,Hr,Wr,!1,null,"02d89d7c",null));Vr.options.__file="FilterSelect.vue";var Jr,Zr,Xr,Qr,ea,ta,ra,aa,na,sa,ia,oa,ca,la,ua,da,pa=Vr.exports,ma=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"map"}},[e.nbSites>1?r("div",{staticClass:"card card-body bg-light text-center"},[e._m(0),r("ul",{staticClass:"nav nav-pills justify-content-center"},e._l(e.sites,function(t){return r("li",{staticClass:"nav-item"},[r("a",{staticClass:"nav-link text-capitalize bg-light",attrs:{href:"#"},on:{click:function(r){r.preventDefault(),e.setSite(t)}}},[e._v(e._s(t))])])}))]):e._e(),r("div",{attrs:{id:"map3d",oncontextmenu:"return false"}}),r("div",{staticClass:"p-2 text-white",attrs:{id:"nodeInfo"}}),r("form",{staticClass:"m-2 form-inline",attrs:{id:"cameraInfo"}},[1===e.nbSites&&e.siteCameras.length>1?r("div",{staticClass:"input-group input-group-sm"},[r("span",{staticClass:"input-group-addon"},[e._v("View")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.camera,expression:"camera"}],staticClass:"bg-light form-control custom-select",staticStyle:{"padding-right":"1.65rem"},on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.camera=t.target.multiple?r:r[0]},e.setCamera]}},e._l(e.cameras[e.site],function(t){return r("option",{domProps:{value:t,selected:t.name===e.camera.name}},[e._v(e._s(t.name))])}))]):e._e()])])},fa=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",{staticClass:"lead mt-2"},[r("i",{staticClass:"fa fa-map-o fa-fw fa-lg",attrs:{"aria-hidden":"true"}}),e._v("\n      Select a site to view its map\n    ")])}],ha=(r("673e"),r("6c7b"),r("7fed")),va="mousedown",ga=[];function ba(e){da=e}function wa(){Jr=-100,Zr=0,Xr=100,Qr=ea=0,ia=document.getElementById("map3d"),sa=document.getElementById("nodeInfo"),ia.innerHTML="",sa.innerHTML="",ca=[],ta=new ha["THREE"].CanvasRenderer,ra=new ha["THREE"].Scene,aa=new ha["THREE"].PerspectiveCamera(75,la/ua,1,1e4),na=new ha["THREE"].Projector,ia.appendChild(ta.domElement),window.addEventListener("resize",ya,!1),ra.add(aa),ya(),_a(da),aa.lookAt(ra.position),Ra(40),ia.onmousedown=$a,ia.onmouseup=ja,ia.onmousemove=Fa,ia.addEventListener("DOMMouseScroll",Ma,!1),ia.onmousewheel=Ma,Ca()}function ya(){la=ia.offsetWidth,ua=ia.offsetHeight,ta.setSize(la,ua),aa.aspect=la/ua,aa.updateProjectionMatrix(),Ca()}function _a(e){var t,r,a,n,s,i;t=a=s=0,r=n=i=0;for(var o=0;o<e.length;o++)parseFloat(e[o].x)>r&&(r=parseFloat(e[o].x)),parseFloat(e[o].x)<t&&(t=parseFloat(e[o].x)),parseFloat(e[o].y)>n&&(n=parseFloat(e[o].y)),parseFloat(e[o].y)<a&&(a=parseFloat(e[o].y)),parseFloat(e[o].z)>i&&(i=parseFloat(e[o].z)),parseFloat(e[o].z)<s&&(s=parseFloat(e[o].z));var c=(r+t)/2,l=(n+a)/2,u=(i+s)/2;for(o=0;o<e.length;o++){var d=16777215,p=new ha["THREE"].Particle(new ha["THREE"].SpriteCanvasMaterial({color:d,opacity:.9,program:function(e){e.beginPath(),e.arc(0,0,1,0,2*Math.PI,!0),e.closePath(),e.fill()}}));p.node=e[o],p.name=e[o].network_address,p.position.x=parseFloat(e[o].x)-c,p.position.y=parseFloat(e[o].y)-l,p.position.z=parseFloat(e[o].z)-u,p.position.multiplyScalar(10),p.state=e[o].state,p.scale.x=p.scale.y=1,ca.push(p),ra.add(p)}xa()}function xa(){for(var e=0;e<ca.length;e++)ca[e].scale.x=ca[e].scale.y=1,-1!==ga.findIndex(function(t){return t.network_address===ca[e].name})?(ca[e].material.color.setHex(370941),ca[e].scale.x=ca[e].scale.y=1.4):"Dead"===ca[e].state?ca[e].material.color.setHex(8818326):"Busy"===ca[e].state?ca[e].material.color.setHex(16612884):"Alive"===ca[e].state?ca[e].material.color.setHex(844861):ca[e].material.color.setHex(16724016)}function Ca(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];xa(),e&&(aa.position.x=ra.position.x+Xr*Math.sin(Zr*Math.PI/360)*Math.cos(Jr*Math.PI/360),aa.position.y=ra.position.y+Xr*Math.sin(Jr*Math.PI/360),aa.position.z=ra.position.z+Xr*Math.cos(Zr*Math.PI/360)*Math.cos(Jr*Math.PI/360)),aa.lookAt(ra.position),aa.updateMatrix(),ta.setClearColor(3422784,1),ta.render(ra,aa),console.log("Cam Pos (x, y, z | theta, phi, dist) = ".concat(aa.position.x,", ").concat(aa.position.y,", ").concat(aa.position.z," | ").concat(Zr,", ").concat(Jr,", ").concat(Xr)),console.log("Scene Pos (x, y, z)",ra.position)}function ka(e){var t=e.target,r=e.clientX,a=e.clientY,n=t.getBoundingClientRect(),s=r-n.left-t.clientLeft+t.scrollLeft,i=a-n.top-t.clientTop+t.scrollTop,o=s/t.clientWidth*2-1,c=-i/t.clientHeight*2+1,l=new ha["THREE"].Vector3(o,c,.5);na.unprojectVector(l,aa);var u=new ha["THREE"].Raycaster(aa.position,l.sub(aa.position).normalize()),d=u.intersectObjects(ca);return d=d.filter(function(e){return!isNaN(e.distance)}),d.length>0?d[0]:null}function Sa(e){var t=e.object.node,r=ga.findIndex(function(e){return e.network_address===t.network_address});-1===r?ga.push(t):ga.splice(r,1),xa(),oa&&oa(ga)}function Aa(e,t,r){return new ha["THREE"].Vector3(e,t,r)}function Na(e,t,r){var a=new ha["THREE"].Geometry,n=new ha["THREE"].Geometry,s=new ha["THREE"].LineBasicMaterial({color:r,lineWidth:2});n.vertices.push(e,t),a=new ha["THREE"].Line(n,s),ra.add(a)}function Ra(e){Na(Aa(0,0,0),Aa(e,0,0),16711680),Na(Aa(0,0,0),Aa(0,e,0),65280),Na(Aa(0,0,0),Aa(0,0,e),255)}function $a(e){var t="LEFT";if(e.type!==va)return!0;if(e.which&&(3===e.which&&(t="RIGHT"),2===e.which&&(t="MIDDLE")),Qr=e.clientX,ea=e.clientY,"RIGHT"===t&&(document.onmousemove=Pa),"LEFT"===t){var r=ka(e);null!==r?Sa(r):document.onmousemove=Oa}}function ja(e){document.onmousemove=Fa}function Ea(e){if(e)switch(e){case"Alive":case"Running":return"badge-success";case"Error":case"toError":case"Absent":return"badge-danger";case"Waiting":case"Hold":case"Finishing":case"Busy":return"badge-warning";case"Resuming":case"Launching":case"toLaunch":case"toAckReservation":return"badge-info";case"Suspected":case"Suspended":case"Stopped":return"badge-dark";case"Terminated":default:return"badge-secondary"}}function Fa(e){var t=ka(e);if(t){var r=t.object.node;sa.innerHTML="\n      <b>".concat(r.network_address,'</b>\n      <span class="badge badge-primary">').concat(r.shortArchi||r.archi,'</span>\n      <span class="badge ').concat(Ea(r.state),'">').concat(r.state,"</span>\n    "),r.mobile&&(sa.innerHTML+='<span class="badge badge-infomobile</span>')}else sa.innerHTML=""}function Pa(e){var t=e.clientX,r=e.clientY,a=t-Qr,n=r-ea;Qr=t,ea=r,Zr-=a,Jr+=n,Jr>180&&(Jr=180),Jr<-180&&(Jr=-180),Ca()}function Oa(e){console.log("translate");var t=e.clientX,r=e.clientY,a=t-Qr,n=r-ea;Qr=t,ea=r,ra.position.x-=a,ra.position.y+=n,aa.position.x-=a,aa.position.y+=n,Ca(!1)}function Ma(e){console.log("wheel");var t=0;e||(e=window.event),e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),t&&Da(t),e.preventDefault(),e.returnValue=!1}function Da(e){Xr+=5*e,Ca()}function Ta(e){oa=e}function Ua(e){ga=e,Ca()}function Ia(e,t,r){aa.position.x=e,aa.position.y=t,aa.position.z=r;var a=e-ra.position.x,n=t-ra.position.y,s=r-ra.position.z;Xr=Math.sqrt(Math.pow(a,2)+Math.pow(n,2)+Math.pow(s,2)),Zr=360*Math.atan2(a,s)/Math.PI,Jr=360*Math.asin(n/Xr)/Math.PI,Ca()}function za(e,t,r){Xr=e,Zr=t,Jr=r,Ca()}function Ba(e,t,r){ra.position.x=e,ra.position.y=t,ra.position.z=r,Ca()}var La={loadNodes:ba,init:wa,setSelectedCallback:Ta,setSelectedNodes:Ua,setCameraRect:Ia,setCameraSphere:za,setScenePosition:Ba},Ga={grenoble:[{name:"Default",camera:{x:11,y:-216,z:176},origin:{x:11,y:-6,z:0}}],lille:[{name:"Default",camera:{x:-457,y:-274.783,z:147.191},origin:{x:-457,y:-125,z:0}},{name:"Le Cube",camera:{x:620,y:-328.35,z:2.46},origin:{x:620,y:-324,z:0}}],lyon:[{name:"Default",camera:{x:0,y:-30.155,z:66.711},origin:{x:0,y:14,z:0}}],paris:[{name:"Default",camera:{x:0,y:-57.453,z:48.21},origin:{x:0,y:0,z:0}}],saclay:[{name:"Default",camera:{x:6,y:-376,z:130},origin:{x:10,y:-212,z:0}},{name:"Basement",camera:{x:14,y:-313,z:189},origin:{x:10,y:-193,z:0}},{name:"Room 1",camera:{x:-107,y:262,z:41},origin:{x:-107,y:342,z:0}},{name:"Room 2",camera:{x:-116,y:110,z:75},origin:{x:-115,y:160,z:0}}],devgrenoble:[{name:"Default",camera:{x:0,y:-75,z:63},origin:{x:0,y:0,z:0}},{name:"My camera",camera:{x:12,y:23,z:12},origin:{x:0,y:0,z:0}},{name:"My camera 2",camera:{x:-65,y:37,z:65},origin:{x:-25,y:6,z:0}}],devlille:[],devsaclay:[{name:"Default",camera:{x:-107,y:262,z:41},origin:{x:-107,y:342,z:0}},{name:"Room 2",camera:{x:-116,y:110,z:75},origin:{x:-115,y:160,z:0}},{name:"Basement",camera:{x:14,y:-313,z:189},origin:{x:10,y:-193,z:0}}],devstrasbourg:[]},qa=Ga,Ha={name:"Map3d",props:{nodes:{type:Array,default:function(){return[]}},selectedNodes:{type:Array,default:function(){return[]}},value:{type:Array,default:function(){return[]}},shows:{type:Boolean,default:!0}},data:function(){return{cameras:qa,camera:void 0}},created:function(){La.setSelectedCallback(this.selectionChanged)},computed:{sites:function(){return Object(yt["a"])(new Set(this.nodes.map(function(e){return e.site}))).sort()},nbSites:function(){return this.sites.length},site:function(){return this.sites[0]},siteCameras:function(){return qa[this.site]||[]}},watch:{nodes:function(e){this.nbSites>1?(I()("#map3d").hide(),I()("#nodeInfo").hide(),I()("#cameraInfo").hide()):(I()("#map3d").show(),I()("#nodeInfo").show(),I()("#cameraInfo").show(),this.shows&&(console.debug(this.shows),La.loadNodes(this.nodes),La.init(),this.siteCameras.length>0&&(this.camera=this.siteCameras[0],this.setCamera())))},selectedNodes:function(e){},value:function(e){La.setSelectedNodes(e)},shows:function(e){console.debug("shows",e),e&&(La.loadNodes(this.nodes),La.init(),this.siteCameras.length>0&&(this.camera=this.siteCameras[0],this.setCamera()))}},methods:{selectionChanged:function(e){this.$emit("input",e)},setSite:function(e){this.$emit("selectSite",e)},setCamera:function(){var e=this.camera.origin,t=this.camera.camera;La.setScenePosition(e.x,e.y,e.z),La.setCameraRect(t.x,t.y,t.z)}}},Wa=Ha,Ya=(r("1a8d"),Object(G["a"])(Wa,ma,fa,!1,null,"472bf356",null));Ya.options.__file="Map3d.vue";var Ka=Ya.exports;r("e607"),r("cb95"),r("18fc");function Va(e){this.message=e,this.name="Exception"}function Ja(e){return Object.assign({},e,{shortArchi:Gt(e.archi)})}function Za(e){if(new Set(e.map(function(e){return e.shortArchi})).size>1)throw new Va("Node groups should have the same archi");return Object.assign({},{nodes:e,firmware:{name:void 0},monitoring:void 0,archi:e[0].shortArchi,allowedFirmwareTypes:Lt(e[0].shortArchi),hasFirmware:Lt(e[0].shortArchi).length>0})}function Xa(e){return Object.assign({},{prop:e,firmware:{name:void 0},monitoring:void 0,archi:Gt(e.properties.archi),allowedFirmwareTypes:Lt(Gt(e.properties.archi)),hasFirmware:Lt(Gt(e.properties.archi)).length>0})}var Qa={name:"NewExperiment",components:{Multiselect:Ae.a,FilterSelect:pa,MonitoringList:kr,FirmwareList:Lr,Map3d:Ka},data:function(){return{name:"",start:"asap",duration:20,durationMultiplier:1,startDate:"",mode:"byprop",filterSite:"all",filterArchi:"all",filterMobile:"all",showMap:!1,propMobile:!1,firmwareFiles:[{name:void 0}],scriptFile:{name:void 0},selectedNodeGroups:[],selectedProps:[],currentNodes:[],currentFirmware:{name:void 0},currentMonitoring:{name:void 0},firmwares:{},firmwaresHashes:{},sites:[],node_ids:[],nodes:[],qty:0,nodeIds:""}},created:function(){var e=this;J.getSites().then(function(t){e.sites=t}),this.refreshNodes()},mounted:function(){var e=this;I()("#datetimepicker1").datetimepicker({sideBySide:!0,format:"YYYY-MM-DD HH:mm"}),I()("#datetimepicker1").on("change.datetimepicker",function(t){e.startDate=t.date}),this.$nextTick(function(){I()('[data-toggle="popover"]').popover({trigger:"focus",html:!0})}),I()("#collapseMap").on("shown.bs.collapse",function(){e.showMap=!0}),I()("#collapseMap").on("hidden.bs.collapse",function(){e.showMap=!1}),I()(document).on("click","span[data-ids]",function(t){e.nodeIds=t.target.dataset.ids}),I()(document).on("click",'.dropdown-menu a[data-toggle="list"]',function(e){e.stopPropagation()})},computed:{nameValidation:function(){return this.name.match(/^[0-9A-Za-z_]*$/)},scheduleText:function(){return"asap"===this.start?"as soon as possible":this.startDate?"on "+this.startDate.format("YYYY-MM-DD HH:mm"):""},scheduleEpoch:function(){return"asap"===this.start?void 0:this.startDate.unix()},filteredNodes:function(){var e=this;return this.nodes.filter(function(t){return"all"===e.filterArchi||t.archi===e.filterArchi}).filter(function(t){return"all"===e.filterSite||t.site===e.filterSite}).filter(function(t){return"all"===e.filterMobile||t.mobile===parseInt(e.filterMobile)}).filter(function(t){return!e.selectedNodes.some(function(e){return e.network_address===t.network_address})})},searchNodesPlaceholder:function(){return this.filteredNodes.length>0?"Search among ".concat(this.filteredNodes.length," nodes"):"No matching nodes found. Try to clear filters."},nodeIdsInfo:function(){var e=this;if("byid"!==this.mode)return"select node by ids tab";if("all"===this.filterSite||"all"===this.filterArchi)return"Select a site and architecture first";try{return this.nodes_ids.filter(function(t){return t.site===e.filterSite})[0].archis.filter(function(t){return t.archi===e.filterArchi})[0].states.sort(function(e,t){return e.state>t.state}).map(function(t){return'<span class="badge '.concat(e.$options.filters.stateBadgeClass(t.state),'">').concat(t.state,'</span> <span class="cursor" data-ids="').concat(t.ids,'">').concat(t.ids,"</span>")}).join("<br>")}catch(e){return"no matching ids"}},selectedNodes:function(){return this.selectedNodeGroups.reduce(function(e,t){return e.concat(t.nodes)},[])},selectedNodesForSite:function(){var e=this;return this.selectedNodes.filter(function(t){return t.site===e.filterSite})},nodeCount:function(){return"byprop"===this.mode?this.selectedProps.reduce(function(e,t){return e+parseInt(t.prop.nbnodes)},0):this.selectedNodes.length},archis:function(){return this.nodes.reduce(function(e,t){return e.includes(t.archi)||e.push(t.archi),e},[])},archis4Site:function(){var e=this;return this.nodes.filter(function(t){return"all"===e.filterSite||t.site===e.filterSite}).reduce(function(e,t){return e.includes(t.archi)||e.push(t.archi),e},[])},sortedArchis:function(){var e=this,t=["a8:at86rf231","m3:at86rf231","wsn430:cc1101"],r=this.archis.filter(function(e){return t.includes(e)}).sort(),a=this.archis.filter(function(e){return!t.includes(e)}).sort(),n=r.map(function(t){return Object({value:t,option:e.$options.filters.formatArchiRadio(t)})}).concat([{value:"_separator_",option:"───────────"}]).concat(a.map(function(t){return Object({value:t,option:e.$options.filters.formatArchiRadio(t)})}));return n},sortedArchis4Site:function(){var e=this,t=["a8:at86rf231","m3:at86rf231","wsn430:cc1101"],r=this.archis4Site.filter(function(e){return t.includes(e)}).sort(),a=this.archis4Site.filter(function(e){return!t.includes(e)}).sort(),n=r.map(function(t){return Object({value:t,option:e.$options.filters.formatArchiRadio(t)})}).concat([{value:"_separator_",option:"───────────"}]).concat(a.map(function(t){return Object({value:t,option:e.$options.filters.formatArchiRadio(t)})}));return n},sites4Archi:function(){var e=this;return this.nodes.filter(function(t){return"all"===e.filterArchi||t.archi===e.filterArchi}).reduce(function(e,t){return e.includes(t.site)||e.push(t.site),e},[])},qtyAvailable:function(){var e=this;return this.nodes.filter(function(t){return t.site===e.filterSite&&t.archi===e.filterArchi&&Boolean(t.mobile)===e.propMobile}).length-this.selectedProps.filter(function(t){return t.prop.properties.site===e.filterSite&&t.prop.properties.archi===e.filterArchi&&Boolean(t.prop.properties.mobile)===e.propMobile}).reduce(function(e,t){return e+parseInt(t.prop.nbnodes)},0)},states:function(){var e=this;return this.nodes.filter(function(t){return"all"===e.filterSite||t.site===e.filterSite}).reduce(function(e,t){return e.includes(t.state)||e.push(t.state),e},[])},firmwareAssociations:function(){var e;return e="byprop"===this.mode?this.selectedProps.filter(function(e){return void 0!==e.firmware&&void 0!==e.firmware.name}).map(function(e){return{nodes:[e.prop.alias],firmwarename:e.firmware.name}}):this.selectedNodeGroups.filter(function(e){return void 0!==e.firmware&&void 0!==e.firmware.name}).map(function(e){return{nodes:e.nodes.map(function(e){return e.network_address}),firmwarename:e.firmware.name}}),0===e.length?null:e},monitoringAssociations:function(){var e;return e="byprop"===this.mode?this.selectedProps.filter(function(e){return void 0!==e.monitoring}).map(function(e){return{nodes:[e.prop.alias],profilename:e.monitoring}}):this.selectedNodeGroups.filter(function(e){return void 0!==e.monitoring}).map(function(e){return{nodes:e.nodes.map(function(e){return e.network_address}),profilename:e.monitoring}}),0===e.length?null:e}},methods:{hideTooltip:function(){I()(".tooltip[role=tooltip]").remove()},refreshNodes:function(){var e=this;J.getNodes().then(function(t){e.nodes=t.map(function(e){return Ja(e)})}).catch(function(t){throw e.$notify({text:"An error occured while fetching data",type:"error"}),t}),J.getNodesIds().then(function(t){e.nodes_ids=t}).catch(function(t){throw e.$notify({text:"An error occured while fetching data",type:"error"}),t})},startScheduled:function(){this.$forceUpdate(),this.$nextTick(function(){I()("#datetimepicker1").datetimepicker("show")})},setMode:function(e){this.mode=e,this.filterArchi="all",this.filterSite="all",this.filterMobile="all"},clearAllNodes:function(){this.selectedNodeGroups=[],this.selectedProps=[],this.firmwares={},this.firmwaresHashes={}},avoidCollision:function(e){if(e in this.firmwares){var t="".concat(this.firmwaresHashes[e]||"0","_").concat(e);this.firmwares[t]=this.firmwares[e],this.firmwaresHashes[t]=this.firmwaresHashes[e],delete this.firmwares[e],delete this.firmwaresHashes[e];var r=!0,a=!1,n=void 0;try{for(var s,i=this.selectedNodeGroups[Symbol.iterator]();!(r=(s=i.next()).done);r=!0){var o=s.value;o.firmware&&o.firmware.name===e&&(o.firmware.name=t)}}catch(e){a=!0,n=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw n}}var c=!0,l=!1,u=void 0;try{for(var d,p=this.selectedProps[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var m=d.value;m.firmware&&m.firmware.name===e&&(m.firmware.name=t)}}catch(e){l=!0,u=e}finally{try{c||null==p.return||p.return()}finally{if(l)throw u}}}},loadFirmwareFile:function(e,t){this.$notify({text:"Uploading file...",type:"info",duration:-1}),this.firmwareFiles[t]=this.$refs[e][0].files[0];var r="byprop"===this.mode?this.selectedProps[t]:this.selectedNodeGroups[t],a=new FileReader;a.onload=function(e,t,r,a){return function(){var n=Object(W["a"])(regeneratorRuntime.mark(function n(s){var i,o,c;return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return t.$notify({clean:!0}),n.next=3,J.checkFirmware(s.target.result);case 3:i=n.sent,t.$notify({text:"firmware format ".concat(i.format),type:"unknown"===i.format?"error":"info"}),a.includes(i.format)?(e.bin=s.target.result,t.firmwareFiles[r]=e,o=e.name,c=A(e.bin),(t.selectedNodeGroups.find(function(t){return t.firmware&&t.firmware.name===e.name})||t.selectedProps.find(function(t){return t.firmware&&t.firmware.name===e.name}))&&c!==t.firmwaresHashes[e.name]&&(o="".concat(c,"_").concat(e.name)),t.firmwares[o]=e.bin,t.firmwaresHashes[o]=c,"byprop"===t.mode?t.selectedProps[r].firmware={name:o}:t.selectedNodeGroups[r].firmware={name:o}):t.$notify({text:"Wrong format for this type of nodes.\n(expected ".concat(a,")"),type:"error"});case 6:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()}(this.firmwareFiles[t],this,t,r.allowedFirmwareTypes),a.readAsDataURL(this.firmwareFiles[t])},previewScriptFile:function(){this.scriptFile=this.$refs.scriptFile.files[0]},testArchi:function(){this.archis4Site.includes(this.filterArchi)||(this.filterArchi=this.archis4Site[0])},addNodes:function(){for(var e=Object.values(_(this.currentNodes,"archi")),t=0;t<e.length;t++){var r=e[t];this.selectedNodeGroups.push(Za(r))}this.currentNodes=[]},removeNode:function(e){this.selectedNodeGroups=this.selectedNodeGroups.map(function(t){return t.nodes=t.nodes.filter(function(t){return t.network_address!==e.network_address}),t}).filter(function(e){return 0!==e.nodes.length})},addProps:function(){"all"!==this.filterArchi?"all"!==this.filterSite?0===this.qty&&this.qtyAvailable>=1?this.$notify({text:"Select a quantity first",type:"warning"}):this.qtyAvailable<1?this.$notify({text:"No nodes available with such properties",type:"error"}):(this.selectedProps.push(Xa({alias:this.selectedProps.length+1,nbnodes:this.qty,properties:{archi:this.filterArchi,site:this.filterSite,mobile:this.propMobile}})),this.$nextTick(function(){this.qty=Math.min(this.qty,this.qtyAvailable)})):this.$notify({text:"Select a site first",type:"warning"}):this.$notify({text:"Select an architecture first",type:"warning"})},removeProp:function(e){this.selectedProps.splice(e,1)},expandNodeIds:function(){var e,t=this,r=[];if(this.filterSite&&"all"!==this.filterSite)if(this.filterArchi&&"all"!==this.filterArchi)if(this.nodeIds){var a=!0,n=!1,s=void 0;try{for(var i,o=y(this.nodeIds)[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var c=i.value;e=this.nodes.find(function(e){return e.network_address==="".concat(Gt(t.filterArchi),"-").concat(c,".").concat(t.filterSite,".iot-lab.info")}),e?this.selectedNodes.includes(e)||r.push(e):this.$notify({text:"Invalid node id ".concat(c),type:"error"})}}catch(e){n=!0,s=e}finally{try{a||null==o.return||o.return()}finally{if(n)throw s}}r.length>0&&(this.currentNodes=r,this.addNodes())}else this.$notify({text:"Select node ids first",type:"warning"});else this.$notify({text:"Select an architecture first",type:"warning"});else this.$notify({text:"Select a site first",type:"warning"})},submitExperiment:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.nameValidation){e.next=3;break}return this.$notify({text:"Name is invalid",type:"warning"}),e.abrupt("return");case 3:if(0!==this.nodeCount){e.next=6;break}return this.$notify({text:"Select nodes first",type:"warning"}),e.abrupt("return");case 6:return this.$notify({text:"Submission in progress",type:"info",duration:-1}),e.prev=7,e.next=10,J.submitExperiment({type:"byprop"===this.mode?"alias":"physical",name:this.name,duration:this.duration*this.durationMultiplier,reservation:this.scheduleEpoch,nodes:"byprop"===this.mode?this.selectedProps.map(function(e){return e.prop}):this.selectedNodes.map(function(e){return e.network_address}),profileassociations:this.monitoringAssociations,firmwareassociations:this.firmwareAssociations,firmwares:this.firmwares});case 10:return t=e.sent,e.next=13,g(200);case 13:return this.$notify({clean:!0}),this.$notify({text:"Experiment ".concat(t.id," submitted"),type:"success",duration:6e3}),e.next=17,g(200);case 17:this.$router.push({name:"dashboard"}),e.next=25;break;case 20:throw e.prev=20,e.t0=e["catch"](7),this.$notify({clean:!0}),this.$notify({text:e.t0.message+"<br><br>"+e.t0.response.data.message,type:"error",duration:1e4}),e.t0;case 25:case"end":return e.stop()}},e,this,[[7,20]])}));return function(){return e.apply(this,arguments)}}()}},en=Qa,tn=(r("9f6e"),Object(G["a"])(en,Gr,qr,!1,null,null,null));tn.options.__file="NewExperiment.vue";var rn=tn.exports,an=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container mt-3"},[r("h2",[e._v("\n    Experiment "),r("span",{staticClass:"text-muted"},[e._v(e._s(e.experiment.name)+" "),r("small",[e._v("#"+e._s(e.id))])])]),r("ul",{staticClass:"list-unstyled"},[r("li",[e._v("User "),r("b",[e._v(e._s(e.experiment.user))])]),r("li",[e._v("Submitted "),r("b",[e._v(e._s(e._f("formatDateTimeSec")(e.experiment.submission_date)))])]),"Waiting"===e.experiment.state?r("li",[e._v("Scheduled "),r("b",[e._v(e._s(e._f("formatDateTimeSec")(e.experiment.scheduled_date)))])]):e._e(),"Waiting"!==e.experiment.state?r("li",[e._v("Started "),r("b",[e._v(e._s(e._f("formatDateTimeSec")(e.experiment.start_date)))])]):e._e(),"1970-01-01T00:00:00Z"!==e.experiment.stop_date?r("li",[e._v("Stopped "),r("b",[e._v(e._s(e._f("formatDateTimeSec")(e.experiment.stop_date)))])]):e._e(),"Running"!==e.experiment.state?r("li",[e._v("\n      Duration "),r("b",[e._v(e._s(e._f("humanizeDuration")(e.experiment.submitted_duration)))]),e.experiment.effective_duration&&e.experiment.effective_duration<e.experiment.submitted_duration?r("span",{staticClass:"ml-1"},[e._v("(stopped after "+e._s(e._f("humanizeDuration")(e.experiment.effective_duration))+")")]):e._e()]):e._e(),"Running"===e.experiment.state?r("li",[e._v("\n      Duration\n      "),r("div",{staticClass:"d-inline-block px-3 durationProgress",style:"text-align: center; --progress: "+e.experimentProgress+"%",attrs:{title:e.showRemaining}},[e._v("\n        "+e._s(e._f("humanizeDuration")(e.expDuration))+"\n        "),r("small",{staticClass:"text-dark"},[e._v("("+e._s(e.experimentProgress)+"%)")])]),e._v("\n      of "),r("b",[e._v(e._s(e._f("humanizeDuration")(e.experiment.submitted_duration)))])]):e._e(),r("li",[e._v("Nodes "),r("b",[e._v(e._s(e.experiment.nb_nodes))])]),r("li",[e._v("State "),r("span",{staticClass:"badge",class:e._f("stateBadgeClass")(e.experiment.state)},[e._v(e._s(e.experiment.state))])])]),e.experiment.user===e.currentUser?[e.states.stoppable.includes(e.experiment.state)?r("a",{staticClass:"btn btn-sm btn-outline-danger mb-3 mr-1",attrs:{href:""},on:{click:function(t){t.preventDefault(),e.stopExperiment(e.id)}}},["Running"===e.experiment.state?[r("i",{staticClass:"fa fa-stop-circle"}),e._v(" Stop\n      ")]:[r("i",{staticClass:"fa fa-ban"}),e._v(" Cancel\n      ")]],2):e._e(),e.states.completed.includes(e.experiment.state)?r("a",{staticClass:"btn btn-sm btn-outline-secondary mb-3 mr-1",attrs:{href:""},on:{click:function(t){t.preventDefault(),e.reloadExperiment(e.id)}}},[r("i",{staticClass:"fa fa-refresh"}),e._v(" Restart\n    ")]):e._e(),r("a",{staticClass:"btn btn-sm btn-outline-secondary mb-3",attrs:{href:""},on:{click:function(t){t.preventDefault(),e.downloadExperiment(e.id)}}},[r("i",{staticClass:"fa fa-download"}),e._v(" Download\n    ")]),e.showNodesCommands?r("div",{staticClass:"float-right"},[r("button",{directives:[{name:"show",rawName:"v-show",value:0===e.selectedNodes.length,expression:"selectedNodes.length === 0"}],staticClass:"btn btn-sm dropdown-toggle cursor",attrs:{type:"button","data-toggle":"popover","data-placement":"right","data-content":"<i class='fa fa-fw fa-lg fa-exclamation-circle text-warning'></i> Select nodes first"}},[r("i",{staticClass:"fa fa-wrench text-dark"}),e._v(" Actions on selected nodes\n      ")]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.selectedNodes.length,expression:"selectedNodes.length"}],staticClass:"dropdown"},[r("button",{staticClass:"btn btn-sm dropdown-toggle cursor",attrs:{type:"button",id:"actionMenuBtn","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[r("i",{staticClass:"fa fa-wrench text-dark"}),e._v(" Actions on "+e._s(e._f("pluralize")(e.selectedNodes.length,"node"))+"\n        ")]),r("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"actionMenuBtn"}},[r("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.sendCmd("start")}}},[r("i",{staticClass:"fa fa-fw fa-play"}),e._v(" Start")]),r("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.sendCmd("stop")}}},[r("i",{staticClass:"fa fa-fw fa-power-off"}),e._v(" Stop")]),r("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.sendCmd("reset")}}},[r("i",{staticClass:"fa fa-fw fa-refresh"}),e._v(" Reset")]),r("li",{staticClass:"dropdown-divider"}),e._m(0),r("li",{staticClass:"dropdown-divider"}),e._m(1)])])]):e._e()]:e._e(),r("table",{staticClass:"table table-striped table-sm"},[r("thead",[r("tr",[r("th",[e._v("Nodes")]),r("th",[e._v("UID")]),r("th",[e._v("Firmware")]),r("th",[e._v("Monitoring")]),r("th",{staticClass:"text-center"},[e._v("Deployment")]),e.showNodesCommands?r("th",{staticClass:"text-center",attrs:{width:"50px"}},[e._v("Actions")]):e._e(),e.showNodesCommands?r("th",{attrs:{width:"15px"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.allSelected,expression:"allSelected"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.allSelected)?e._i(e.allSelected,null)>-1:e.allSelected},on:{change:[function(t){var r=e.allSelected,a=t.target,n=!!a.checked;if(Array.isArray(r)){var s=null,i=e._i(r,s);a.checked?i<0&&(e.allSelected=r.concat([s])):i>-1&&(e.allSelected=r.slice(0,i).concat(r.slice(i+1)))}else e.allSelected=n},e.toggleSelectedNodes]}})]):e._e()])]),r("tbody",[e._l(e.experiment.nodes,function(t){return[r("tr",{class:{"text-danger":"Error"===e.getDeploymentStatus(t)}},[r("td",{class:{cursor:e.showNodesCommands},domProps:{innerHTML:e._s(e.nodeOrAlias(t))},on:{click:function(r){e.toggleNodeSelected(t)}}}),r("td",[e._v(e._s(e.getUid(t)))]),r("td",{domProps:{innerHTML:e._s(e.$options.filters.md5Tag(e.getFirmware(t)))}}),r("td",[e._v(e._s(e.getMonitoring(t)))]),r("td",{staticClass:"text-center"},[e._v(e._s(e.getDeploymentStatus(t)))]),e.showNodesCommands?r("td",[r("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Node actions"}},[r("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Start",expression:"'Start'"}],staticClass:"btn btn-sm border-0 btn-outline-dark",attrs:{disabled:"Error"===e.getDeploymentStatus(t)},on:{click:function(r){e.currentNode=t,e.sendCmd("start")}}},[r("i",{staticClass:"fa fa-fw fa-play"})]),r("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Stop",expression:"'Stop'"}],staticClass:"btn btn-sm border-0 btn-outline-dark",attrs:{disabled:"Error"===e.getDeploymentStatus(t)},on:{click:function(r){e.currentNode=t,e.sendCmd("stop")}}},[r("i",{staticClass:"fa fa-fw fa-power-off"})]),e.canReset(t)?r("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Reset",expression:"'Reset'"}],staticClass:"btn btn-sm border-0 btn-outline-dark",attrs:{disabled:"Error"===e.getDeploymentStatus(t)},on:{click:function(r){e.currentNode=t,e.sendCmd("reset")}}},[r("i",{staticClass:"fa fa-fw fa-refresh"})]):e._e(),e.canFlash(t)?r("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Flash firmware",expression:"'Flash firmware'"}],staticClass:"btn btn-sm border-0 btn-outline-dark",attrs:{"data-toggle":"modal","data-target":".firmware-modal",disabled:"Error"===e.getDeploymentStatus(t)},on:{click:function(r){e.currentNode=t}}},[r("i",{staticClass:"fa fa-fw fa-microchip"})]):e._e(),e.hasProfile(t)?r("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Update monitoring",expression:"'Update monitoring'"}],staticClass:"btn btn-sm border-0 btn-outline-dark",attrs:{"data-toggle":"modal","data-target":".monitoring-modal",disabled:"Error"===e.getDeploymentStatus(t)},on:{click:function(r){e.currentNode=t}}},[r("i",{staticClass:"fa fa-fw fa-thermometer"})]):e._e(),e.hasSerial(t)?r("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Open Terminal",expression:"'Open Terminal'"}],staticClass:"btn btn-sm border-0 btn-outline-dark",attrs:{disabled:"Error"===e.getDeploymentStatus(t)},on:{click:function(r){e.toggleTerminal(t)}}},[r("i",{staticClass:"fa fa-fw fa-terminal"})]):e._e(),e.hasCamera(t)?r("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Video",expression:"'Video'"}],staticClass:"btn btn-sm border-0 btn-outline-dark",attrs:{"data-toggle":"button","aria-pressed":"false",disabled:"Error"===e.getDeploymentStatus(t)},on:{click:function(r){e.toggleCamera(t)}}},[r("i",{staticClass:"fa fa-fw fa-video-camera"})]):e._e()])]):e._e(),e.showNodesCommands?r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedNodes,expression:"selectedNodes"}],attrs:{type:"checkbox",disabled:"Error"===e.getDeploymentStatus(t)},domProps:{value:t,checked:Array.isArray(e.selectedNodes)?e._i(e.selectedNodes,t)>-1:e.selectedNodes},on:{click:e.testAllChecked,change:function(r){var a=e.selectedNodes,n=r.target,s=!!n.checked;if(Array.isArray(a)){var i=t,o=e._i(a,i);n.checked?o<0&&(e.selectedNodes=a.concat([i])):o>-1&&(e.selectedNodes=a.slice(0,o).concat(a.slice(o+1)))}else e.selectedNodes=s}}})]):e._e()]),r("tr",[r("td",{staticClass:"p-0",attrs:{colspan:"7"}},[r("div",{staticClass:"d-flex align-items-center justify-content-between bg-secondary"},[r("terminal",{ref:"term_"+t,refInFor:!0,staticStyle:{"flex-grow":"1"},attrs:{cols:80,rows:20,node:t,expId:e.id,user:e.currentUser,token:e.token}}),e.hasCamera(t)?r("img",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.token&&e.cameraVisible(t),expression:"(token !== undefined) && cameraVisible(node)"}],staticClass:"camera",attrs:{src:e.cameraUrl(t),align:"right"}}):e._e()],1)])])]})],2)]),r("div",{staticClass:"modal fade firmware-modal",attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"firmwareModal","aria-hidden":"true"}},[r("div",{staticClass:"modal-dialog modal-lg"},[r("div",{staticClass:"modal-content"},[e._m(2),r("div",{staticClass:"modal-body py-4"},[r("label",{staticClass:"custom-file"},[r("input",{ref:"firmwareFile",staticClass:"custom-file-input",attrs:{type:"file",id:"file"},on:{change:function(t){e.changeFirmwareFile("firmwareFile")}}}),r("span",{staticClass:"custom-file-control"},[e._v(e._s(e.firmwareFile&&e.firmwareFile.name))])]),r("hr"),r("firmware-list",{attrs:{archi:e.selectedArchis.concat([void 0]),select:!0},on:{select:function(t){return e.flashResourcesFirmware(t)}}})],1),r("div",{staticClass:"modal-footer dborder-0 dbg-light"},[r("button",{staticClass:"btn",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Close")]),r("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){t.preventDefault(),e.flashFirmware("firmwareFile")}}},[e._v("Flash")])])])])]),r("div",{staticClass:"modal fade monitoring-modal",attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"monitoringModal","aria-hidden":"true"}},[r("div",{staticClass:"modal-dialog"},[r("div",{staticClass:"modal-content"},[e._m(3),r("div",{staticClass:"modal-body py-4"},[r("monitoring-list",{attrs:{archi:e.selectedArchis[0],select:!0},on:{select:function(t){return e.updateMonitoring(t)}}})],1),e._m(4)])])])],2)},nn=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a",{staticClass:"dropdown-item",attrs:{href:"#","data-toggle":"modal","data-target":".firmware-modal"}},[r("i",{staticClass:"fa fa-fw fa-microchip"}),e._v(" Flash firmware")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a",{staticClass:"dropdown-item",attrs:{href:"#","data-toggle":"modal","data-target":".monitoring-modal"}},[r("i",{staticClass:"fa fa-fw fa-thermometer"}),e._v(" Update monitoring")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"modal-header bg-light"},[r("h5",{staticClass:"modal-title"},[e._v("Select firmware")]),r("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[r("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"modal-header bg-light"},[r("h5",{staticClass:"modal-title"},[e._v("Select monitoring")]),r("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[r("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"modal-footer dborder-0 dbg-light"},[r("button",{staticClass:"btn",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Close")])])}],sn=r("9393"),on=(r("aef6"),r("f559"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"xterm"})}),cn=[],ln=(r("9368"),r("59bf")),un=r("2e81");ln["Terminal"].applyAddon(un);var dn={name:"Terminal",props:{cols:Number,rows:Number,convertEol:Boolean,termName:String,cursorBlink:Boolean,cursorStyle:String,bellSound:String,bellStyle:String,enableBold:Boolean,fontFamily:String,fontSize:Number,fontWeight:String,fontWeightBold:String,lineHeight:Number,letterSpacing:Number,scrollback:Number,screenKeys:Boolean,debug:Boolean,macoptionsIsMeta:Boolean,cancelEvents:Boolean,disableStdin:Boolean,useFlowControl:Boolean,allowTransparency:Boolean,tabStopWidth:Number,theme:Object,node:String,expId:[String,Number],user:String,token:String},data:function(){return{options:{cols:80,rows:20,screenKeys:!0,useStyle:!0},ws:void 0,attached:!1}},watch:{cols:function(e){this.$terminal.resize(e,this.rows)},rows:function(e){this.$terminal.resize(this.cols,e)},options:{handler:function(e){var t=this;Object.keys(e).forEach(function(r){t[r]!==e[r]&&t.$emit("update:"+r,e[r])})},deep:!0}},mounted:function(){},beforeDestroy:function(){this.disconnect(),this.detach()},methods:{attach:function(){var e=this;Object.keys(this.$props).forEach(function(t){return e.$set(e.options,t,e[t])});var t=new ln["Terminal"](this.options);t.setOption("convertEol",!0),t.open(this.$el,!0),t.fit(),this.attached=!0,this.buffer&&t.write(this.buffer.replace(/\n/g,"\r\n")+"\r\n"),t.on("blur",function(){return e.$emit("blur")}),t.on("focus",function(){return e.$emit("focus")}),t.on("resize",function(t){t.cols!==e.cols&&e.$emit("update:cols",t.cols),t.rows!==e.rows&&e.$emit("update:rows",t.rows)}),t.on("title",function(t){return e.$emit("update:title",t)}),this.$terminal=t,Object.keys(this.$props).forEach(function(t){return e.$watch(t,function(r){e.options[t]=r})})},detach:function(){this.$terminal&&this.$terminal.dispose(),this.attached=!1},connect:function(){var e=this;if(this.token){var t=this.node.split("."),r=Object(sn["a"])(t,2),a=r[0],n=r[1],s=this.node.startsWith("a8")?"ssh":"serial",i="wss://".concat("www.iot-lab.info",":443/ws"),o="".concat(i,"/").concat(n,"/").concat(this.expId,"/").concat(a,"/").concat(s),c=new WebSocket(o,[this.user,"token",this.token]);this.ws=c;var l=this.$terminal;c.onopen=function(e){var t="";l.on("key",function(e,r){"serial"===s&&"Backspace"===r.key?(l.write("\b \b"),t=t.slice(0,-1)):"Del"===r.key?l.write("\b \b"):(l.write(e),"Enter"===r.key?(l.write("\n"),c.send(t+"\n"),t=""):t+=e)})},c.onmessage=function(e){l.write(e.data)},c.onclose=function(t){t.reason&&e.$notify({text:"Closing terminal: ".concat(t.reason),type:"warning"}),e.detach()},c.onerror=function(t){e.$notify({text:"Terminal error",type:"error"}),e.detach()}}else this.$terminal.write("Experiment token not found")},disconnect:function(){this.ws&&this.ws.close()},fit:function(){this.$terminal.fit()},fit_:function(){var e=this,t=this.$el.parentNode,r=this.$terminal;r.element.style.display="none",setTimeout(function(){e.$el.style.width=t.offsetWidth-e.$el.offsetLeft+t.offsetLeft+"px",e.$el.style.height=t.offsetHeight-e.$el.offsetTop+t.offsetTop+"px",r.fit(),r.element.style.display="",r.refresh(0,r.rows-1)},0)},focus:function(){this.$terminal.focus()},blur:function(){this.$terminal.blur()}}},pn=dn,mn=Object(G["a"])(pn,on,cn,!1,null,null,null);mn.options.__file="Terminal.vue";var fn=mn.exports,hn=!0,vn={name:"ExperimentDetails",components:{Terminal:fn,MonitoringList:kr,FirmwareList:Lr},props:{id:{type:[Number,String]}},data:function(){return{experiment:{name:void 0},deploymentStatus:void 0,states:Ht,selectedNodes:[],nodes:[],nodesCameraState:{},token:void 0,allSelected:!1,firmwareFile:void 0,firmwareIsBinary:!1,firmwareBinaryOffset:"0x0",firmware:void 0,currentUser:Z.username,currentNode:void 0}},computed:{deployedNodes:function(){var e=this;return this.experiment.nodes.filter(function(t){return"Success"===e.getDeploymentStatus(t)})},startDate:function(){return[this.experiment.start_date,this.experiment.scheduled_date,this.experiment.submission_date].find(function(e){return"1970-01-01T00:00:00Z"!==e})},showNodesCommands:function(){return"Running"===this.experiment.state&&this.experiment.user===this.currentUser},expDuration:function(){return this.experiment.effective_duration||"0"},showRemaining:function(){return"remaining ".concat(this.$options.filters.humanizeDuration(this.experiment.submitted_duration-this.experiment.effective_duration))},experimentProgress:function(){return Math.min(100,Math.round(100*this.experiment.effective_duration/this.experiment.submitted_duration))},selectedArchis:function(){var e=this.currentNode?[this.currentNode]:this.selectedNodes;return Object(yt["a"])(new Set(e.map(function(e){return qt(e)})))}},created:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getExperiment(this.id);case 2:this.$nextTick(function(){I()('[data-toggle="popover"]').popover({trigger:"focus",html:!0})});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),beforeRouteUpdate:function(e,t,r){this.getExperiment(e.params.id)},beforeRouteLeave:function(e,t,r){I()("body").removeClass("modal-open"),I()(".modal-backdrop").remove(),r()},destroyed:function(){hn=clearTimeout(hn)},methods:{getExperiment:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){var t,r=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:this.id,e.prev=1,e.next=4,J.getExperiment(t);case 4:if(this.experiment=e.sent,0!==this.nodes.length||"alias"===this.experiment.type){e.next=9;break}return e.next=8,J.getExperimentNodes(t);case 8:this.nodes=e.sent;case 9:if(hn&&["Launching","Finishing"].includes(this.experiment.state)?hn=setTimeout(this.getExperiment,3e3):Ht.scheduled.includes(this.experiment.state)&&(hn=setTimeout(this.getExperiment,1e4)),this.deploymentStatus||["Waiting","toLaunch","Launching"].includes(this.experiment.state)){e.next=14;break}return e.next=13,J.getExperimentDeployment(t);case 13:this.deploymentStatus=e.sent;case 14:if(this.token||"Running"!==this.experiment.state){e.next=18;break}return e.next=17,J.getExperimentToken(t);case 17:this.token=e.sent;case 18:["Finishing","Terminated","Stopped"].includes(this.experiment.state)&&(this.token=void 0),e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](1),this.$notify({text:e.t0.message,type:"error"});case 24:case"end":return e.stop()}},e,this,[[1,21]])}));return function(){return e.apply(this,arguments)}}(),canFlash:function(e){return!(e.startsWith("a8-")||e.startsWith("rtl-sdr-")||e.startsWith("pycom-")||e.startsWith("lora-gw-")||e.startsWith("rpi3-"))},canReset:function(e){return!(e.startsWith("a8-")||e.startsWith("rtl-sdr-")||e.startsWith("lora-gw-")||e.startsWith("rpi3-"))},hasProfile:function(e){return!(e.startsWith("rtl-sdr-")||e.startsWith("lora-gw-"))},hasSerial:function(e){return!(e.startsWith("a8-")||e.startsWith("rtl-sdr-")||e.startsWith("lora-gw-")||e.startsWith("rpi3-"))},nodeOrAlias:function(e){return"string"===typeof e?e:'<span class="badge badge-info">'.concat(this.$options.filters.formatArchiRadio(e.properties.archi)," ").concat(e.properties.mobile?"(mobile)":""," @ ").concat(e.properties.site,"</span> x ").concat(e.nbnodes," ")},getUid:function(e){var t=this.nodes.find(function(t){return t.network_address===e});return t?t.uid:""},getFirmware:function(e){if(this.experiment.firmwareassociations)return this.experiment.firmwareassociations.reduce(function(t,r){return r.nodes.some(function(t){return t===(e.alias||e)})?r.firmwarename:t},"")},getMonitoring:function(e){if(this.experiment.profileassociations)return this.experiment.profileassociations.reduce(function(t,r){return r.nodes.some(function(t){return t===(e.alias||e)})?r.profilename:t},"")},getDeploymentStatus:function(e){return void 0===this.deploymentStatus?"":(this.deploymentStatus["0"]||[]).includes(e)?"Success":(this.deploymentStatus["1"]||[]).includes(e)?"Error":"Unknown"},stopExperiment:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(confirm("Cancel this experiment?")){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,J.stopExperiment(t);case 5:this.$notify({text:"Experiment ".concat(t," stopping"),type:"success"}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](2),this.$notify({text:e.t0.message,type:"error"});case 11:case"end":return e.stop()}},e,this,[[2,8]])}));return function(t){return e.apply(this,arguments)}}(),reloadExperiment:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.reloadExperiment(t);case 3:r=e.sent,this.$notify({text:"Experiment ".concat(r.id," submitted"),type:"success"}),this.$router.push({name:"dashboard"}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.$notify({text:e.t0.message,type:"error"});case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}(),downloadExperiment:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=S,e.t1="experiment_".concat(t,".tar.gz"),e.next=5,J.getExperimentArchive(t);case 5:e.t2=e.sent,(0,e.t0)(e.t1,e.t2,"application/gzip"),e.next=12;break;case 9:e.prev=9,e.t3=e["catch"](0),this.$notify({text:e.t3.response.data.message||"Failed to download archive",type:"error"});case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(t){return e.apply(this,arguments)}}(),toggleSelectedNodes:function(){this.selectedNodes.length===this.deployedNodes.length?this.selectedNodes=[]:this.selectedNodes=this.deployedNodes},testAllChecked:function(){this.$nextTick(function(){this.allSelected=this.selectedNodes.length===this.deployedNodes.length})},toggleNodeSelected:function(e){"Error"!==this.getDeploymentStatus(e)&&(this.selectedNodes.includes(e)?this.selectedNodes=this.selectedNodes.filter(function(t){return t!==e}):this.selectedNodes.push(e),this.testAllChecked())},sendCmd:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){var r,a,n,s,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.currentNode?[this.currentNode]:this.selectedNodes,delete this.currentNode,0!==r.length){e.next=5;break}return this.$notify({text:"Select some nodes first",type:"warning"}),e.abrupt("return");case 5:return e.next=7,J.sendNodesCommand(this.id,t,r).catch(function(e){i.$notify({text:e.response.data.message,type:"error"})});case 7:a=e.sent,n=Object.values(a).reduce(function(e,t){return e.concat(t)}),s=r.filter(function(e){return!n.includes(e)}),s.length>0&&this.$notify({text:"".concat(b(t)," not supported on ").concat(w(s.length,"node"),":<br><br>")+s.join("<br>"),type:"warning",duration:6e3}),a["1"]&&a["1"].length>0&&this.$notify({text:"".concat(b(t)," failed on ").concat(w(a["1"].length,"node"),":<br><br>")+a["1"].join("<br>"),type:"error",duration:1e4}),a["0"]&&a["0"].length>0&&this.$notify({text:"".concat(b(t)," successful on ").concat(w(a["0"].length,"node"),":<br><br>")+a["0"].join("<br>"),type:"success",duration:6e3});case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),changeFirmwareFile:function(e){this.firmwareFile=this.$refs[e].files[0]},flashFirmware:function(e){var t=this.currentNode?[this.currentNode]:this.selectedNodes;if(delete this.currentNode,0!==t.length){if(void 0!==this.firmwareFile){this.$notify({text:"Uploading file...",type:"info",duration:-1});var r=new FileReader;r.onload=function(e,t){return function(){var r=Object(W["a"])(regeneratorRuntime.mark(function r(a){var n,s,i,o;return regeneratorRuntime.wrap(function(r){while(1)switch(r.prev=r.next){case 0:if(e.$notify({clean:!0}),e.firmwareIsBinary=e.firmwareFile.name.endsWith(".bin"),e.firmwareIsBinary){r.next=9;break}return r.next=5,J.checkFirmware(a.target.result);case 5:if(n=r.sent,e.$notify({text:"firmware format ".concat(n.format),type:"unknown"===n.format?"error":"info"}),"unknown"!==n.format){r.next=9;break}return r.abrupt("return");case 9:if(e.$notify({text:"Flashing firmware...",type:"info",duration:-1}),I()(".modal").modal("hide"),e.firmwareIsBinary){r.next=17;break}return r.next=14,J.flashFirmware(e.id,t,a.target.result).catch(function(t){e.$notify({clean:!0}),e.$notify({text:t.response.data.message,type:"error"})});case 14:s=r.sent,r.next=20;break;case 17:return r.next=19,J.flashBinaryFirmware(e.id,t,a.target.result,parseInt(e.firmwareBinaryOffset,16)).catch(function(t){e.$notify({clean:!0}),e.$notify({text:t.response.data.message,type:"error"})});case 19:s=r.sent;case 20:i=Object.values(s).reduce(function(e,t){return e.concat(t)}),o=t.filter(function(e){return!i.includes(e)}),e.$notify({clean:!0}),o.length>0&&e.$notify({text:"Flash not supported on ".concat(w(o.length,"node"),":<br><br>")+o.join("<br>"),type:"warning",duration:6e3}),s["1"]&&s["1"].length>0&&e.$notify({text:"Flash failed on ".concat(w(s["1"].length,"node"),":<br><br>")+s["1"].join("<br>"),type:"error",duration:1e4}),s["0"]&&s["0"].length>0&&e.$notify({text:"Flash successful on ".concat(w(s["0"].length,"node"),":<br><br>")+s["0"].join("<br>"),type:"success",duration:6e3});case 26:case"end":return r.stop()}},r,this)}));return function(e){return r.apply(this,arguments)}}()}(this,t),r.readAsDataURL(this.firmwareFile)}}else this.$notify({text:"Select some nodes first",type:"warning"})},flashResourcesFirmware:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){var r,a,n,s,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=this.currentNode?[this.currentNode]:this.selectedNodes,delete this.currentNode,I()(".modal").modal("hide"),this.$notify({text:"Flashing firmware...",type:"info",duration:-1}),e.next=6,J.flashResourcesFirmware(this.id,r,t).catch(function(e){i.$notify({clean:!0}),i.$notify({text:e.response.data.message||"An error occured",type:"error"})});case 6:a=e.sent,n=Object.values(a).reduce(function(e,t){return e.concat(t)}),s=r.filter(function(e){return!n.includes(e)}),this.$notify({clean:!0}),s.length>0&&this.$notify({text:"Flash not supported on ".concat(w(s.length,"node"),":<br><br>")+s.join("<br>"),type:"warning",duration:6e3}),a["1"]&&a["1"].length>0&&this.$notify({text:"Flash failed on ".concat(w(a["1"].length,"node"),":<br><br>")+a["1"].join("<br>"),type:"error",duration:1e4}),a["0"]&&a["0"].length>0&&this.$notify({text:"Flash successful on ".concat(w(a["0"].length,"node"),":<br><br>")+a["0"].join("<br>"),type:"success",duration:6e3});case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),updateMonitoring:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(t){var r,a,n,s,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=this.currentNode?[this.currentNode]:this.selectedNodes,delete this.currentNode,I()(".modal").modal("hide"),e.next=5,J.updateMonitoring(this.id,r,t).catch(function(e){i.$notify({text:e.response.data.message||"An error occured",type:"error"})});case 5:a=e.sent,n=Object.values(a).reduce(function(e,t){return e.concat(t)}),s=r.filter(function(e){return!n.includes(e)}),s.length>0&&this.$notify({text:"Update monitoring not supported on ".concat(w(s.length,"node"),":<br><br>")+s.join("<br>"),type:"warning",duration:6e3}),a["1"]&&a["1"].length>0&&this.$notify({text:"Update monitoring failed on ".concat(w(a["1"].length,"node"),":<br><br>")+a["1"].join("<br>"),type:"error",duration:1e4}),a["0"]&&a["0"].length>0&&this.$notify({text:"Update monitoring successful on ".concat(w(a["0"].length,"node"),":<br><br>")+a["0"].join("<br>"),type:"success",duration:6e3});case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),hasCamera:function(e){var t=this.nodes.find(function(t){return t.network_address===e});return!!t&&"1"===t.camera},toggleCamera:function(e){var t=this;this.nodesCameraState[e]=!this.nodesCameraState[e],this.$forceUpdate(),this.$nextTick(function(){var r=t.$refs["term_".concat(e)][0];r.fit()})},cameraVisible:function(e){return!0===this.nodesCameraState[e]},cameraUrl:function(e){if(void 0!==this.token&&this.hasCamera(e)&&this.cameraVisible(e)){var t=e.split("."),r=Object(sn["a"])(t,2),a=r[0],n=r[1],s="www.iot-lab.info",i="https://".concat(s,"/camera/").concat(n,"/").concat(this.id,"/").concat(a,"/").concat(this.token);return i}},toggleTerminal:function(e){var t=this.$refs["term_".concat(e)][0];t.attached?(t.disconnect(),t.detach()):(t.attach(),t.focus(),t.connect())}}},gn=vn,bn=(r("e2fa"),Object(G["a"])(gn,an,nn,!1,null,"30e617b3",null));bn.options.__file="ExperimentDetails.vue";var wn=bn.exports,yn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container mt-3"},[r("h4",{staticClass:"d-none d-sm-block d-md-none"},[e._v("My experiments")]),void 0!=e.total.running?r("p",[r("span",{staticClass:"badge badge-pill badge-success"},[e._v(e._s(e.total.running))]),e._v(" Running\n    "),r("span",{staticClass:"badge badge-pill badge-warning"},[e._v(e._s(e.total.upcoming))]),e._v(" Scheduled\n    "),r("span",{staticClass:"badge badge-pill badge-dark"},[e._v(e._s(e.total.terminated))]),e._v(" Completed\n  ")]):r("p",[r("span",{staticClass:"badge badge-pill badge-success"},[e._v("?")]),e._v(" Running\n    "),r("span",{staticClass:"badge badge-pill badge-warning"},[e._v("?")]),e._v(" Scheduled\n    "),r("span",{staticClass:"badge badge-pill badge-dark"},[e._v("?")]),e._v(" Completed\n  ")]),r("experiment-list",{ref:"runningExpList",attrs:{title:"Scheduled",user:"@self",state:"all_scheduled"},on:{completed:e.updateTotal}}),r("p",[r("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"experiment"}}},[e._v("New experiment")])],1),e.total.terminated?[r("experiment-list",{attrs:{title:"Recent",user:"@self",state:"all_terminated",show:5,total:e.total.terminated},on:{started:e.refreshRunning,loaded:function(t){e.spinner=!1}}})]:e._e(),e.spinner?[r("i",{staticClass:"fa fa-spinner fa-spin fa-fw mr-1"}),r("i",[e._v("loading experiments")])]:e._e()],2)},_n=[],xn={name:"Dashboard",components:{ExperimentList:Jt},data:function(){return{total:{},spinner:!0,created:!1}},beforeRouteEnter:function(e,t,r){r(function(e){e.created&&(e.$notify({group:"popup",clean:!0}),e.$refs.runningExpList.refresh(),e.$refs.runningExpList.createPolling(),e.updateTotal())})},beforeRouteLeave:function(e,t,r){this.$refs.runningExpList.destroyPolling(),r()},created:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.updateTotal();case 2:this.created=!0;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),mounted:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.$notify({group:"popup",clean:!0}),e.next=3,J.getUserInfo();case 3:t=e.sent,t.category||this.$notify({group:"popup",type:"fill-user-profile"});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{updateTotal:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,J.getUserExperimentsCount();case 2:this.total=e.sent,0===this.total.terminated&&(this.spinner=!1);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),refreshRunning:function(){this.$refs.runningExpList.refresh()}}},Cn=xn,kn=Object(G["a"])(Cn,yn,_n,!1,null,null,null);kn.options.__file="Dashboard.vue";var Sn=kn.exports,An=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container mt-3"},[r("h4",[r("i",{staticClass:"fa fa-fw fa-hourglass-half",attrs:{"aria-hidden":"true"}}),e._v(" Running experiments ("+e._s(e.runningExp.length)+")")]),r("running-experiments",{attrs:{"exp-list":e.runningExp}}),r("div",{staticClass:"float-right mt-1 mb-4"},[r("div",{staticClass:"dropdown d-inline-block "},[e._m(0),r("div",{staticClass:"dropdown-menu dropdown-menu-right",attrs:{"aria-labelledby":"dropdownMenuButton"}},[r("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.downloadJson(t)}}},[e._v("IoT-LAB nodes properties "),r("span",{staticClass:"badge badge-pill badge-info"},[e._v("JSON")])]),r("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.downloadCsv(t)}}},[e._v("IoT-LAB nodes  properties "),r("span",{staticClass:"badge badge-pill badge-info"},[e._v("CSV")])])])]),e.isAdmin?r("button",{staticClass:"btn btn-warning",on:{click:e.updateNodesProperties}},[r("i",{staticClass:"fa fa-lock"}),e._v(" Update properties")]):e._e()]),e._m(1),r("p",{staticClass:"lead mb-0"},[e._v("Sites")]),e.sites?r("p",{staticClass:"mb-2"},[r("span",{staticClass:"badge badge-pill mr-1 cursor",class:{"badge-primary":"all"===e.currentSite,"badge-secondary":"all"!==e.currentSite},on:{click:function(t){e.currentSite="all"}}},[e._v(e._s(e.sites.length)+" sites")]),e._l(e.sites,function(t){return r("span",{staticClass:"badge badge-pill mr-1 cursor",class:{"badge-primary":e.currentSite===t,"badge-secondary":e.currentSite!==t},on:{click:function(r){e.currentSite=t}}},[e._v(e._s(t.site))])})],2):e._e(),r("p",{staticClass:"lead mb-0"},[e._v("Architectures")]),e.sites?r("p",{staticClass:"mb-2"},[r("span",{staticClass:"badge badge-pill mr-1 cursor",class:{"badge-primary":"all"===e.currentArchi,"badge-secondary":"all"!==e.currentArchi},on:{click:function(t){e.currentArchi="all"}}},[e._v(e._s(e.archis.length)+" archis")]),e._l(e.archis,function(t){return r("span",{staticClass:"badge badge-pill mr-1 cursor",class:{"badge-primary":e.currentArchi===t,"badge-secondary":e.currentArchi!==t},on:{click:function(r){e.currentArchi=t}}},[e._v(e._s(e._f("formatArchi")(t))+"\n      "),e.$options.filters.formatRadio(t)?r("span",{staticClass:"font-weight-normal"},[e._v("("+e._s(e._f("formatRadio")(t))+")")]):e._e()])})],2):e._e(),r("p",{staticClass:"lead mb-0"},[e._v("Nodes")]),e.nodes?r("p",{staticClass:"mb-2"},[r("span",{staticClass:"badge badge-pill mr-1 cursor",class:null===e.nodeFilter?"badge-primary":"badge-secondary",on:{click:function(t){e.nodeFilter=null}}},[e._v(e._s(e.getNodes().length)+" nodes")]),e.getNodes(["Alive"]).length?r("span",{staticClass:"badge badge-pill mr-1 cursor",class:e.nodeFilter===e.nodeFilters.alive?"badge-primary":"badge-success",on:{click:function(t){e.nodeFilter=e.nodeFilters.alive}}},[e._v(e._s(e.getNodes(["Alive"]).length)+" available")]):e._e(),e.getNodes(["Busy"]).length?r("span",{staticClass:"badge badge-pill mr-1 cursor",class:e.nodeFilter===e.nodeFilters.busy?"badge-primary":"badge-warning",on:{click:function(t){e.nodeFilter=e.nodeFilters.busy}}},[e._v(e._s(e.getNodes(["Busy"]).length)+" busy")]):e._e(),e.getNodes(["Absent","Suspected"]).length?r("span",{staticClass:"badge badge-pill mr-1 cursor",class:e.nodeFilter===e.nodeFilters.unavailable?"badge-primary":"badge-danger",on:{click:function(t){e.nodeFilter=e.nodeFilters.unavailable}}},[e._v(e._s(e.getNodes(["Absent","Suspected"]).length)+" unavailable")]):e._e(),e.getNodes(["Dead"]).length?r("span",{staticClass:"badge badge-pill mr-1 cursor",class:e.nodeFilter===e.nodeFilters.dead?"badge-primary":"badge-dark",on:{click:function(t){e.nodeFilter=e.nodeFilters.dead}}},[e._v(e._s(e.getNodes(["Dead"]).length)+" dead")]):e._e(),e.getNodes().filter(function(e){return e.mobile}).length?r("span",{staticClass:"badge badge-pill mr-1 cursor",class:e.nodeFilter===e.nodeFilters.mobile?"badge-primary":"badge-info",on:{click:function(t){e.nodeFilter=e.nodeFilters.mobile}}},[e._v(e._s(e.getNodes().filter(function(e){return e.mobile}).length)+" mobile")]):e._e()]):r("p",[r("i",{staticClass:"fa fa-spinner fa-spin fa-fw"})]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-8"},[r("label",{staticClass:"mt-2 mr-3 text-muted font-italic"},[e._v("Showing "+e._s(e.filteredNodes.length)+" nodes")]),r("a",{attrs:{href:""},on:{click:function(t){t.preventDefault(),e.showMap=!e.showMap}}},[r("i",{staticClass:"fa fa-map-o fa-fw fa-lg",attrs:{"aria-hidden":"true"}}),e._v(" view on site map "),r("i",{staticClass:"fa fa-caret-down",attrs:{"aria-hidden":"true"}})])]),r("div",{staticClass:"col-md-4"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"form-control mb-3",attrs:{type:"text",placeholder:"Search by hostname or uid"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}})])]),r("map-3d",{directives:[{name:"show",rawName:"v-show",value:e.showMap,expression:"showMap"}],attrs:{nodes:e.filteredNodes,shows:e.showMap},on:{selectSite:function(t){return e.currentSite=e.sites.find(function(e){return e.site===t})}}}),e.nodes.length?r("table",{staticClass:"table table-striped table-sm"},[r("thead",[r("tr",[r("th",{staticClass:"cursor",attrs:{title:"sort by hostname"},on:{click:function(t){e.sortBy(function(t){return e.nodeSortByHostname(t)})}}},[e._v("Node hostname")]),r("th",{staticClass:"cursor text-center",attrs:{title:"sort by state"},on:{click:function(t){e.sortBy(function(e){return e.state})}}},[e._v("State")]),r("th",{staticClass:"cursor",attrs:{title:"sort by archi"},on:{click:function(t){e.sortBy(function(e){return e.archi})}}},[e._v("Archi "),r("span",{staticClass:"text-muted font-weight-normal"},[e._v("(radio)")])]),r("th",{staticClass:"cursor",attrs:{title:"sort by site"},on:{click:function(t){e.sortBy(function(e){return e.site})}}},[e._v("Site")]),r("th",{staticClass:"cursor",attrs:{title:"sort by mobility"},on:{click:function(t){e.sortBy(function(e){return e.mobility_type},e.reverse=!0)}}},[e._v("Mobility")]),r("th",{staticClass:"cursor",attrs:{title:"sort by uid"},on:{click:function(t){e.sortBy(function(e){return e.uid})}}},[e._v("UID")]),r("th",{staticClass:"cursor",attrs:{title:"sort by X"},on:{click:function(t){e.sortBy(function(e){return e.x},e.reverse=!0)}}},[e._v("X")]),r("th",{staticClass:"cursor",attrs:{title:"sort by Y"},on:{click:function(t){e.sortBy(function(e){return e.y},e.reverse=!0)}}},[e._v("Y")]),r("th",{staticClass:"cursor",attrs:{title:"sort by Z"},on:{click:function(t){e.sortBy(function(e){return e.z},e.reverse=!0)}}},[e._v("Z")])])]),r("tbody",e._l(e.filteredNodes,function(t){return r("tr",[r("td",[e._v(e._s(t.network_address))]),r("td",{staticClass:"text-center"},["Busy"!==t.state?r("span",{staticClass:"badge badge-state",class:e._f("stateBadgeClass")(t.state)},[e._v(e._s(t.state))]):e.isAdmin?r("router-link",{staticClass:"badge badge-state",class:e._f("stateBadgeClass")(t.state),attrs:{to:{name:"experimentDetails",params:{id:e.getBusyJob(t).id}},title:e.getBusyTitle(t)}},[e._v(e._s(t.state))]):r("span",{staticClass:"badge badge-state cursor-help",class:e._f("stateBadgeClass")(t.state),attrs:{title:e.getBusyTitle(t)}},[e._v(e._s(t.state))])],1),r("td",{staticClass:"text-capitalize-first"},[e._v(e._s(e._f("formatArchi")(t.archi))+"\n          "),e.$options.filters.formatRadio(t.archi)?r("span",{staticClass:"text-muted"},[e._v("("+e._s(e._f("formatRadio")(t.archi))+")")]):e._e()]),r("td",{staticClass:"text-capitalize"},[e._v(e._s(t.site))]),t.mobile?r("td",[e._v("Yes "),r("span",{staticClass:"text-muted"},[e._v("("+e._s(t.mobility_type)+")")])]):r("td"),r("td",[e._v(e._s(t.uid))]),r("td",[e._v(e._s(t.x))]),r("td",[e._v(e._s(t.y))]),r("td",[e._v(e._s(t.z))])])}))]):e._e()],1)},Nn=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("button",{staticClass:"btn btn-light mr-1",attrs:{"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[r("i",{staticClass:"fa fa-fw fa-download"}),e._v(" Download")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h4",[r("i",{staticClass:"fa fa-fw fa-share-alt",attrs:{"aria-hidden":"true"}}),e._v(" Nodes properties")])}],Rn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mt-3 mb-4"},[e.expList.length?r("table",{staticClass:"table table-striped table-sm mt-3"},[e._m(0),r("tbody",e._l(e.expList,function(t){return r("tr",[e.isAdmin?r("td",{staticClass:"nowrap"},[r("router-link",{attrs:{to:{name:"experimentDetails",params:{id:t.id}}}},[e._v(e._s(t.id))])],1):r("td",{staticClass:"nowrap"},[e._v(e._s(t.id))]),e.isAdmin?r("td",{staticClass:"nowrap"},[r("router-link",{attrs:{to:{name:"users",query:{search:t.user}}}},[e._v(e._s(t.user))])],1):r("td",{staticClass:"nowrap"},[e._v(e._s(t.user))]),r("td",{staticClass:"durationProgress nowrap",style:"text-align: center; --progress: "+e.experimentProgress(t)+"%",attrs:{title:e.showRemaining(t)}},[e._v("\n          "+e._s(e._f("humanizeDuration")(t.effective_duration))+"\n          "),r("small",{staticClass:"text-dark"},[e._v("("+e._s(e.experimentProgress(t))+"%)")])]),r("td",{staticClass:"nowrap"},[r("span",{staticClass:"badge badge-state",class:e._f("stateBadgeClass")(t.state)},[e._v(e._s(t.state))])]),r("td",{staticClass:"nowrap",attrs:{title:e.showStarted(t)}},[e._v(e._s(e._f("formatDateTime")(t.start_date,t.submitted_duration)))]),r("td",{staticStyle:{width:"600px"}},[r("div",{staticClass:"ellipsis ellipsis-indicator cursor",on:{click:e.toggleEllipsis}},[t.nodes.length<=1?r("span",{staticClass:"text-muted nowrap mr-1"},[e._v("("+e._s(t.nodes.length)+" node)")]):r("span",{staticClass:"text-muted nowrap mr-1"},[e._v("("+e._s(t.nodes.length)+" nodes)")]),e._l([].concat(t.nodes).sort(function(t,r){return e.nodeSortByHostname(t,r)}),function(a,n){return r("span",{staticClass:"nodes mr-1",class:{comma:n+1<t.nodes.length}},[e._v(e._s(e._f("stripDomain")(a)))])})],2)])])}))]):r("p",{staticClass:"text-muted font-italic"},[e._v("\n    No experiment currently running\n  ")])])},$n=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",[r("th",[e._v("Id")]),r("th",[e._v("User")]),r("th",[e._v("Elapsed")]),r("th",[e._v("State")]),r("th",[e._v("Ending")]),r("th",[e._v("Nodes")])])])}];function jn(e){if(e.composedPath&&e.composedPath())return e.composedPath();if(e.path)return e.path;var t=[],r=e.target;while(r.parentNode)t.push(r),r=r.parentNode;return t.push(document,window),t}var En={name:"RunningExperiments",props:{expList:{type:Array,default:function(){return[]}}},data:function(){return{isAdmin:Z.isAdmin}},methods:{showStarted:function(e){return"started ".concat(this.$options.filters.formatDateTime(e.start_date))},showRemaining:function(e){return"remaining ".concat(this.$options.filters.humanizeDuration(e.submitted_duration-e.effective_duration))},experimentProgress:function(e){return Math.min(100,Math.round(100*e.effective_duration/e.submitted_duration))},nodeSortByHostname:function(e,t){var r=function(e){var t=e.split(".");return t.push(t.shift()),t.join(".")};return r(e).localeCompare(r(t))},displayNodes:function(e){var t=this;return e.nodes.map(function(e){return t.$options.filters.stripDomain(e)}).sort().map(function(e){return"<i>".concat(e,"</i>")}).join(", ")},toggleEllipsis:function(e){jn(e).find(function(e){return"DIV"===e.tagName}).classList.toggle("ellipsis")}}},Fn=En,Pn=(r("9802"),Object(G["a"])(Fn,Rn,$n,!1,null,"19e09b28",null));Pn.options.__file="RunningExperiments.vue";var On=Pn.exports,Mn={name:"Status",components:{Map3d:Ka,RunningExperiments:On},data:function(){return{isAdmin:Z.isAdmin,sites:[],nodes:[],runningExp:[],currentSite:"all",currentArchi:"all",nodeFilter:null,nodeFilters:{alive:function(e){return"Alive"===e.state},busy:function(e){return"Busy"===e.state},unavailable:function(e){return["Absent","Suspected"].includes(e.state)},dead:function(e){return"Dead"===e.state},mobile:function(e){return e.mobile}},search:"",showMap:!1}},created:function(){var e=this;J.getSitesDetails().then(function(t){e.sites=t.sort(function(e,t){return e.site.localeCompare(t.site)})}).catch(function(t){e.$notify({text:t.response.data.message||"Failed to fetch sites details",type:"error"})}),J.getNodes().then(function(t){e.nodes=t}).catch(function(t){e.$notify({text:t.response.data.message||"Failed to fetch nodes",type:"error"})}),J.getRunningExperiments().then(function(t){e.runningExp=t}).catch(function(t){e.$notify({text:t.response.data.message||"Failed to fetch running experiments",type:"error"})})},computed:{archis:function(){var e,t=this;return e="all"===this.currentSite?Array.from(this.sites.reduce(function(e,t){return t.archis.map(function(t){return e.add(t.archi)}),e},new Set)):this.sites.find(function(e){return e.site===t.currentSite.site}).archis.map(function(e){return e.archi}),e.sort(function(e,t){return e.localeCompare(t)})},filteredNodes:function(){var e=this,t=this.getNodes();return this.search&&(t=t.filter(function(t){return t.network_address.includes(e.search)||t.uid.includes(e.search)})),this.nodeFilter&&(t=t.filter(this.nodeFilter)),"all"!==this.currentSite&&(t=t.filter(function(t){return t.site===e.currentSite.site})),"all"!==this.currentArchi&&(t=t.filter(function(t){return t.archi===e.currentArchi})),t}},methods:{downloadJson:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,J.getNodes();case 2:t=e.sent,C(t,"iotlab-nodes");case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),downloadCsv:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,J.getNodes();case 2:t=e.sent,k(t,"iotlab-nodes",{fields:Object.keys(t[0]).sort()});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getNodes:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=this.nodes;return"all"!==this.currentSite&&(r=r.filter(function(t){return t.site===e.currentSite.site})),"all"!==this.currentArchi&&(r=r.filter(function(t){return t.archi===e.currentArchi})),t?r.filter(function(e){return t.includes(e.state)}):r},sortBy:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.nodes=this.nodes.sort(function(r,a){return e(r)===e(a)?t.nodeSortByHostname(r).localeCompare(t.nodeSortByHostname(a)):"string"===typeof e(r)||"string"===typeof e(a)?e(r).localeCompare(e(a)):"number"===typeof e(r)||"number"===typeof e(a)?e(r)-e(a):void console.log("Unhandled sort criteria",r.network_address,e(r),a.network_address,e(a))}),r&&this.nodes.reverse()},nodeSortByHostname:function(e){var t=e.network_address.split(".");return t.push(t.shift()),t.join(".")},updateNodesProperties:function(){var e=Object(W["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(confirm("Update all nodes properties. Are you sure?")){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,J.updateNodesProperties();case 5:return e.next=7,J.updateNodesPropertiesOldApi();case 7:this.$notify({text:"Nodes properties updated",type:"success"}),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),this.$notify({text:"An error occured",type:"error"});case 13:case"end":return e.stop()}},e,this,[[2,10]])}));return function(){return e.apply(this,arguments)}}(),getBusyJob:function(e){return this.runningExp.find(function(t){return t.nodes.includes(e.network_address)})},getBusyTitle:function(e){var t=this.getBusyJob(e);return void 0===t?"":"job #".concat(t.id,"\nuser ").concat(t.user,"\nending ").concat(this.$options.filters.formatDateTime(t.start_date,t.submitted_duration),"\nremaining ").concat(this.$options.filters.humanizeDuration(t.submitted_duration-t.effective_duration))}}},Dn=Mn,Tn=(r("215e"),Object(G["a"])(Dn,An,Nn,!1,null,"a1fe877a",null));Tn.options.__file="Status.vue";var Un=Tn.exports,In=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container",staticStyle:{"max-width":"1250px"},attrs:{id:"container_drawgantt"}},[r("iframe",{attrs:{id:"childframe",src:"/drawgantt",width:"100%",frameborder:"0"},on:{load:e.resizeFrame}})])},zn=[],Bn={name:"Drawgantt",data:function(){return{}},methods:{resizeFrame:function(){var e=document.documentElement.clientHeight-document.getElementById("container_drawgantt").offsetTop-10;document.getElementById("childframe").style.height=e+"px"}}},Ln=Bn,Gn=Object(G["a"])(Ln,In,zn,!1,null,null,null);Gn.options.__file="Drawgantt.vue";var qn=Gn.exports;a["default"].use(re["a"]);var Hn=new re["a"]({base:"testbed",mode:"history",routes:[{path:"/",redirect:"/dashboard"},{path:"/drawgantt",name:"drawgantt",component:qn},{path:"/signup",name:"signup",component:Ye},{path:"/reset",name:"reset",component:we},{path:"/login",name:"login",component:me},{path:"/activate",name:"activate",component:Qe},{path:"/dashboard",name:"dashboard",component:Sn,meta:{requiresAuth:!0}},{path:"/status",name:"status",component:Un,meta:{requiresAuth:!0}},{path:"/experiment",name:"experiment",component:rn,meta:{requiresAuth:!0}},{path:"/resources",name:"resources",component:sr,meta:{requiresAuth:!0},children:[{path:"monitoring",name:"listMonitoring",component:kr,meta:{requiresAuth:!0}},{path:"monitoring_new",name:"newMonitoring",component:br,meta:{requiresAuth:!0}},{path:"monitoring/:name",name:"monitoring",component:br,props:!0,meta:{requiresAuth:!0}},{path:"firmware",name:"listFirmware",component:Lr,meta:{requiresAuth:!0}},{path:"firmware_new",name:"newFirmware",component:Dr,meta:{requiresAuth:!0}},{path:"firmware/:name",name:"firmware",component:Dr,props:!0,meta:{requiresAuth:!0}}]},{path:"/account",name:"account",component:st,meta:{requiresAuth:!0}},{path:"/groups",name:"groups",component:gt,meta:{requiresAdmin:!0}},{path:"/users",name:"users",component:jt,meta:{requiresAdmin:!0}},{path:"/users/add",name:"addUsers",component:Tt,meta:{requiresAdmin:!0}},{path:"/users/:username/experiments",name:"userExperiments",component:er,props:!0,meta:{requiresAdmin:!0}},{path:"/experiments",name:"allExperiments",component:er,props:{username:""},meta:{requiresAdmin:!0}},{path:"/experiments/:id",name:"experimentDetails",component:wn,props:!0,meta:{requiresAuth:!0}},{path:"*",component:oe}]});Hn.beforeEach(function(e,t,r){e.meta.requiresAuth&&!Z.loggedIn?r({name:"login",query:{next:e.path}}):!e.meta.requiresAdmin||Z.isAdmin&&Z.loggedIn?r():r({name:"login",query:{next:e.path}})});var Wn=Hn,Yn=r("c1df"),Kn=r.n(Yn),Vn=r("8f14"),Jn=r.n(Vn),Zn=function(e){if(e)return Kn.a.unix(e).format("YYYY-MM-DD HH:mm:ss")},Xn=function(e){if(e)return Kn()(String(e)).format("YYYY-MM-DD")},Qn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e)return Kn()(String(e)).add(t,"minutes").format("YYYY-MM-DD HH:mm")},es=function(e){if(e)return Kn()(String(e)).format("YYYY-MM-DD HH:mm:ss")},ts=function(e){if(e){var t=60*e*1e3;return Jn()(t,{units:["y","d","h","m"],largest:2,round:!0})}},rs=function(e){if(e)return e.replace(".iot-lab.info","")},as=function(e){if(e)switch(e){case"Alive":case"Running":return"badge-success";case"Error":case"toError":case"Absent":return"badge-danger";case"Waiting":case"Hold":case"Finishing":case"Busy":return"badge-warning";case"Resuming":case"Launching":case"toLaunch":case"toAckReservation":return"badge-info";case"Suspected":case"Suspended":case"Stopped":return"badge-dark";case"Terminated":default:return"badge-secondary"}},ns=function(e){if(e)return e.split(":")[0].replace("_"," ")},ss=function(e){return e&&e.includes(":")?e.split(":")[1]:e},is=function(e){if(e)return e.split(":")[1]?e.split(":")[0].replace("_"," ")+" ("+e.split(":")[1]+")":e.split(":")[0].replace("_"," ")},os=function(e){var t=/([0-9a-f]{32})_(.+)/g,r=t.exec(e);return r?"".concat(r[2],' <i class="fa fa-sm fa-tag text-muted" title="MD5: ').concat(r[1],'"></i>'):e};a["default"].filter("pluralize",function(e,t){if(t)return w(e,t)}),a["default"].filter("fromTimestamp",Zn),a["default"].filter("formatDate",Xn),a["default"].filter("formatDateTime",Qn),a["default"].filter("formatDateTimeSec",es),a["default"].filter("humanizeDuration",ts),a["default"].filter("stripDomain",rs),a["default"].filter("stateBadgeClass",as),a["default"].filter("formatArchi",ns),a["default"].filter("formatRadio",ss),a["default"].filter("formatArchiRadio",is),a["default"].filter("md5Tag",os),a["default"].directive("tooltip",function(e,t){t.oldValue!==t.value&&(I()(e).tooltip("dispose"),I()(e).tooltip({title:t.value,placement:t.arg,trigger:"hover",html:t.modifiers.html||!1,delay:400}))}),a["default"].directive("adv-tooltip",function(e,t){t.oldValue!==t.value&&(I()(e).tooltip("dispose"),I()(e).tooltip(t.value))}),a["default"].use(n["b"]),a["default"].use(i.a,{velocity:c.a}),a["default"].config.productionTip=!1,window.iotlab=J,window.map3d=La,new a["default"]({router:Wn,template:"<App/>",components:{App:te},render:function(e){return e(te)}}).$mount("#app")},5740:function(e,t,r){},"58c9":function(e,t,r){"use strict";var a=r("60c9"),n=r.n(a);n.a},"60c9":function(e,t,r){},"6fce":function(e,t,r){"use strict";var a=r("ccab"),n=r.n(a);n.a},"79cb":function(e,t,r){"use strict";var a=r("00ed"),n=r.n(a);n.a},"7b0d":function(e,t,r){},"7b7c":function(e,t,r){"use strict";var a=r("93ba"),n=r.n(a);n.a},8670:function(e,t,r){"use strict";var a=r("9632"),n=r.n(a);n.a},"8a6b":function(e,t,r){},"8cbb":function(e,t,r){},"8f4e":function(e,t,r){"use strict";var a=r("8a6b"),n=r.n(a);n.a},"93ba":function(e,t,r){},9632:function(e,t,r){},"97d3":function(e,t){e.exports='<ul id="menu-topmainmenu" class="nav navbar-nav"><li id="menu-item-2066" class="menu-item menu-item-type-post_type menu-item-object-page current_page_parent menu-item-2066"><a title="News" href="https://www.iot-lab.info/news/">News</a></li>\n<li id="menu-item-140" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-140 dropdown"><a title="Platform" data-toggle="dropdown" data-hover="dropdown" href="https://www.iot-lab.info/what-is-iot-lab/">Platform <span class="caret"></span></a>\n<ul role="menu" class=" dropdown-menu">\n    <li id="menu-item-466" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-466"><a title="What is IoT-LAB?" href="https://www.iot-lab.info/what-is-iot-lab/">What is IoT-LAB?</a></li>\n    <li id="menu-item-147" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-147"><a title="Deployment" href="https://www.iot-lab.info/deployment/">Deployment</a></li>\n    <li id="menu-item-146" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-146"><a title="Hardware" href="https://www.iot-lab.info/hardware/">Hardware</a></li>\n    <li id="menu-item-4608" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4608"><a title="Robots" href="https://www.iot-lab.info/robots/">Robots</a></li>\n    <li id="menu-item-2400" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2400"><a title="About us" href="https://www.iot-lab.info/about-us/">About us</a></li>\n</ul>\n</li>\n<li id="menu-item-1467" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-1467 dropdown"><a title="Dev Center" data-toggle="dropdown" data-hover="dropdown" href="https://www.iot-lab.info/dev-center/">Dev Center <span class="caret"></span></a>\n<ul role="menu" class=" dropdown-menu">\n    <li id="menu-item-1957" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1957"><a title="Software Development" href="https://www.iot-lab.info/dev-center/">Software Development</a></li>\n    <li id="menu-item-7329" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7329"><a title="Tutorials" href="https://www.iot-lab.info/tutorials/">Tutorials</a></li>\n    <li id="menu-item-1552" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1552"><a title="Operating Systems" href="https://www.iot-lab.info/operating-systems/">Operating Systems</a></li>\n    <li id="menu-item-1396" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1396"><a title="Libraries" href="https://www.iot-lab.info/libraries/">Libraries</a></li>\n    <li id="menu-item-1394" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1394"><a title="Drivers" href="https://www.iot-lab.info/drivers/">Drivers</a></li>\n    <li id="menu-item-7372" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7372"><a title="REST API documentation" href="http://api.iot-lab.info">REST API documentation</a></li>\n</ul>\n</li>\n<li id="menu-item-3209" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-3209 dropdown"><a title="Community" data-toggle="dropdown" data-hover="dropdown" href="https://www.iot-lab.info/community/">Community <span class="caret"></span></a>\n<ul role="menu" class=" dropdown-menu">\n    <li id="menu-item-3244" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3244"><a title="Share your experience" href="https://www.iot-lab.info/community/">Share your experience</a></li>\n    <li id="menu-item-3210" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3210"><a title="Education" href="https://www.iot-lab.info/education/">Education</a></li>\n    <li id="menu-item-2133" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2133"><a title="Publications" href="https://www.iot-lab.info/publications/">Publications</a></li>\n    <li id="menu-item-2405" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2405"><a title="Charter" href="https://www.iot-lab.info/charter/">Charter</a></li>\n</ul>\n</li>\n<li id="menu-item-1470" class="get_started menu-item menu-item-type-post_type menu-item-object-page menu-item-1470"><a title="Get Started" href="https://www.iot-lab.info/get_started/">Get Started</a></li>\n</ul>       '},9802:function(e,t,r){"use strict";var a=r("245b"),n=r.n(a);n.a},"9d3b":function(e,t,r){},"9ee7":function(e,t,r){"use strict";var a=r("3fc5"),n=r.n(a);n.a},"9f6e":function(e,t,r){"use strict";var a=r("04bb"),n=r.n(a);n.a},ac0f:function(e,t,r){},b76f:function(e,t,r){e.exports=r.p+"img/fit-iotlab3.2492f4e7.png"},bdba:function(e,t,r){},c21b:function(e,t,r){},c793:function(e,t,r){},ccab:function(e,t,r){},d807:function(e,t,r){},e2fa:function(e,t,r){"use strict";var a=r("9d3b"),n=r.n(a);n.a},e9c5:function(e,t,r){},ffd5:function(e,t,r){"use strict";var a=r("bdba"),n=r.n(a);n.a}});
//# sourceMappingURL=app.1355a49c.js.map